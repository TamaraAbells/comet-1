import{g as e,u as t,a as n,b as a,i as r,B as s,c as l,A as o,d as i,m as c,e as m,z as d,f as u,p,r as g,s as h,h as v,R as f,L as b,j as E,k as x,N as y,l as w,H as N,n as k,o as C,q as $,t as S,v as U,w as I,x as P,y as F,F as M,C as R,D as A,E as D,G as T,I as L,J as O,K as z,M as q,O as H,P as _,Q as B,S as j,T as G,U as V,V as W,W as Y,X as Z,Y as K,Z as Q,_ as J,$ as X,a0 as ee,a1 as te,a2 as ne,a3 as ae,a4 as re,a5 as se,a6 as le,a7 as oe,a8 as ie,a9 as ce,aa as me,ab as de,ac as ue,ad as pe,ae as ge,af as he,ag as ve,ah as fe,ai as be,aj as Ee,ak as xe,al as ye,am as we,an as Ne,ao as ke,ap as Ce,aq as $e,ar as Se,as as Ue,at as Ie,au as Pe,av as Fe,aw as Me,ax as Re,ay as Ae,az as De,aA as Te,aB as Le,aC as Oe,aD as ze,aE as qe,aF as He,aG as _e,aH as Be,aI as je,aJ as Ge,aK as Ve,aL as We,aM as Ye,aN as Ze,aO as Ke,aP as Qe,aQ as Je,aR as Xe,aS as et,aT as tt,aU as nt,aV as at,aW as rt,aX as st,aY as lt,aZ as ot,a_ as it,a$ as ct,b0 as mt,b1 as dt,b2 as ut,b3 as pt,b4 as gt,b5 as ht,b6 as vt,b7 as ft,b8 as bt,b9 as Et,ba as xt,bb as yt,bc as wt,bd as Nt,be as kt,bf as Ct,bg as $t,bh as St,bi as Ut,bj as It,bk as Pt,bl as Ft,bm as Mt,bn as Rt,bo as At,bp as Dt,bq as Tt,br as Lt,bs as Ot,bt as zt,bu as qt,bv as Ht,bw as _t,bx as Bt,by as jt,bz as Gt,bA as Vt,bB as Wt,bC as Yt,bD as Zt,bE as Kt,bF as Qt,bG as Jt,bH as Xt,bI as en,bJ as tn,bK as nn,bL as an,bM as rn,bN as sn,bO as ln,bP as on,bQ as cn,bR as mn,bS as dn,bT as un,bU as pn,bV as gn,bW as hn,bX as vn,bY as fn,bZ as bn,b_ as En,b$ as xn,c0 as yn,c1 as wn,c2 as Nn,c3 as kn,c4 as Cn,c5 as $n,c6 as Sn,c7 as Un,c8 as In,c9 as Pn,ca as Fn,cb as Mn,cc as Rn,cd as An}from"./vendor.b3360b82.js";const Dn={entityNotFound:"{{replace}} not found!",invalidUserAuth:"'USER' authorization can only be used on User entity",notLoggedIn:"Not logged in",fileSize:"File size must be less than {{replace}}MB",channelPermissions:"(useChannelPermissions) channelPermissions and serverPermissions must have same length",folder:{deleted:"Folder has been deleted",notOwner:"You do not own this folder",nameTooLong:"Name cannot be longer than 300 characters",alreadyExists:"You already have a folder with that name",noPermission:"You do not have permission to modify this folder.",alreadyAdded:"This post is already in this folder.",cannotEdit:"Cannot edit Read Later or Favorites folders.",cannotDelete:"Cannot delete Read Later or Favorites folders.",cannotCreate:"Cannot create Read Later or Favorites folders.",notCollaborative:"This folder is not collaborative.",notInFolder:"That post is not in this folder.",owner:"You are the owner of this folder",private:"That folder is private.",friends:"Must be friends with this folder's owner"},message:{notAuthor:"You are not the author of this message",missingArgs:"Must provide channelId, groupId, or userId",notSentInChannel:"Message was not sent in a channel",empty:"Message cannot be empty",textOrFile:"Must provide text or a file"},comment:{notAuthor:"You are not the author of this comment",empty:"Comment cannot be empty",alreadyDeleted:"Comment already deleted",alreadyVoted:"You have already voted this comment"},post:{notAuthor:"You are not the author of this post",alreadyVoted:"You have already voted this post",alreadyPinned:"Post is already pinned",notPinned:"Post is not pinned"},group:{maxSize:"Max group size is 10 users",notJoined:"You are not in this group"},server:{notJoined:"You have not joined this planet",banned:"You are banned from this planet",alreadyJoined:"You have already joined this planet",missingPermission:"Missing planet permission {{replace}}",notOwner:"Must be planet owner",inviteRequired:"Invite required to join this planet",inviteExpired:"This invite has expired."},channel:{missingPermission:"Missing channel permission {{replace}}"},user:{blocking:"You are blocking this user",blocked:"This user has blocked you",friendRequestNotSent:"You have not sent a friend request to this user",friendRequestNotReceived:"You have not received a friend request from this user",notFriends:"You are not friends with this user",alreadyBlocking:"You are already blocking this user",notBlocking:"You are not blocking this user"},upload:{invalidMime:"Image must be PNG or JPEG"},login:{invalid:"Invalid login",invalidEmail:"Invalid email address",emailInUse:"Email already in use",illegalName:"Name cannot contain {{replace}}",nameLength:"Name must be 2-32 characters",banned:"Banned{{replace}}",wrongPassword:"Incorrect password",usernameTaken:"Username taken"},notif:{notYours:"This is not your notification"}},Tn={hide:"Hide Folders",show:"Show Folders",favorites:"Favorites",readLater:"Read Later",added:"Added to {{name}}!",name:"Name",postCount:"{{count}} Post",postCount_plural:"{{count}} Posts",createdBy:"Created by",userFolder:"User Folder",serverFolder:"Planet Folder",collaborative:"Collaborative",user:{title:"Your Folders",create:"Create Folder"},server:{title:"{{name}}'s Folders",create:"Create Planet Folder"},context:{follow:"Follow Folder",unfollow:"Unfollow Folder",delete:"Delete Folder",copyLink:"Copy Folder Link",edit:"Edit Folder",collaborative:"Collaborative",changeVisibility:"Change Visibility",visibility:{public:"Public",friends:"Friends Only",private:"Private",unlisted:"Unlisted"}}},Ln={};var On,zn,qn,Hn,_n,Bn,jn,Gn,Vn,Wn,Yn,Zn,Kn,Qn,Jn,Xn,ea,ta,na,aa,ra,sa,la,oa,ia,ca,ma,da;(zn=On||(On={})).Private="Private",zn.Public="Public",zn.Restricted="Restricted",(Hn=qn||(qn={})).Blue="Blue",Hn.Green="Green",Hn.Indigo="Indigo",Hn.Pink="Pink",Hn.Purple="Purple",Hn.Red="Red",Hn.Yellow="Yellow",(Bn=_n||(_n={})).New="New",Bn.Top="Top",(Gn=jn||(jn={})).Friends="Friends",Gn.Private="Private",Gn.Public="Public",Gn.Unlisted="Unlisted",(Wn=Vn||(Vn={})).FriendRequestReceived="FriendRequestReceived",Wn.Initial="Initial",Wn.Join="Join",Wn.Left="Left",Wn.Normal="Normal",(Zn=Yn||(Yn={})).Away="Away",Zn.DoNotDisturb="DoNotDisturb",Zn.Offline="Offline",Zn.Online="Online",(Qn=Kn||(Kn={})).All="All",Qn.Featured="Featured",Qn.Joined="Joined",(Xn=Jn||(Jn={})).Added="Added",Xn.Hot="Hot",Xn.New="New",Xn.Top="Top",(ta=ea||(ea={})).All="All",ta.Day="Day",ta.Hour="Hour",ta.Month="Month",ta.Week="Week",ta.Year="Year",(aa=na||(na={})).New="New",aa.Top="Top",(sa=ra||(ra={})).Blocked="Blocked",sa.Blocking="Blocking",sa.FriendRequestIncoming="FriendRequestIncoming",sa.FriendRequestOutgoing="FriendRequestOutgoing",sa.Friends="Friends",sa.None="None",(oa=la||(la={})).Arts="Arts",oa.Business="Business",oa.Culture="Culture",oa.Discussion="Discussion",oa.Entertainment="Entertainment",oa.Gaming="Gaming",oa.Health="Health",oa.Hobbies="Hobbies",oa.Lifestyle="Lifestyle",oa.Memes="Memes",oa.Meta="Meta",oa.News="News",oa.Other="Other",oa.Politics="Politics",oa.Programming="Programming",oa.Science="Science",oa.Sports="Sports",oa.Technology="Technology",(ca=ia||(ia={})).AddPostToFolder="AddPostToFolder",ca.Admin="Admin",ca.DisplayRoleSeparately="DisplayRoleSeparately",ca.ManageChannels="ManageChannels",ca.ManageComments="ManageComments",ca.ManageFolders="ManageFolders",ca.ManageMessages="ManageMessages",ca.ManagePosts="ManagePosts",ca.ManageServer="ManageServer",ca.ManageUsers="ManageUsers",ca.PrivateChannels="PrivateChannels",ca.RestrictedChannels="RestrictedChannels",ca.SendMessages="SendMessages",(da=ma||(ma={})).Down="Down",da.None="None",da.Up="Up";const ua=e`
    fragment Channel on Channel {
  id
  name
  description
  isUnread
  mentionCount
  type
}
    `,pa=e`
    fragment Image on Image {
  originalUrl
  popupUrl
  popupWidth
  popupHeight
  smallUrl
  smallWidth
  smallHeight
}
    `,ga=e`
    fragment Metadata on LinkMetadata {
  author
  date
  description
  image {
    ...Image
  }
  publisher
  title
  twitterCard
  url
  domain
  themeColor
}
    ${pa}`,ha=e`
    fragment Comment on Comment {
  id
  parentComment {
    id
  }
  text
  voteCount
  voteType
  isDeleted
  createdAt
  updatedAt
  linkMetadatas {
    ...Metadata
  }
}
    ${ga}`,va=e`
    fragment User on User {
  id
  username
  avatarUrl
  isOnline
  onlineStatus
  isCurrentUser
  color
  isOg
}
    `,fa=e`
    fragment Group on Group {
  id
  name
  displayName
  avatarUrl
  unreadCount
  lastMessageAt
}
    `,ba=e`
    fragment CurrentUser on User {
  ...User
  isAdmin
  email
  servers {
    id
    name
    displayName
    avatarUrl
    owner {
      id
    }
    permissions
    channels {
      id
      isUnread
      mentionCount
    }
  }
  relatedUsers {
    ...User
    showChat
    unreadCount
  }
  groups {
    ...Group
    owner {
      id
    }
    users {
      ...User
    }
  }
}
    ${va}
${fa}`,Ea=e`
    fragment Folder on Folder {
  id
  name
  avatarUrl
  description
  postCount
  followerCount
  isCollaborative
  visibility
}
    `,xa=e`
    fragment Message on Message {
  id
  text
  createdAt
  updatedAt
  type
  images {
    ...Image
  }
  file {
    url
    mime
    filename
    size
  }
  linkMetadatas {
    ...Metadata
  }
  mentionedUsers {
    id
  }
  isEveryoneMentioned
  isPinned
}
    ${pa}
${ga}`,ya=e`
    fragment Post on Post {
  id
  title
  isPinned
  text
  linkUrl
  relativeUrl
  commentCount
  voteCount
  voteType
  thumbnailUrl
  domain
  isDeleted
  createdAt
  updatedAt
  linkMetadata {
    ...Metadata
  }
  images {
    image {
      ...Image
    }
    linkUrl
    caption
  }
}
    ${ga}
${pa}`,wa=e`
    fragment RelatedUser on User {
  ...User
  showChat
  unreadCount
  lastMessageAt
}
    ${va}`,Na=e`
    fragment Role on Role {
  id
  name
  color
  permissions
  isDefault
}
    `,ka=e`
    fragment ServerUser on ServerUser {
  id
  role {
    ...Role
  }
  user {
    ...User
  }
}
    ${Na}
${va}`,Ca=e`
    fragment Reply on Reply {
  id
  isRead
  comment {
    id
    text
    voteCount
    createdAt
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
    post {
      id
      title
      relativeUrl
      server {
        id
        displayName
        name
        avatarUrl
      }
    }
    parentComment {
      id
      text
      voteCount
      createdAt
      author {
        ...User
      }
      serverUser {
        ...ServerUser
      }
    }
  }
}
    ${va}
${ka}`,$a=e`
    fragment Server on Server {
  id
  name
  displayName
  description
  avatarUrl
  bannerUrl
  category
  userCount
  isJoined
  isFeatured
  isDownvotesEnabled
  owner {
    id
  }
  permissions
}
    `,Sa=e`
    mutation createChannel($input: CreateChannelInput!) {
  createChannel(input: $input) {
    ...Channel
  }
}
    ${ua}`;const Ua=e`
    mutation updateChannel($input: UpdateChannelInput!) {
  updateChannel(input: $input) {
    ...Channel
  }
}
    ${ua}`;const Ia=e`
    mutation deleteChannel($input: DeleteChannelInput!) {
  deleteChannel(input: $input)
}
    `;e`
    mutation moveChannel($input: MoveChannelInput!) {
  moveChannel(input: $input) {
    ...Channel
  }
}
    ${ua}`;const Pa=e`
    mutation readChannel($input: ReadChannelInput!) {
  readChannel(input: $input) {
    ...Channel
  }
}
    ${ua}`;const Fa=e`
    mutation createComment($input: CreateCommentInput!) {
  createComment(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;e`
    mutation updateComment($input: UpdateCommentInput!) {
  updateComment(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;const Ma=e`
    mutation deleteComment($input: DeleteCommentInput!) {
  deleteComment(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;const Ra=e`
    mutation updateCommentVote($input: UpdateCommentVoteInput!) {
  updateCommentVote(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;const Aa=e`
    mutation pinComment($input: PinCommentInput!) {
  pinComment(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;const Da=e`
    mutation unpinComment($input: UnpinCommentInput!) {
  unpinComment(input: $input) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;e`
    mutation createFolder($input: CreateFolderInput!) {
  createFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`;const Ta=e`
    mutation updateFolder($input: UpdateFolderInput!) {
  updateFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`;const La=e`
    mutation deleteFolder($input: DeleteFolderInput!) {
  deleteFolder(input: $input)
}
    `;e`
    mutation moveServerFolder($input: MoveServerFolderInput!) {
  moveServerFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`,e`
    mutation moveUserFolder($input: MoveUserFolderInput!) {
  moveUserFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`;const Oa=e`
    mutation followFolder($input: FollowFolderInput!) {
  followFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`;const za=e`
    mutation unfollowFolder($input: UnfollowFolderInput!) {
  unfollowFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`;e`
    mutation addPostToFolder($input: AddPostToFolderInput!) {
  addPostToFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`,e`
    mutation removePostFromFolder($input: RemovePostFromFolderInput!) {
  removePostFromFolder(input: $input) {
    ...Folder
  }
}
    ${Ea}`,e`
    mutation createGroup($input: CreateGroupInput!) {
  createGroup(input: $input) {
    ...Group
  }
}
    ${fa}`,e`
    mutation updateGroup($input: UpdateGroupInput!) {
  updateGroup(input: $input) {
    ...Group
  }
}
    ${fa}`,e`
    mutation leaveGroup($input: LeaveGroupInput!) {
  leaveGroup(input: $input)
}
    `;const qa=e`
    mutation readGroup($input: ReadGroupInput!) {
  readGroup(input: $input) {
    ...Group
  }
}
    ${fa}`;e`
    mutation addUserToGroup($input: AddUserToGroupInput!) {
  addUserToGroup(input: $input) {
    ...Group
  }
}
    ${fa}`,e`
    mutation removeUserFromGroup($input: RemoveUserFromGroupInput!) {
  removeUserFromGroup(input: $input) {
    ...Group
  }
}
    ${fa}`;const Ha=e`
    mutation createMessage($input: CreateMessageInput!) {
  createMessage(input: $input) {
    ...Message
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${xa}
${va}
${ka}`;function _a(e){const n={...Ln,...e};return t(Ha,n)}e`
    mutation updateMessage($input: UpdateMessageInput!) {
  updateMessage(input: $input) {
    ...Message
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${xa}
${va}
${ka}`;const Ba=e`
    mutation deleteMessage($input: DeleteMessageInput!) {
  deleteMessage(input: $input)
}
    `;const ja=e`
    mutation pinMessage($input: PinMessageInput!) {
  pinMessage(input: $input) {
    ...Message
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${xa}
${va}
${ka}`;function Ga(e){const n={...Ln,...e};return t(ja,n)}const Va=e`
    mutation unpinMessage($input: UnpinMessageInput!) {
  unpinMessage(input: $input) {
    ...Message
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${xa}
${va}
${ka}`;function Wa(e){const n={...Ln,...e};return t(Va,n)}const Ya=e`
    mutation updateTyping($input: TypingInput!) {
  updateTyping(input: $input)
}
    `;const Za=e`
    mutation createPost($input: CreatePostInput!) {
  createPost(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`;e`
    mutation updatePost($input: UpdatePostInput!) {
  updatePost(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`;const Ka=e`
    mutation deletePost($input: DeletePostInput!) {
  deletePost(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`;const Qa=e`
    mutation updatePostVote($input: UpdatePostVoteInput!) {
  updatePostVote(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`;e`
    mutation pinPost($input: PinPostInput!) {
  pinPost(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`,e`
    mutation unpinPost($input: UnpinPostInput!) {
  unpinPost(input: $input) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ya}
${va}
${ka}`;const Ja=e`
    mutation createFriendRequest($input: CreateFriendRequestInput!) {
  createFriendRequest(input: $input) {
    ...User
    relatedUsers {
      ...RelatedUser
    }
    servers {
      id
      avatarUrl
      name
    }
  }
}
    ${va}
${wa}`;e`
    mutation deleteFriendRequest($input: DeleteFriendRequestInput!) {
  deleteFriendRequest(input: $input) {
    ...User
    relatedUsers {
      ...RelatedUser
    }
    servers {
      id
      avatarUrl
      name
    }
  }
}
    ${va}
${wa}`,e`
    mutation answerFriendRequest($input: AnswerFriendRequestInput!) {
  answerFriendRequest(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`,e`
    mutation blockUser($input: BlockUserInput!) {
  blockUser(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`,e`
    mutation unblockUser($input: UnblockUserInput!) {
  unblockUser(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`;const Xa=e`
    mutation removeFriend($input: RemoveFriendInput!) {
  removeFriend(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`;const er=e`
    mutation readDm($input: ReadDmInput!) {
  readDm(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`;function tr(e){const n={...Ln,...e};return t(er,n)}const nr=e`
    mutation openDm($input: OpenDmInput!) {
  openDm(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`;const ar=e`
    mutation closeDm($input: CloseDmInput!) {
  closeDm(input: $input) {
    ...RelatedUser
  }
}
    ${wa}`;function rr(e){const n={...Ln,...e};return t(ar,n)}const sr=e`
    mutation markReplyRead($input: MarkReplyReadInput!) {
  markReplyRead(input: $input) {
    ...Reply
  }
}
    ${Ca}`;const lr=e`
    mutation markReplyUnread($input: MarkReplyUnreadInput!) {
  markReplyUnread(input: $input) {
    ...Reply
  }
}
    ${Ca}`;const or=e`
    mutation createRole($input: CreateRoleInput!) {
  createRole(input: $input) {
    ...Role
  }
}
    ${Na}`;const ir=e`
    mutation updateRole($input: UpdateRoleInput!) {
  updateRole(input: $input) {
    ...Role
  }
}
    ${Na}`;const cr=e`
    mutation deleteRole($input: DeleteRoleInput!) {
  deleteRole(input: $input)
}
    `;const mr=e`
    mutation setUserRole($input: SetUserRoleInput!) {
  setUserRole(input: $input) {
    ...ServerUser
  }
}
    ${ka}`;const dr=e`
    mutation createServer($input: CreateServerInput!) {
  createServer(input: $input) {
    ...Server
    roles {
      ...Role
    }
  }
}
    ${$a}
${Na}`;const ur=e`
    mutation updateServer($input: UpdateServerInput!) {
  updateServer(input: $input) {
    ...Server
  }
}
    ${$a}`;const pr=e`
    mutation deleteServer($input: DeleteServerInput!) {
  deleteServer(input: $input)
}
    `;e`
    mutation moveServer($input: MoveServerInput!) {
  moveServer(input: $input)
}
    `;const gr=e`
    mutation joinServer($input: JoinServerInput!) {
  joinServer(input: $input) {
    ...Server
  }
}
    ${$a}`;const hr=e`
    mutation leaveServer($input: LeaveServerInput!) {
  leaveServer(input: $input) {
    ...Server
  }
}
    ${$a}`;function vr(e){const n={...Ln,...e};return t(hr,n)}e`
    mutation readServer($input: ReadServerInput!) {
  readServer(input: $input) {
    ...Server
  }
}
    ${$a}`;const fr=e`
    mutation banUserFromServer($input: BanUserFromServerInput!) {
  banUserFromServer(input: $input)
}
    `;e`
    mutation unbanUserFromServer($input: UnbanUserFromServerInput!) {
  unbanUserFromServer(input: $input)
}
    `;const br=e`
    mutation kickUserFromServer($input: KickUserFromServerInput!) {
  kickUserFromServer(input: $input)
}
    `;const Er=e`
    mutation featureServer($input: FeatureServerInput!) {
  featureServer(input: $input) {
    ...Server
  }
}
    ${$a}`;const xr=e`
    mutation unfeatureServer($input: UnfeatureServerInput!) {
  unfeatureServer(input: $input) {
    ...Server
  }
}
    ${$a}`;const yr=e`
    mutation createAccount($input: CreateAccountInput!) {
  createAccount(input: $input) {
    accessToken
    user {
      ...CurrentUser
    }
  }
}
    ${ba}`;const wr=e`
    mutation changePassword($input: ChangePasswordInput!) {
  changePassword(input: $input) {
    ...CurrentUser
  }
}
    ${ba}`;const Nr=e`
    mutation changeUserAvatar($input: ChangeUserAvatarInput!) {
  changeUserAvatar(input: $input) {
    ...CurrentUser
  }
}
    ${ba}`;const kr=e`
    mutation deleteAccount($input: DeleteAccountInput!) {
  deleteAccount(input: $input)
}
    `;const Cr=e`
    mutation login($input: LoginInput!) {
  login(input: $input) {
    accessToken
    user {
      ...CurrentUser
    }
  }
}
    ${ba}`;const $r=e`
    mutation changeOnlineStatus($input: ChangeOnlineStatusInput!) {
  changeOnlineStatus(input: $input) {
    ...CurrentUser
  }
}
    ${ba}`;e`
    mutation globalBan($input: GlobalBanInput!) {
  globalBan(input: $input)
}
    `;const Sr=e`
    query comments($postId: ID!, $sort: CommentsSort) {
  comments(postId: $postId, sort: $sort) {
    ...Comment
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
  }
}
    ${ha}
${va}
${ka}`;const Ur=e`
    query currentUser @live {
  user {
    ...CurrentUser
  }
}
    ${ba}`;e`
    query folder($id: ID!) @live {
  folder(id: $id) {
    ...Folder
    postCount
    owner {
      ...User
    }
    server {
      id
      displayName
      name
      avatarUrl
      permissions
    }
  }
}
    ${Ea}
${va}`;const Ir=e`
    query getLinkMeta($linkUrl: String!) {
  getLinkMeta(linkUrl: $linkUrl) {
    ...Metadata
  }
}
    ${ga}`;const Pr=e`
    query messages($channelId: ID, $userId: ID, $groupId: ID, $limit: PositiveInt, $cursor: ID) {
  messages(
    channelId: $channelId
    userId: $userId
    groupId: $groupId
    limit: $limit
    cursor: $cursor
  ) {
    hasMore
    messages {
      ...Message
      author {
        ...User
      }
      serverUser {
        ...ServerUser
      }
    }
  }
}
    ${xa}
${va}
${ka}`;const Fr=e`
    query post($id: ID!) {
  post(id: $id) {
    ...Post
    author {
      ...User
    }
    serverUser {
      ...ServerUser
    }
    server {
      id
      name
      avatarUrl
      isDownvotesEnabled
      displayName
      permissions
    }
  }
}
    ${ya}
${va}
${ka}`;const Mr=e`
    query posts($sort: PostsSort, $offset: NonNegativeInt, $limit: PositiveInt, $time: PostsTime, $folderId: ID, $serverId: ID, $search: String, $feed: PostsFeed) {
  posts(
    sort: $sort
    time: $time
    folderId: $folderId
    serverId: $serverId
    search: $search
    offset: $offset
    limit: $limit
    feed: $feed
  ) {
    hasMore
    posts {
      ...Post
      author {
        ...User
      }
      serverUser {
        ...ServerUser
      }
      server {
        id
        name
        avatarUrl
        isDownvotesEnabled
        displayName
        permissions
      }
    }
  }
}
    ${ya}
${va}
${ka}`;const Rr=e`
    query publicServers($sort: PublicServersSort, $category: ServerCategory, $featured: Boolean) {
  publicServers(sort: $sort, category: $category, featured: $featured) {
    id
    name
    displayName
    avatarUrl
    bannerUrl
    description
    userCount
    category
    isFeatured
  }
}
    `;function Ar(e){const t={...Ln,...e};return n(Rr,t)}const Dr=e`
    query replies {
  replies {
    ...Reply
  }
}
    ${Ca}`;function Tr(e){const t={...Ln,...e};return n(Dr,t)}const Lr=e`
    query server($id: ID, $name: String) @live {
  server(id: $id, name: $name) {
    ...Server
    permissions
    channels {
      ...Channel
    }
    roles {
      ...Role
    }
  }
}
    ${$a}
${ua}
${Na}`;const Or=e`
    query serverUsers($serverId: ID!) @live {
  serverUsers(serverId: $serverId) {
    ...ServerUser
  }
}
    ${ka}`;const zr=e`
    query user($id: ID, $username: String) @live {
  user(id: $id, username: $username) {
    ...User
    relatedUsers {
      ...User
    }
    servers {
      id
      avatarUrl
      name
    }
  }
}
    ${va}`;function qr(e){const t={...Ln,...e};return n(zr,t)}e`
    subscription CommentChanged {
  commentChanged {
    added {
      ...Comment
      post {
        id
      }
    }
    updated {
      ...Comment
    }
    deleted {
      ...Comment
      post {
        id
      }
    }
  }
}
    ${ha}`;const Hr=e`
    subscription MessageChanged {
  messageChanged {
    added {
      ...Message
      author {
        ...User
      }
      serverUser {
        ...ServerUser
      }
      channel {
        name
        id
        server {
          id
          name
        }
      }
      group {
        displayName
        id
      }
      toUser {
        username
        id
      }
    }
    updated {
      ...Message
      author {
        ...User
      }
      serverUser {
        ...ServerUser
      }
    }
    deleted {
      id
      channel {
        id
      }
      group {
        id
      }
      toUser {
        id
      }
    }
  }
}
    ${xa}
${va}
${ka}`;e`
    subscription PostChanged {
  postChanged {
    added {
      ...Post
    }
    updated {
      ...Post
    }
    deleted {
      ...Post
    }
  }
}
    ${ya}`,e`
    subscription ReplyChanged {
  replyChanged {
    added {
      ...Reply
    }
    updated {
      ...Reply
    }
    deleted {
      ...Reply
    }
  }
}
    ${Ca}`;const _r=e`
    subscription typingUpdated($userId: ID, $groupId: ID, $channelId: ID) {
  typingUpdated(userId: $userId, groupId: $groupId, channelId: $channelId) {
    typingUserId
    isTyping
  }
}
    `;const Br={en:{translation:{home:"Home",copyId:"Copy ID",markRead:"Mark As Read",continue:"Continue",more:"More",updateAvailable:"Update Available!",auth:{login:"Login",createAccount:"Create an Account",welcomeBack:"Welcome Back!",name:"Name",password:"Password",email:"Email",alreadyHaveAccount:"Already have an account?",register:"Register",needAccount:"Need an account?"},category:{Featured:"Featured",Arts:"Arts",Business:"Business",Culture:"Culture",Discussion:"Discussion",Entertainment:"Entertainment",Gaming:"Gaming",Health:"Health",Hobbies:"Hobbies",Lifestyle:"Lifestyle",Memes:"Memes",Meta:"Meta",News:"News",Politics:"Politics",Programming:"Programming",Science:"Science",Sports:"Sports",Technology:"Technology",Other:"Other"},channel:{title:"Channels",togglePrivate:"Private Channel",hideUsers:"Hide Users",showUsers:"Show Users",create:"Create Channel",edit:"Edit Channel",context:{markRead:"Mark As Read",delete:"Delete Channel",edit:"Edit Channel",mute:"Mute Channel"}},comment:{noPermission:"You do not have permission to view comments.",reply:"Reply",cancelReply:"Cancel Reply",hideReplies:"Hide Replies",showReplies:"Show Replies",create:{submit:"Comment",cancel:"Cancel"},context:{copyLink:"Copy Comment Link",delete:"Delete Comment",reply:"Reply",vote:"Add Rocket",unvote:"Remove Rocket",votePermission:"This planet does not allow you to rocket comments.",pin:"Pin Comment",unpin:"Unpin Comment",edit:"Edit Comment"}},dm:{title:"Direct Messages",create:"Create DM",markRead:"Mark Read",shared:"Shared with {{user.username}}!"},error:Dn,explore:{title:"Explore",categories:"Categories",all:"All"},folder:Tn,inbox:{title:"Inbox",tab:{all:"All",unread:"Unread"}},infinity:{comingSoon:"Comet Infinity is coming soon!",title:"Infinity"},message:{message:"Message",pinned:"Pinned Messages",upload:"Upload a File",typing:{one:"{{name}} is typing...",two:"{{name1}} and {{name2}} are typing...",three:"{{name1}}, {{name2}}, and {{name3}} are typing...",several:"Several people are typing..."},context:{copyLink:"Copy Message Link",pin:"Pin Message",unpin:"Unpin Message",edit:"Edit Message",delete:"Delete Message"}},permissions:{server:{[ia.ManageChannels]:{title:"Manage Channels",description:"Allows members to create, edit, or delete channels."},[ia.ManageServer]:{title:"Manage Roles",description:"Allows members to create new roles and edit or delete roles lower than their highest role. Also allows members to change permissions of individual channels that they have access to."},[ia.ManageServer]:{title:"Manage Planet",description:"Allows members to change this planet's name, description, icon, and banner image."},[ia.SendMessages]:{title:"Send Messages",description:"Allows members to send messages in text channels."},[ia.RestrictedChannels]:{title:"Send Messages in Restricted Channels",description:"Allows members to send messages in restricted text channels."},[ia.PrivateChannels]:{title:"Use Private Channels",description:"Allows members to view and send messages in private text channels."},[ia.ManageMessages]:{title:"Manage Messages",description:"Allows members to remove messages by other members or pin any message."},[ia.ManagePosts]:{title:"Manage Posts",description:"Allows members to pin and remove posts."},[ia.ManageComments]:{title:"Manage Comments",description:"Allows members to pin and remove comments."},[ia.ManageFolders]:{title:"Manage Folders",description:"Allows members to create, delete, and edit folders."},[ia.AddPostToFolder]:{title:"Add Posts to Folders",description:"Allows members to add and remove posts from folders."},[ia.DisplayRoleSeparately]:{title:"Display Role Separately",description:"Members with this role will appear separately in the users list"},[ia.Admin]:{title:"Administrator",description:"Members with this role have every permission"},[ia.ManageUsers]:{title:"Manage Users",description:"Ban and kick users"}}},post:{createPost:"Create a post",create:{submit:"Post",cancel:"Cancel"},type:{text:"Text Post",link:"Link Post",image:"Image Post",album:"Image Album"},createComment:"Write a comment",commentCount:"{{count}} Comment",commentCount_plural:"{{count}} Comments",participantCount:"{{count}} Participant",participantCount_plural:"{{count}} Participants",creator:"Creator",context:{pin:"Pin Post",pinned:"Post pinned!",unpin:"Unpin Post",unpinned:"Post unpinned!",removeFromFolder:"Remove from Folder",addToUserFolder:"Add to Folder",addToServerFolder:"Add to Planet Folder",edit:"Edit Post",delete:"Delete Post",deleted:"Post deleted!",copyLink:"Copy Post Link",sendToFriend:"Send to Friend",vote:"Add Rocket",unvote:"Remove Rocket",votePermission:"This planet does not allow you to rocket posts."},hideParticipants:"Hide Participants",showParticipants:"Show Participants",pinnedTo:"Pinned to {{server.name}}",expand:"Show Details",collapse:"Hide Details",feed:{title:"Your Feed",refresh:"Refresh Posts",sort:{hot:"Hot",top:"Top",new:"New"},time:{hour:"Hour",day:"Day",week:"Week",month:"Month",year:"Year",all:"All"},liveMode:{title:"Live Mode",description:"Automatically add new posts to feed",comingSoon:"Live Mode is coming soon!"},subscriptions:{show:"Show Subscriptions",hide:"Hide Subscriptions",comingSoon:"Planet subscriptions are coming soon!"}}},search:{comingSoon:"Search is coming soon!"},server:{loading:"Loading planet...",feed:"Feed",invitePeople:"Invite People",onlineCount:"{{count}} online",memberCount:"{{count}} Member",memberCount_plural:"{{count}} Members",context:{markRead:"Mark As Read",mute:"Mute Planet",invite:"Invite People",leave:"Leave Planet"},create:{title:"Create Planet",name:"Planet Name",upload:"Upload",requireInvite:"Require Invite to Join"}},settings:{title:"Settings"},user:{hideUsers:"Hide Users",showUsers:"Show Users",context:{viewProfile:"Profile",closeDm:"Close DM",block:"Block",unblock:"Unblock",addFriend:"Add Friend",removeFriend:"Remove Friend",sendMessage:"Send Message",message:"Message",kickUser:"Kick {{user.username}}",banUser:"Ban {{user.username}}",banPrompt:"Reason (Optional)",ignore:"Ignore",accept:"Accept",revoke:"Revoke Friend Request",sendFriendRequest:"Send Friend Request",blockingYou:"Blocking You",markRead:"Mark as Read"},profile:{sentFriendRequest:"Request Sent",receivedFriendRequest:"Accept Request",mutualServers:"Mutual Planets",mutualFriends:"Mutual Friends",sendMessage:"Send Message"},offline:"Offline",online:"Online",friends:{title:"Friends",sendMessage:"Message",revokeRequest:"Cancel",acceptRequest:"Accept",rejectRequest:"Ignore",tab:{online:"Online",all:"All",pending:"Pending",blocked:"Blocked",add:"Add Friend"}}}}}};r.use(s).use(l).init({resources:Br,fallbackLng:"en",debug:!1,load:"languageOnly",interpolation:{escapeValue:!1}});const jr={status:"connecting"};const Gr=g.exports.createContext({user:null,loading:!0});function Vr({children:e}){const{data:t,loading:a}=function(e){const t={...Ln,...e};return n(Ur,t)}({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),r=null==t?void 0:t.user;return g.exports.useEffect((()=>{r?h({id:r.id,email:r.email,username:r.username}):v((e=>e.setUser(null)))}),[r]),f.createElement(Gr.Provider,{value:{user:r,loading:(a||"connected"!==jr.status)&&!r}},e)}const Wr=()=>{const{user:e,loading:t}=g.exports.useContext(Gr);return[e,t]};var Yr=g.exports.memo((function({children:e="No more posts loaded!",className:t="h-48"}){return f.createElement("div",{className:"flex flex-col items-center justify-center text-primary pt-6"},f.createElement("img",{alt:"astronaut",src:"/astronaut.png",className:`object-contain opacity-50 animate-float select-none pointer-events-none ${t}`}),f.createElement("div",{className:"text-tertiary pt-3 text-lg font-semibold"},e))}));function Zr(){return Wr(),f.createElement("div",{className:"relative h-full w-full dark:bg-gray-750 flex flex-col items-center justify-center p-6 text-center"},f.createElement("div",{className:"text-center space-y-3"},f.createElement(Yr,null,"This page does not exist.",f.createElement(b,{to:"/",className:"block text-lg pt-3 text-accent font-medium cursor-pointer hover:underline"},"Return home"))))}const Kr=E(((e,t)=>({friendsPage:"Online",setFriendsPage:t=>e({friendsPage:t}),inboxPage:"Unread",setInboxPage:t=>e({inboxPage:t}),postsSort:"Hot",setPostsSort:t=>e({postsSort:t}),postsTime:"Day",setPostsTime:t=>e({postsTime:t}),postsFeed:"Joined",setPostsFeed:t=>e({postsFeed:t}),commentsSort:"Top",setCommentsSort:t=>e({commentsSort:t}),liveMode:!1,setLiveMode:t=>e({liveMode:t}),serverPages:{},setServerPage:(n,a)=>e({serverPages:{...t().serverPages,[n]:a}}),homePage:null,setHomePage:t=>e({homePage:t}),replyingCommentId:null,setReplyingCommentId:t=>e({replyingCommentId:t}),canGoBack:!1,setCanGoBack:t=>e({canGoBack:t}),exploreSort:"Top",setExploreSort:t=>e({exploreSort:t}),exploreCategory:null,setExploreCategory:t=>e({exploreCategory:t}),dialogUserId:null,setDialogUserId:t=>e({dialogUserId:t,userDialogOpen:!!t}),userDialogOpen:!1,setUserDialogOpen:t=>e({userDialogOpen:t}),folderSort:"Added",setFolderSort:t=>e({folderSort:t}),updateAvailable:!1,setUpdateAvailable:t=>e({updateAvailable:t}),loginDialog:!1,setLoginDialog:t=>e({loginDialog:t}),createAccount:!1,setCreateAccount:t=>e({createAccount:t}),showLeftSidebar:!1,setShowLeftSidebar:t=>e({showLeftSidebar:t}),showRightSidebar:!1,setShowRightSidebar:t=>e({showRightSidebar:t})})));function Qr({className:e}){return f.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},f.createElement("path",{fillRule:"evenodd",d:"M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z",clipRule:"evenodd"}))}function Jr({className:e}){return f.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},f.createElement("path",{d:"M13 7H7v6h6V7z"}),f.createElement("path",{fillRule:"evenodd",d:"M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z",clipRule:"evenodd"}))}function Xr({className:e}){return f.createElement("svg",{className:e,viewBox:"0 0 24 24"},f.createElement("path",{fill:"currentColor",d:"M17 14H19V17H22V19H19V22H17V19H14V17H17V14M20 12C20 8.64 17.93 5.77 15 4.59V5C15 6.1 14.1 7 13 7H11V9C11 9.55 10.55 10 10 10H8V12H14C14.5 12 14.9 12.35 15 12.81C13.2 13.85 12 15.79 12 18C12 19.5 12.54 20.85 13.44 21.9L12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12L21.9 13.44C21.34 12.96 20.7 12.59 20 12.34L20 12M11 19.93V18C9.9 18 9 17.1 9 16V15L4.21 10.21C4.08 10.78 4 11.38 4 12C4 16.08 7.06 19.44 11 19.93Z"}))}function es({className:e="h-5 w-5 text-primary"}){return f.createElement("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},f.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}function ts({className:e}){return f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 20 20",fill:"currentColor"},f.createElement("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),f.createElement("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"}))}var ns=g.exports.forwardRef((({avatarUrl:e,children:t,loading:n="eager",className:a="",size:r=12,style:s={}},l)=>f.createElement("div",{ref:l,className:`relative flex-shrink-0 flex items-center justify-center bg-cover bg-center ${a}`,style:{width:r/4+"rem",height:r/4+"rem",backgroundImage:e?`url(${e})`:void 0,...s}},t))),as=g.exports.forwardRef((({server:e,loading:t="eager",size:n=12,className:a="",style:r={}},s)=>{var l;const o=(null!=(l=null==e?void 0:e.displayName)?l:"").split(" ").map((e=>e[0])).join("").toUpperCase(),i=g.exports.useMemo((()=>{const e=o;return e.length<=2?"18px":3===e.length?"16px":4===e.length?"14px":5===e.length?"12px":e.length>=6?"10px":void 0}),[o]);return e?f.createElement(ns,{ref:s,avatarUrl:e.avatarUrl,loading:t,className:`${a} cursor-pointer`,size:n,style:r},!e.avatarUrl&&f.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 48 48",className:"absolute top-0 left-0",overflow:"visible"},f.createElement("defs",null,f.createElement("g",null,f.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z"})),f.createElement("g",null,f.createElement("rect",{x:"28",y:"-4",width:"24",height:"24",rx:"12",ry:"12",transform:"translate(20 -20)"})),f.createElement("g",null,f.createElement("rect",{x:"28",y:"28",width:"24",height:"24",rx:"12",ry:"12",transform:"translate(20 20)"}))),f.createElement("foreignObject",{x:"0",y:"0",width:"48",height:"48"},f.createElement("div",{className:"flex items-center justify-center h-full",tabIndex:"-1","aria-label":e.name,style:{fontSize:i}},f.createElement("div",{className:"flex items-center justify-center whitespace-nowrap font-medium text-tertiary","aria-hidden":"true"},o))))):null}));const rs=e=>w(`\n  w-12\n  h-12\n  object-cover\n  inline-flex\n  items-center\n  justify-center\n  hover:rounded-2xl\n  ${e?"rounded-2xl":"rounded-3xl"}\n  transform\n  transition-all\n  relative\n  group\n  cursor-pointer\n`),ss=(e,t)=>w(`\n  absolute\n  left-0\n  w-1\n  dark:bg-white\n  rounded-r-2xl\n  top-1/2\n  -translate-y-1/2\n  transform\n  transition\n  duration-250\n  group-hover:-translate-x-3\n  ${e?"-translate-x-3 h-10":t?"-translate-x-3 h-2.5 group-hover:h-5":"-translate-x-4 h-5"}\n`);var ls=g.exports.forwardRef((({name:e,children:t,to:n,onClick:a,className:r="dark:bg-gray-800 bg-gray-200",active:s=!1,unread:l=!1},o)=>f.createElement(x,{content:e,placement:"right",ref:o,offset:[0,22]},n?f.createElement(y,{to:n,className:`${rs(s)} ${r}`},f.createElement("div",{className:ss(s,l)}),t):f.createElement("div",{onClick:a,className:`${rs(s)} ${r}`},f.createElement("div",{className:ss(s,l)}),t))));function os(){let e=window.navigator.userAgent,t=window.navigator.platform,n=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?n="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n="Windows":/Android/.test(e)?n="Android":/Linux/.test(t)&&(n="Linux"),n}const is=0,cs=2,ms={disable:!1,holdToDisplay:1e3,posX:0,posY:0,mouseButton:cs,disableIfShiftIsPressed:!1,collect(){}};function ds(e,t){return t=>{const n=Object.assign({},ms,t);g.exports.useRef(!1),g.exports.useRef(),g.exports.useRef();const a=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),e(((e,t)=>["X","Y"].map((n=>(e[`client${n}`]||e.touches&&e.touches[0][`page${n}`])-t[`pos${n}`])))(t,n),{...n.collect(),href:t.target.href}))};return[{onContextMenu:e=>{e.button===n.mouseButton&&a(e)},onClick:e=>{e.button===n.mouseButton&&a(e)}}]}}const us=27,ps=13,gs=38,hs=40,vs={position:"fixed",opacity:0,pointerEvents:"none"},fs=e=>e.focus(),bs=({handleElementSelect:e=fs}={})=>{const t=g.exports.useRef(),n=g.exports.useRef([]),[a,r]=g.exports.useState(vs),[s,l]=g.exports.useState(-1),[o,i]=g.exports.useState(!1),[c,m]=g.exports.useState([0,0]),[d,u]=g.exports.useState(),p=g.exports.useCallback((()=>i(!1)),[i]);g.exports.useCallback((()=>{o&&i(!1)}),[o,i]);const h=g.exports.useCallback(((e,t)=>{i(!0),m(e),u(t)}),[i,u]);g.exports.useEffect((()=>{const a=e=>{t.current.contains(e.target)||(l(-1),p())},r=t=>{switch(t.keyCode){case us:t.preventDefault(),p();break;case gs:t.preventDefault(),s>0&&(l((e=>e-1)),e(n.current[s-1]));break;case hs:t.preventDefault(),s+1<n.current.length&&(l((e=>e+1)),e(n.current[s+1]));break;case ps:-1!==s&&n.current[s].click(),p()}};return o&&(document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),document.addEventListener("scroll",p),document.addEventListener("contextmenu",p),document.addEventListener("keydown",r)),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a),document.removeEventListener("scroll",p),document.removeEventListener("contextmenu",p),document.removeEventListener("keydown",r)}}),[t,p,s,l,n,e,o]);const[v,f]=g.exports.useState(!1);g.exports.useLayoutEffect((()=>{if(o){const e=t.current.getBoundingClientRect(),{top:n,left:a,isRight:s}=((e,[t,n])=>{const a={top:n,left:t,isRight:!1},{innerWidth:r,innerHeight:s}=window;return n+e.height>s&&(a.top-=e.height),t+e.width>r&&(a.left-=e.width),t+2*e.width>r&&(a.isRight=!0),a.top<0&&(a.top=e.height<s?(s-e.height)/2:0),a.left<0&&(a.left=e.width<r?(r-e.width)/2:0),a})(e,c);f(s),r((e=>({...e,top:`${n}px`,left:`${a}px`,opacity:1,pointerEvents:"auto"})))}else r(vs)}),[t,o,c]);return[{style:a,ref:t,role:"menu",tabIndex:-1},{ref:e=>n.current=null===e?[]:[...n.current,e],role:"menuitem",tabIndex:-1},ds(h),{data:d,isVisible:o,setVisible:i,coords:c,setCoords:m,isRight:v}]},Es=e=>w(`\n  active:text-white\n  dark:active:text-white\n  dark:hover:text-white\n  dark:focus:text-white\n  hover:text-white\n  select-none\n  cursor-pointer\n  w-full\n  px-2\n  py-1.5\n  leading-5\n  flex\n  items-center\n  text-13\n  rounded-sm\n  font-medium\n  focus:outline-none\n  group\n  relative\n  ${e?"text-red-500 active:bg-red-600 hover:bg-red-500 focus:bg-red-500":"text-gray-600 dark:text-gray-400 active:bg-green-700 focus:bg-green-600 hover:bg-green-600"} \n`);function xs({item:{bindMenuItem:e,hideMenu:t,isRight:n},onClick:a,red:r,checked:s=null,label:l,children:o}){return f.createElement("div",{...e,className:Es(r),onClick:e=>{t(),a&&a(e)}},l,null!==s&&f.createElement("input",{type:"checkbox",className:"ml-auto h-4 w-4 border-none rounded dark:checked:bg-green-600 dark:bg-gray-750 focus:outline-none cursor-pointer",checked:s,readOnly:!0}),o&&f.createElement(f.Fragment,null,f.createElement("div",{className:"ml-auto"},f.createElement(N,{className:"w-5 h-5 -mr-0.5"})),f.createElement("div",{className:"absolute -top-2 hidden group-hover:block "+(n?"right-full -mr-2":"left-full -ml-2")},f.createElement("div",{className:""+(n?"pr-2":"pl-2")},f.createElement("div",{className:(n?"mr-3":"ml-3")+" p-2 dark:bg-gray-900 rounded w-48 shadow-lg"},o)))))}const ys="User",ws="Post",Ns="Comment",ks="Message",Cs="Server",$s="Folder",Ss="Channel",Us=({server:e,permissions:t})=>g.exports.useMemo((()=>e?t.map((t=>{var n;return[...null!=(n=null==e?void 0:e.permissions)?n:[]].includes(t)})):t.map((e=>!1))),[t,e]),Is=w("\n  select-none\n  w-full\n  px-2\n  h-8\n  flex\n  items-center\n  text-13\n  text-mid\n  cursor-default\n  rounded-sm\n  font-medium\n  focus:outline-none\n");function Ps({children:e}){return Fs(e)?f.createElement("div",{className:"space-y-0.5"},f.createElement("div",{className:Is},"No actions available")):f.createElement("div",{className:"space-y-0.5"},e)}const Fs=e=>!k.renderToStaticMarkup(e);function Ms({post:e,ContextMenuItem:n}){const{t:a}=C(),[r]=Us({server:null==e?void 0:e.server,permissions:[ia.ManagePosts]}),s=$()[1],[l]=function(e){const n={...Ln,...e};return t(Ka,n)}(),[o]=Wr(),i=!!e.author&&!!o&&e.author.id===o.id,c=i||r;return e?f.createElement(f.Fragment,null,f.createElement(Ps,null,i&&f.createElement(n,{label:a("post.context.edit")}),f.createElement(n,{onClick:()=>{s(`${location.origin}${e.relativeUrl}`)},label:a("post.context.copyLink")}),c&&f.createElement(n,{red:!0,onClick:()=>{l({variables:{input:{postId:e.id}},optimisticResponse:{...e,isDeleted:!0,author:null,serverUser:null}}),S.success(a("post.context.deleted"))},label:a("post.context.delete")}))):null}function Rs({user:e,server:n,role:a,isDm:r,ContextMenuItem:s}){const{t:l}=C(),[o]=Wr(),[i]=Us({server:n,permissions:[ia.ManageUsers]}),[c]=rr(),[m]=tr(),[d]=function(e){const n={...Ln,...e};return t(fr,n)}(),[u]=function(e){const n={...Ln,...e};return t(br,n)}();!function(e){const n={...Ln,...e};t(Ja,n)}(),function(e){const n={...Ln,...e};t(Xa,n)}();const[p]=function(e){const n={...Ln,...e};return t(mr,n)}(),g=Kr((e=>e.setDialogUserId)),{push:h}=U();return e?f.createElement(f.Fragment,null,f.createElement(Ps,null,f.createElement(s,{label:l("user.context.viewProfile"),onClick:()=>{g(e.id)}}),r&&f.createElement(f.Fragment,null,!!e.unreadCount&&f.createElement(s,{label:l("user.context.markRead"),onClick:()=>{m({variables:{input:{userId:e.id}}})}}),f.createElement(s,{label:l("user.context.closeDm"),onClick:()=>{c({variables:{input:{userId:e.id}}})}})),o&&e.id!==o.id?f.createElement(f.Fragment,null,!r&&f.createElement(s,{onClick:()=>h(`/dm/@${e.username}`),label:l("user.context.sendMessage")})):f.createElement(f.Fragment,null),!!n&&i&&f.createElement(f.Fragment,null,f.createElement(s,{label:"Set Role"},n.roles.map((t=>f.createElement(s,{key:t.id,checked:a&&a.id===t.id,label:f.createElement("div",{className:"flex items-center "},f.createElement("div",{className:"w-3 h-3 rounded-full mr-2.5 "+(t.color?"":"dark:bg-gray-700"),style:{backgroundColor:t.color}}),t.name),onClick:()=>{p({variables:{input:{userId:e.id,roleId:t.id}}})}})))),f.createElement(s,{label:l("user.context.kickUser",{user:e}),red:!0,onClick:()=>{u({variables:{input:{serverId:n.id,userId:e.id}}}),S.success(l("user.context.kickedUser",{user:e}))}}),f.createElement(s,{label:l("user.context.banUser",{user:e}),red:!0,onClick:()=>{const t=window.prompt(l("user.context.banPrompt"));null!==t&&(d({variables:{input:{serverId:n.id,userId:e.id,reason:t}}}),S.success(l("user.context.bannedUser",{user:e})))}})))):null}function As({message:e,server:n,ContextMenuItem:a}){var r,s;const{pathname:l}=I(),o=P(l,{path:"/group/:groupId"}),i=P(l,{path:"/dm/:username"});null==(r=null==o?void 0:o.params)||r.groupId,null==(s=null==i?void 0:i.params)||s.username;const[c]=Us({server:n,permissions:[ia.ManageMessages]});$()[1];const[m]=function(e){const n={...Ln,...e};return t(Ba,n)}();Ga(),Wa(),(e=>{const[t]=Ga(),[n]=Wa();g.exports.useCallback((()=>{const a={messageId:e.id};e.isPinned?n({variables:{input:a}}):t({variables:{input:a}})}),[e,t,n])})(e);const{t:d}=C(),[u]=Wr(),p=!!u&&e.author.id===u.id,h=(c||p)&&e.type===Vn.Normal;return p&&(e.type,Vn.Normal),f.createElement(f.Fragment,null,f.createElement(Ps,null,h&&f.createElement(a,{label:d("message.context.delete"),red:!0,onClick:()=>{m({variables:{input:{messageId:e.id}}}),S.error(d("Message deleted!"))}})))}const Ds=e=>{const[n]=function(e){const n={...Ln,...e};return t(Aa,n)}(),[a]=function(e){const n={...Ln,...e};return t(Da,n)}();return g.exports.useCallback((()=>{const t={commentId:e.id};e.isPinned?a({variables:{input:t}}):n({variables:{input:t}})}),[e,n,a])};function Ts({comment:e,post:n,ContextMenuItem:a}){const{t:r}=C(),[s]=Wr(),l=Kr((e=>e.setReplyingCommentId)),[o]=Us({server:n.server,permissions:[ia.ManageComments]});$()[1];const[i]=function(e){const n={...Ln,...e};return t(Ma,n)}();Ds(e);const c=!!e.author&&!!s&&e.author.id===s.id,m=o||c;return f.createElement(f.Fragment,null,f.createElement(Ps,null,c&&f.createElement(a,{label:r("comment.context.edit")}),!!s&&!e.isDeleted&&f.createElement(a,{onClick:()=>l(null==e?void 0:e.id),label:r("comment.context.reply")}),m&&f.createElement(a,{label:r("comment.context.delete"),red:!0,onClick:()=>{i({variables:{input:{commentId:e.id}},optimisticResponse:{...e,isDeleted:!0,text:"[deleted]",author:null,serverUser:null}}),S.success("Comment deleted!")}})))}function Ls({server:e,enableFeatured:n,openDelete:a,ContextMenuItem:r}){const{t:s}=C(),[l]=Wr(),o=F(),[i]=vr(),{push:c}=U(),{pathname:m}=I(),d=Kr((e=>e.exploreSort)),u=[{query:Rr,variables:{featured:!0,sort:d}}],[p]=function(e){const n={...Ln,...e};return t(Er,n)}({refetchQueries:u}),[g]=function(e){const n={...Ln,...e};return t(xr,n)}({refetchQueries:u});return f.createElement(f.Fragment,null,f.createElement(Ps,null,(null==l?void 0:l.isAdmin)&&f.createElement(f.Fragment,null,!!n&&f.createElement(r,{label:e.isFeatured?"Remove from Featured":"Make Featured",onClick:()=>{e.isFeatured?g({variables:{input:{serverId:e.id}}}):p({variables:{input:{serverId:e.id}}})}})),!!l&&!!e.owner&&e.owner.id!==l.id&&f.createElement(r,{label:s("server.context.leave"),red:!0,onClick:()=>{m.startsWith(`/+${e.id}`)&&c("/"),i({variables:{input:{serverId:e.id}}});const t=o.cache.readQuery({query:Ur});o.cache.writeQuery({query:Ur,data:{user:{...t.user,servers:t.user.servers.filter((t=>t.id!==e.id))}}});const n=o.cache.readFragment({fragment:$a,id:`Server:${e.id}`});o.cache.writeFragment({fragment:$a,id:`Server:${e.id}`,data:{...n,isJoined:!1}})}}),!!l&&!!e.owner&&!!a&&(l.isAdmin||e.owner.id===l.id)&&f.createElement(r,{label:"Delete Planet",red:!0,onClick:()=>a()})))}function Os({channel:e,server:t,openDelete:n,openEdit:a,ContextMenuItem:r}){const{t:s}=C(),[l]=Us({server:t,permissions:[ia.ManageChannels]});return f.createElement(f.Fragment,null,f.createElement(Ps,null,l&&f.createElement(f.Fragment,null,f.createElement(r,{label:s("channel.context.edit"),onClick:()=>{a()}}),f.createElement(r,{label:s("channel.context.delete"),red:!0,onClick:()=>{n()}}))))}function zs({folder:e,ContextMenuItem:n}){var a,r,s,l;const{t:o}=C(),[i]=Wr(),c=null!=(a=null==i?void 0:i.folders)?a:[],m=!!i&&c.filter((e=>{var t;return(null==(t=e.owner)?void 0:t.id)!==i.id})).map((e=>e.id)).includes(e.id),d="Read Later"!==e.name&&"Favorites"!==e.name,[u]=function(e){const n={...Ln,...e};return t(Ta,n)}(),[p]=function(e){const n={...Ln,...e};return t(Oa,n)}(),[g]=function(e){const n={...Ln,...e};return t(za,n)}(),[h]=function(e){const n={...Ln,...e};return t(La,n)}(),{push:v}=U(),{pathname:b}=I(),E=P(b,{path:"/:server"}),x=null==(s=null==(r=null==E?void 0:E.params)?void 0:r.server)?void 0:s.substring(1);return f.createElement(f.Fragment,null,f.createElement(Ps,null,f.createElement(n,{label:o("folder.context.copyLink")}),!!i&&(null==(l=e.owner)?void 0:l.id)!==i.id&&f.createElement(f.Fragment,null,m?f.createElement(n,{label:o("folder.context.unfollow"),onClick:()=>g({variables:{input:{folderId:e.id}}})}):f.createElement(n,{label:o("folder.context.follow"),onClick:()=>p({variables:{input:{folderId:e.id}}})})),d&&f.createElement(f.Fragment,null,f.createElement(n,{label:o("folder.context.edit")}),!x&&f.createElement(n,{label:o("folder.context.collaborative"),checked:e.isCollaborative,onClick:()=>u({variables:{input:{folderId:e.id,isCollaborative:!e.isCollaborative}}})}),f.createElement(n,{label:o("folder.context.changeVisibility")},f.createElement(n,{label:o("folder.context.visibility.public"),checked:e.visibility===jn.Public,onClick:()=>u({variables:{input:{folderId:e.id,visibility:jn.Public}}})}),f.createElement(n,{label:o("folder.context.visibility.friends"),checked:e.visibility===jn.Friends,onClick:()=>u({variables:{input:{folderId:e.id,visibility:jn.Friends}}})}),f.createElement(n,{label:o("folder.context.visibility.unlisted"),checked:e.visibility===jn.Unlisted,onClick:()=>u({variables:{input:{folderId:e.id,visibility:jn.Unlisted}}})}),f.createElement(n,{label:o("folder.context.visibility.private"),checked:e.visibility===jn.Private,onClick:()=>u({variables:{input:{folderId:e.id,visibility:jn.Private}}})})),f.createElement(n,{label:o("folder.context.delete"),red:!0,onClick:()=>{h({variables:{input:{folderId:e.id}}}),b.startsWith("/folder")?v("/"):b.startsWith(`/${x}/folder`)&&v(`/${x}`)}}))))}function qs(){return f.createElement("div",{className:"border-t dark:border-gray-800 mt-2 pb-2"})}const Hs=w("\n  p-2\n  w-48\n  dark:bg-gray-900\n  rounded\n  shadow-lg\n  outline-none\n");function _s({bindMenu:{style:e,ref:t,role:n,tabIndex:a},data:r,bindMenuItem:s,hideMenu:l,isRight:o}){const i=(c={bindMenuItem:s,hideMenu:l,isRight:o},g.exports.useCallback((({onClick:e,red:t,label:n,checked:a,children:r})=>f.createElement(xs,{item:c,onClick:e,red:t,label:n,checked:a},r)),[c]));var c;const m=$()[1],d=(null==r?void 0:r.href)?new URL(r.href):null,u=d&&d.origin===window.location.origin,p="Mac OS"===os(),h={...null!=r?r:{},ContextMenuItem:i};return f.createElement("div",{style:{...e,zIndex:999999},ref:t,role:n,tabIndex:a,className:Hs,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},!!window.getSelection().toString()&&f.createElement(f.Fragment,null,f.createElement(i,{label:f.createElement("div",{className:"flex items-center w-full"},"Copy",f.createElement("div",{className:"ml-auto"},p?"⌘+C":"Ctrl+C")),onClick:()=>document.execCommand("copy")}),f.createElement(qs,null)),(null==r?void 0:r.type)===ws&&f.createElement(Ms,{...h}),(null==r?void 0:r.type)===ys&&f.createElement(Rs,{...h}),(null==r?void 0:r.type)===ks&&f.createElement(As,{...h}),(null==r?void 0:r.type)===Ns&&f.createElement(Ts,{...h}),(null==r?void 0:r.type)===Cs&&f.createElement(Ls,{...h}),(null==r?void 0:r.type)===Ss&&f.createElement(Os,{...h}),(null==r?void 0:r.type)===$s&&f.createElement(zs,{...h}),!!(null==r?void 0:r.href)&&!u&&f.createElement(f.Fragment,null,f.createElement(qs,null),f.createElement(Ps,null,f.createElement(i,{label:"Copy Link",onClick:()=>m(r.href)}),f.createElement(i,{label:"Open Link",onClick:()=>window.open(r.href,"_blank")}))))}const Bs=g.exports.createContext({useContextTrigger:e=>[{}]});function js({children:e}){const[t,n,a,{data:r,coords:s,setVisible:l,isRight:o}]=bs();return f.createElement(f.Fragment,null,f.createElement(Bs.Provider,{value:{useContextTrigger:a}},e,f.createElement(_s,{bindMenu:t,data:r,bindMenuItem:n,hideMenu:()=>l(!1),isRight:o})))}function Gs({data:e,leftClick:t=!1,children:n,className:a}){const[r]=((e,t=!1)=>{const{useContextTrigger:n}=g.exports.useContext(Bs);return n({collect:()=>e,mouseButton:t?is:cs})})(e,t);return f.createElement("div",{className:a,...r},n)}const Vs=e=>new Promise(((t,n)=>{const a=new FileReader;a.onload=e=>t(e.target.result),a.onerror=e=>n(e),a.readAsDataURL(e)})),Ws=e=>{if(!e)return M;switch(e){case"Featured":return Z;case"Arts":return Y;case"Business":return W;case"Culture":return V;case"Discussion":return G;case"Entertainment":return j;case"Gaming":return B;case"Health":return _;case"Hobbies":return H;case"Lifestyle":return q;case"Memes":return z;case"Meta":return O;case"News":return L;case"Politics":return T;case"Programming":return D;case"Science":return Qr;case"Sports":return A;case"Technology":return Jr;case"Other":return R}},Ys=w("\n  relative\n  flex\n  items-center\n  pl-3\n  pr-10\n  text-left\n  bg-white\n  cursor-pointer\n  focus:outline-none\n  text-13\n  rounded\n  border\n  h-10\n  dark:bg-gray-800\n  dark:border-gray-700\n  border-b\n  border-t-0\n  border-r-0\n  border-l-0\n  rounded-none\n  focus:outline-none\n  transition\n  px-4\n  text-secondary\n"),Zs=w("\n  scrollbar-thin\n  dark:scrollbar-thumb-gray-750\n  dark:scrollbar-track-gray-850\n  scrollbar-thumb-rounded-md\n  absolute\n  py-1\n  mt-1\n  overflow-auto\n  text-13\n  text-secondary\n  bg-white\n  dark:bg-gray-850\n  rounded-md\n  shadow-lg\n  max-h-60\n  focus:outline-none\n  space-y-0.5\n  font-medium\n");function Ks({category:e,setCategory:t}){const n=Object.values(la),a=Ws(e);return f.createElement("div",{className:"min-w-full relative z-50"},f.createElement(K,{value:e,onChange:t},(({open:t})=>f.createElement(f.Fragment,null,f.createElement("div",{className:"relative"},f.createElement(K.Button,{className:Ys},e?f.createElement(f.Fragment,null,f.createElement(a,{className:"w-5 h-5 text-secondary"}),f.createElement("span",{className:"block truncate pl-3"},e)):f.createElement("span",{className:"block truncate text-tertiary"},"Category"),f.createElement("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},f.createElement(Q,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"}))),f.createElement(J,{show:t,as:g.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},f.createElement(K.Options,{static:!0,className:Zs},n.map((e=>f.createElement(K.Option,{key:e,className:({active:e})=>(e=>w(`\n  ${e?"dark:bg-gray-775":""}\n  cursor-pointer\n  select-none\n  relative\n  focus:outline-none\n`))(e),value:e},(({selected:t})=>f.createElement("div",{className:"flex items-center h-10 pl-3 pr-3 "+(t?"dark:bg-gray-775":"")},(()=>{const t=Ws(e);return f.createElement(t,{className:"w-5 h-5 text-secondary"})})(),f.createElement("span",{className:"block truncate pl-2"},e)))))))))))))}function Qs({isOpen:e,close:t,children:n,closeOnOverlayClick:a=!1}){return f.createElement(J,{show:e,as:g.exports.Fragment},f.createElement(X,{open:e,onClose:t,static:!0},f.createElement("div",{className:"fixed z-10 inset-0"},f.createElement("div",{className:"flex items-end justify-center min-h-screen text-center sm:block p-0"},f.createElement(J.Child,{enter:"ease-out duration-150",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0"},f.createElement(X.Overlay,{className:"fixed inset-0 transition-opacity"},f.createElement("div",{className:"absolute inset-0 bg-gray-500 dark:bg-black opacity-75"}))),f.createElement(J.Child,{enter:"ease-out transform duration-150",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in transform duration-150",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},f.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​"),f.createElement("div",{onClick:()=>{a&&t()},className:"overflow-y-auto scrollbar dark:scrollbar-thumb-gray-800 dark:scrollbar-track-transparent inline-block h-screen transform transition-all align-middle w-full"},f.createElement("div",{className:"flex min-h-full w-full items-center justify-center"},n)))))))}function Js({children:e,buttons:t,open:n,close:a,closeOnOverlayClick:r,onSubmit:s,small:l=!1,large:o=!1}){return f.createElement(Qs,{isOpen:n,close:a,closeOnOverlayClick:r},f.createElement("form",{onSubmit:s,className:`rounded-lg dark:bg-gray-800 w-full relative text-left ${l||o?"":"max-w-lg"} ${l?"max-w-sm":""} ${o?"max-w-screen-lg":""}`,onClick:e=>e.stopPropagation()},e,!!t&&f.createElement(f.Fragment,null,f.createElement("div",{className:"rounded-b-lg dark:bg-gray-750 h-9"}),f.createElement("div",{className:"absolute right-5 bottom-9 transform translate-y-1/2 flex items-center space-x-3 justify-end h-9"},(t.type===g.exports.Fragment?t.props.children:[t]).map(((e,t)=>f.createElement("div",{key:t,className:"dark:bg-gray-800 rounded"},e)))))))}function Xs({checked:e,onChange:t,children:n,green:a=!1,className:r,disabled:s}){return f.createElement(ee.Group,{as:"div",className:"flex items-center space-x-3"},n&&f.createElement(ee.Label,{className:r},n),f.createElement(ee,{disabled:s,as:"button",checked:e,onChange:t,className:(e?""+(a?"bg-green-600":"bg-blue-600"):"dark:bg-gray-500")+" relative inline-flex flex-shrink-0 h-6 transition-colors duration-200 ease-in-out border-2 border-transparent rounded-full cursor-pointer w-10 focus:outline-none focus:shadow-outline"},(({checked:e})=>f.createElement("span",{className:(e?"translate-x-4":"translate-x-0.5")+" bg-gray-100 inline-block relative translate-y-1px w-4.5 h-4.5 transition duration-200 ease-in-out transform rounded-full"},f.createElement(te,{className:`absolute inset-1/2 transform -translate-y-1/2 -translate-x-1/2 w-4 h-4 transition-opacity duration-200 ${e?"opacity-100":"opacity-0"} ${a?"text-green-600":"text-blue-600"}`}),f.createElement(ne,{className:`absolute inset-1/2 transform -translate-y-1/2 -translate-x-1/2 w-4 h-4 transition-opacity duration-200 ${e?"opacity-0":"opacity-100"} text-gray-500`})))))}const el=/^[A-Za-z0-9_]+$/i;function tl({open:e,setOpen:n,server:a}){var r,s,l,o;const[i,c]=g.exports.useState(null!=(r=null==a?void 0:a.isDownvotesEnabled)&&r),[m,{loading:d}]=function(e){const n={...Ln,...e};return t(dr,n)}({update(e,{data:{createServer:t}}){const n=e.readQuery({query:Ur});e.writeQuery({query:Ur,data:{user:{...n.user,servers:[t,...n.user.servers]}}})}}),[u,{loading:p}]=function(e){const n={...Ln,...e};return t(ur,n)}(),[h,v]=g.exports.useState(null!=(s=null==a?void 0:a.category)?s:la.Other),{handleSubmit:b,register:E,watch:y,reset:w,setValue:N,formState:{errors:k,isValid:C}}=ae({mode:"onChange"});y(((e,{type:t,value:n,name:a})=>{if("avatarFile"===a){const{avatarFile:t}=e;if(!t||!t[0])return;Vs(t[0]).then((e=>M(e)))}else if("bannerFile"===a){const{bannerFile:t}=e;if(!t||!t[0])return;Vs(t[0]).then((e=>A(e)))}}));const $=y("name"),S=y("displayName"),[I,P]=g.exports.useState(!1);g.exports.useEffect((()=>{I||null==S||N("name",S.replace(" ","_").replace(/[^A-Za-z0-9_]/i,""))}),[S]),g.exports.useEffect((()=>{$||P(!1)}),[$]);const[F,M]=g.exports.useState(null==a?void 0:a.avatarUrl),[R,A]=g.exports.useState(null==a?void 0:a.bannerUrl);g.exports.useEffect((()=>{a?(M(a.avatarUrl),A(a.bannerUrl),N("displayName",a.displayName),N("description",a.description||""),v(a.category),c(a.isDownvotesEnabled)):(w(),M(null),A(null),v(la.Other),c(!1))}),[a]);const{push:D}=U(),T=(S||"").split(" ").map((e=>e[0])).join("").toUpperCase();return f.createElement(Js,{open:e,close:()=>{n(!1)},closeOnOverlayClick:!0,onSubmit:b((({name:e,displayName:t,description:r,avatarFile:s,bannerFile:l})=>{a?u({variables:{input:{serverId:a.id,displayName:t,description:r,category:h,avatarFile:s?s[0]:null,bannerFile:l?l[0]:null,isDownvotesEnabled:i}}}).then((()=>{n(!1)})):m({variables:{input:{name:e,displayName:t,description:r,category:h,avatarFile:s?s[0]:null,bannerFile:l?l[0]:null,isDownvotesEnabled:i}}}).then((({data:{createServer:e}})=>{n(!1),D(`/+${e.name}`)}))})),buttons:a?f.createElement(x,{content:"Save Changes"},f.createElement("button",{type:"submit",className:"form-button-submit",disabled:!S||p||(null==S?void 0:S.length)<2},p?f.createElement(es,{className:"w-5 h-5 text-primary"}):f.createElement(te,{className:"w-5 h-5 text-primary"}))):f.createElement("button",{type:"submit",className:"form-button-submit",disabled:!S||!$||(null==S?void 0:S.length)<2||(null==$?void 0:$.length)<3||d||!el.test($)},d?f.createElement(es,{className:"w-5 h-5 text-primary"}):f.createElement(re,{className:"w-5 h-5 text-primary"}))},f.createElement("input",{type:"file",...E("bannerFile"),className:"hidden",id:"bannerFile",accept:"image/png,image/jpeg,image/webp,image/gif"}),f.createElement("label",{htmlFor:"bannerFile",className:"h-24 block relative rounded-t-lg group cursor-pointer bg-center bg-cover "+(R?"":"bg-gradient-to-br from-red-400 to-indigo-600"),style:R?{backgroundImage:`url(${R})`}:{}},f.createElement("div",{className:"rounded-t-lg absolute inset-0 transition bg-black opacity-0 group-hover:opacity-50 flex items-center justify-center"},f.createElement(se,{className:"w-10 h-10"}))),f.createElement("input",{type:"file",...E("avatarFile"),className:"hidden",id:"avatarFile",accept:"image/png,image/jpeg,image/webp,image/gif"}),f.createElement("label",{htmlFor:"avatarFile",className:"flex items-center justify-center cursor-pointer rounded-3xl h-24 w-24 absolute left-3 top-24 transform -translate-y-1/2 dark:bg-gray-700 shadow group bg-center bg-cover",style:F?{backgroundImage:`url(${F})`}:{}},!F&&f.createElement("div",{className:"text-tertiary text-3xl font-medium overflow-hidden"},T),f.createElement("div",{className:"absolute rounded-3xl inset-0 transition bg-black opacity-0 group-hover:opacity-50 flex items-center justify-center"},f.createElement(se,{className:"w-10 h-10"}))),f.createElement("div",{className:"pl-30 pr-5 pt-2 text-left"},f.createElement("input",{...E("displayName",{maxLength:100,required:!0}),placeholder:"Display Name",className:"form-input-lg",maxLength:100})),f.createElement("div",{className:"pb-5 space-y-3 pt-3 px-5 text-left"},f.createElement("div",null,f.createElement("div",{className:"text-sm text-accent flex items-center pt-3"},f.createElement("span",{className:"h-7 flex items-center"},"joincomet.app/+",null!=(l=null==a?void 0:a.name)?l:""),!a&&f.createElement("input",{...E("name",{pattern:el,required:!0,minLength:3,maxLength:21}),minLength:3,maxLength:21,placeholder:"Name",className:"bg-transparent h-7 w-full border-b dark:border-gray-700 focus:outline-none transition dark:focus:border-blue-500",onKeyPress:()=>P(!0)})),"pattern"===(null==(o=k.name)?void 0:o.type)&&f.createElement("div",{className:"form-error"},"Letters, numbers and underscores only")),f.createElement("textarea",{...E("description",{maxLength:500}),placeholder:"Description",className:"form-textarea",maxLength:500}),f.createElement("div",{className:"flex items-center"},f.createElement("div",{className:"text-13 font-medium text-tertiary pr-1.5"},"Category"),f.createElement(Ks,{category:h,setCategory:v})),f.createElement("div",{className:"pt-2"},f.createElement(Xs,{checked:i,onChange:()=>c(!i),green:!0},f.createElement("div",{className:"text-13 font-medium text-tertiary"},"Downvotes enabled")))))}function nl(){const[e,t]=g.exports.useState(!1),{t:n}=C();return f.createElement(f.Fragment,null,f.createElement(ls,{name:n("server.create.title"),onClick:()=>t(!0),className:"dark:bg-gray-800 bg-gray-200 hover:bg-purple-600 dark:hover:bg-purple-600"},f.createElement(Xr,{className:"w-5 h-5 text-purple-500 group-hover:text-white transition"})),f.createElement(tl,{open:e,setOpen:t}))}function al({showPassword:e,setShowPassword:t}){return f.createElement(x,{content:e?"Hide Password":"Show Password"},f.createElement("div",{className:"form-show-password-button"},e?f.createElement(le,{onClick:()=>t(!1),className:"w-5 h-5"}):f.createElement(oe,{onClick:()=>t(!0),className:"w-5 h-5"})))}function rl({count:e}){return f.createElement("div",{className:"rounded-full bg-red-500 w-4 h-4 flex items-center justify-center"},f.createElement("div",{className:"leading-none text-11 font-medium text-primary",style:{marginLeft:"-1px"}},e))}function sl({hide:e=!1}){var t;const{pathname:n}=I(),{t:a}=C(),r=Kr((e=>e.homePage)),s="/explore"!==n&&!n.startsWith("/+"),l=n.startsWith("/explore"),o="Mac OS"===os()&&window.electron,[i]=Wr(),{data:c}=Ar({variables:{featured:!0},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),m=i?i.servers:null!=(t=null==c?void 0:c.publicServers)?t:[];return f.createElement(f.Fragment,null,f.createElement("div",{className:(e?"hidden md:flex":"flex")+" h-full flex-col items-center min-w-[4.5rem] w-18 bg-white dark:bg-gray-900 overflow-y-auto scrollbar-none"},o&&f.createElement("div",{className:"h-5"}),f.createElement("div",{className:"h-full flex flex-col items-center w-full divide-y dark:divide-gray-800 divide-gray-200"},f.createElement("div",{className:"space-y-2 flex flex-col items-center py-2"},f.createElement(ls,{name:a("home"),to:""+(r?`/${r}`:"/"),active:s,className:""+(s?"bg-blue-600":"dark:bg-gray-800 bg-gray-200 hover:bg-blue-600 dark:hover:bg-blue-600")},f.createElement(ie,{className:"w-5 h-5 group-hover:text-white transition "+(s?"text-white":"text-blue-500")})),f.createElement(ls,{name:a("explore.title"),to:"/explore",active:l,className:l?"bg-green-600":"dark:bg-gray-800 bg-gray-200 hover:bg-green-600 dark:hover:bg-green-600"},f.createElement(ce,{className:"w-5 h-5 group-hover:text-white transition "+(l?"text-white":"text-green-500")})),!!i&&f.createElement(nl,null)),!!m&&m.length>0&&f.createElement("div",{className:"space-y-2 flex flex-col items-center py-2"},m.map((e=>f.createElement(ll,{server:e,key:e.id})))))))}function ll({server:e}){var t,n,a;const{pathname:r}=I(),s=P(r,{path:"/:server"}),l=null==(n=null==(t=null==s?void 0:s.params)?void 0:t.server)?void 0:n.substring(1),o=Kr((e=>e.serverPages)),[i]=Us({server:e,permissions:[ia.PrivateChannels]}),c=(null!=(a=e.channels)?a:[]).filter((e=>e.type!==On.Private||i)),m=!!c.find((e=>e.isUnread)),d=c.length>0?c.map((e=>e.mentionCount)).reduce(((e,t)=>e+t)):0,u=l===e.name,[p,h]=g.exports.useState(!1);return f.createElement(f.Fragment,null,f.createElement(ol,{open:p,setOpen:h,server:e}),f.createElement(Gs,{className:"h-12",data:{type:Cs,server:e,openDelete:()=>h(!0)}},f.createElement(ls,{to:`/+${e.name}${o[e.id]?`/${o[e.id]}`:""}`,name:e.displayName,active:u,unread:m},f.createElement(as,{server:e,size:12,className:"bg-gray-200 h-12 w-12 dark:bg-gray-800 group-hover:rounded-2xl transition-all "+(u?"rounded-2xl":"rounded-3xl")}),!!d&&f.createElement("div",{className:"absolute -bottom-1 -right-1 rounded-full border-3 dark:border-gray-900"},f.createElement(rl,{count:d})))))}function ol({open:e,setOpen:n,server:a}){const[r,s]=g.exports.useState(""),[l,o]=g.exports.useState(!1),[i,{loading:c}]=function(e){const n={...Ln,...e};return t(pr,n)}(),{push:m}=U();return f.createElement(Js,{open:e,close:()=>n(!1),closeOnOverlayClick:!0,small:!0,buttons:f.createElement(f.Fragment,null,f.createElement("button",{className:"form-button-cancel",type:"button",onClick:()=>n(!1)},"Cancel"),f.createElement("button",{className:"form-button-delete",type:"button",disabled:!r||c,onClick:()=>{i({variables:{input:{password:r,serverId:a.id}}}).then((()=>{n(!1),m("/")}))}},"Delete",c&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"})))},f.createElement("div",{className:"max-w-md w-full rounded-md dark:bg-gray-800 shadow-lg px-5 pt-5 pb-10"},f.createElement("div",{className:"text-red-400 text-lg font-semibold"},"Delete ",a.name),f.createElement("div",{className:"text-tertiary pb-3 pt-3 text-sm"},"All posts, comments, and messages will be lost. Enter your password to continue."),f.createElement("div",{className:"relative"},f.createElement("input",{id:"confirmPassword",name:"confirmPassword",className:"form-input-password",placeholder:"Password",value:r,onChange:e=>s(e.target.value),type:l?"text":"password"}),f.createElement(al,{showPassword:l,setShowPassword:o}))))}const il=w("\n  transition\n  md:transition-none\n  fixed\n  md:relative\n  md:translate-x-0\n  top-0\n  bottom-0\n  bg-gray-200\n  dark:bg-gray-800\n  transform\n  z-50\n"),cl=e=>w(`\n  left-0\n  md:rounded-tl-lg\n  ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}\n  flex\n  md:w-60\n  md:min-w-[15rem]\n  w-78\n  min-w-[19.5rem]\n`),ml=w("\n  bg-black\n  bg-opacity-75\n  md:hidden\n  fixed\n  inset-0\n  z-40\n");function dl({children:e,right:t=!1}){const[n,a,r,s]=Kr((e=>[e.showLeftSidebar,e.setShowLeftSidebar,e.showRightSidebar,e.setShowRightSidebar]));return f.createElement(f.Fragment,null,f.createElement(me,null,(t?r:n)&&f.createElement(de.div,{initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.15,ease:[.4,0,.2,1]},className:ml,onClick:()=>{t&&r?s(!1):!t&&n&&a(!1)}})),f.createElement("div",{className:`${il} ${t?(l=r,w(`\n  right-0\n  ${l?"translate-x-0":"translate-x-full"}\n  ${l?"md:block":"md:hidden"}\n  w-60\n  min-w-[15rem]\n`)):cl(n)}`},!t&&f.createElement("div",{className:"md:hidden",onClick:()=>a(!1)},f.createElement(sl,null)),f.createElement("div",{className:"relative h-full w-full scrollbar-dark overflow-y-auto",onClick:()=>{t||a(!1)}},e)));var l}const ul="Post",pl=(e,t,n)=>w(`\n  ${e&&"h-11"}\n  ${t&&"h-9"}\n  ${!e&&!t&&"h-9"}\n  group\n  rounded\n  cursor-pointer\n  flex\n  items-center\n  text-base\n  font-medium\n  px-4\n  w-full\n  ${n?"dark:hover:bg-gray-725 dark:active:bg-gray-725":"dark:hover:bg-gray-775 dark:active:bg-gray-775"}\n  text-gray-600\n  dark:text-gray-400\n  select-none\n  focus:outline-none\n  relative\n  hover:text-gray-700\n  dark:hover:text-gray-300\n`),gl=e=>w(`\n  text-gray-800\n  hover:text-gray-800\n  dark:text-gray-200\n  dark:hover:text-gray-200\n  ${e?"dark:bg-gray-700 dark:hover:bg-gray-700":"dark:bg-gray-750 dark:hover:bg-gray-750"}\n`);var hl=g.exports.forwardRef((({children:e,large:t=!1,small:n=!1,to:a,onClick:r,active:s,exact:l=!1,light:o=!1},i)=>a?f.createElement(y,{ref:i,to:a,className:`${pl(t,n,o)} ${s?gl(o):""}`,activeClassName:null!=s?"":gl(o),exact:l},e):f.createElement("button",{ref:i,onClick:r,className:`${pl(t,n,o)} ${s?gl(o):""}`,type:"button"},e)));const vl=e=>w(`\n  px-3\n  pt-4\n  pb-1\n  text-gray-500\n  dark:text-gray-500\n  uppercase\n  text-11\n  font-semibold\n  tracking-wide\n  flex\n  items-center\n  justify-between\n  select-none\n  ${e&&"hover:text-gray-600 dark:hover:text-gray-400"}\n`);function fl({children:e,plusLabel:t,onClick:n}){const a=t&&n;return f.createElement("div",{className:vl(a)},e,a&&f.createElement(x,{content:t},f.createElement("div",{onClick:n},f.createElement(ue,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 cursor-pointer"}))))}var bl=X.Title;const El=()=>Kr((e=>[e.loginDialog,e.setLoginDialog,e.createAccount,e.setCreateAccount])),xl=()=>{const e=El()[1];return()=>e(!0)};function yl({children:e,className:t,icon:n,title:a,showDivider:r=!1}){const[s]=Kr((e=>[e.setShowLeftSidebar]));return f.createElement("header",{id:"header",className:"h-12 min-h-[3rem] items-center bg-white dark:bg-gray-750 border-b dark:border-gray-800 shadow flex"},f.createElement("div",{className:"flex items-center font-semibold text-base leading-5 text-primary pl-4 pr-4 "+(r?"border-r dark:border-gray-700 mr-4":"")},f.createElement(pe,{className:"md:hidden mr-3 w-5 h-5 text-tertiary",onClick:()=>s(!0)}),f.createElement("div",{className:"text-tertiary mr-3"},n),a),f.createElement("div",{className:"flex-grow flex items-center min-w-0 pr-4"},e))}function wl({currentPage:e,setCurrentPage:t,page:n,green:a=!1,children:r}){return f.createElement("button",{onClick:()=>t(n),className:"text-base font-medium rounded px-1.5 py-0.5 cursor-pointer select-none flex flex-shrink-0 items-center focus:outline-none "+(n===e?a?"text-green-600 bg-green-900":"text-secondary dark:bg-gray-700":a?"text-secondary bg-green-600":"text-tertiary")},r||n)}function Nl(){const[e,t]=Kr((e=>[e.showRightSidebar,e.setShowRightSidebar])),{t:n}=C();return f.createElement(x,{content:n(e?"user.hideUsers":"user.showUsers")},f.createElement("div",{className:"highlightable",onClick:()=>t(!e)},f.createElement(ge,{className:"w-5 h-5"})))}function kl(){const[e,t]=Kr((e=>[e.postsSort,e.showFolders,e.liveMode]));let n;switch(C(),e){case"Hot":n=f.createElement(fe,{className:"w-5 h-5"});break;case"New":n=f.createElement(ve,{className:"w-5 h-5"});break;case"Top":n=f.createElement(he,{className:"w-5 h-5"})}return f.createElement(yl,{isRightSidebar:t,title:e,icon:n,showDivider:"Top"===e},"Top"===e&&f.createElement("div",{className:"flex items-center space-x-4"},f.createElement(Cl,{time:"Hour"}),f.createElement(Cl,{time:"Day"}),f.createElement(Cl,{time:"Week"}),f.createElement(Cl,{time:"Month"}),f.createElement(Cl,{time:"Year"}),f.createElement(Cl,{time:"All"})),f.createElement("div",{className:"ml-auto space-x-5 flex items-center"},f.createElement(Nl,null)))}function Cl({time:e}){const{t:t}=C(),[n,a]=Kr((e=>[e.postsTime,e.setPostsTime]));return f.createElement(wl,{page:e,setCurrentPage:a,currentPage:n},t(`post.feed.time.${e.toLowerCase()}`))}const $l=({serverId:e,folderId:t})=>{var a;const[r]=Wr(),[s,l,o,i]=Kr((e=>[e.postsSort,e.postsTime,e.folderSort,e.postsFeed])),[c,m]=g.exports.useState(0),d={sort:t?o:s,time:"Top"!==s||t?null:l,serverId:e,folderId:t,feed:r||"Joined"!==i?i:"Featured"},{data:u,loading:p,fetchMore:h}=function(e){const t={...Ln,...e};return n(Mr,t)}({variables:d,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),v=null==u?void 0:u.posts.hasMore,f=null!=(a=null==u?void 0:u.posts.posts)?a:[];return[f,p,()=>{v&&0!==f.length&&(h({variables:{...d,offset:20*(c+1)},updateQuery:(e,{fetchMoreResult:t})=>({posts:{hasMore:t.posts.hasMore,posts:[...e.posts.posts,...t.posts.posts]}})}),m(c+1))},v]};function Sl({children:e,render:t,className:n,placement:a="right"}){const[r,s]=g.exports.useState(!1),l=be(8);const o={name:"hideOnPopperBlur",defaultValue:!0,fn:e=>({onCreate(){e.popper.addEventListener("focusout",(t=>{e.props.hideOnPopperBlur&&t.relatedTarget&&!e.popper.contains(t.relatedTarget)&&e.hide()}))}})};return f.createElement(f.Fragment,null,f.createElement(Ee,{render:e=>f.createElement(de.div,{style:{x:l},...e,className:`hidden lg:block ${n}`},t((()=>s(!1)))),placement:a,interactive:!0,onMount:function(){s(!0),l.set(8),xe(l,0,{ease:[.4,0,.2,1],duration:.15})},visible:r,onHide:()=>s(!1),onClickOutside:()=>s(!1),plugins:[o],zIndex:9999,appendTo:document.body},f.createElement("span",{className:"leading-none",onClick:()=>s(!0)},e)))}const Ul={gray:ye.gray,red:ye.red,yellow:ye.amber,green:ye.emerald,blue:ye.blue,indigo:ye.indigo,purple:ye.violet,pink:ye.pink},Il={transparent:"transparent",current:"currentColor",black:ye.black,white:ye.white,...Ul},Pl={Red:Il.red[500],Yellow:Il.yellow[500],Green:Il.green[500],Blue:Il.blue[500],Indigo:Il.indigo[500],Purple:Il.purple[500],Pink:Il.pink[500]};var Fl=g.exports.forwardRef((({user:e,loading:t="eager",size:n=12,showOnline:a=!1,className:r="",dotClassName:s=""},l)=>f.createElement(ns,{ref:l,avatarUrl:null==e?void 0:e.avatarUrl,loading:t,className:`${r} cursor-pointer rounded-full`,size:n,style:(null==e?void 0:e.avatarUrl)?{}:{backgroundColor:Pl[null==e?void 0:e.color]}},a&&f.createElement("div",{className:`absolute bottom-0 right-0 rounded-full z-10 ${s} ${(null==e?void 0:e.isOnline)?"bg-green-500":"bg-gray-600"}`}),!(null==e?void 0:e.avatarUrl)&&f.createElement(we,{className:"text-primary w-2/3 h-2/3"}))));function Ml({user:e,role:t,children:n,placement:a="right"}){const r=Kr((e=>e.setDialogUserId));return e?f.createElement(f.Fragment,null,f.createElement(Sl,{className:"w-64",placement:a,render:n=>f.createElement("div",{className:"w-full relative rounded-md shadow-lg duration-200 transform transition z-50 w-64"},f.createElement("div",{className:"p-3 flex flex-col items-center dark:bg-gray-850 rounded-t-md"},f.createElement("div",{className:"group relative"},f.createElement(Fl,{user:e,size:20,showOnline:!0,className:"dark:bg-gray-700 cursor-pointer select-none",dotClassName:"ring-5 w-4 h-4 dark:ring-gray-850"}),f.createElement("div",{onClick:()=>{n(),r(e.id)},className:"cursor-pointer bg-black bg-opacity-50 transition rounded-full absolute whitespace-nowrap inset-0 flex items-center justify-center text-9 uppercase tracking-widest font-semibold opacity-0 group-hover:opacity-100"},"View Profile")),f.createElement("div",{className:"mt-3 text-base"},f.createElement("span",{className:"font-semibold text-primary"},e.username))),f.createElement("div",{className:"p-4 dark:bg-gray-800 rounded-b-md"},t&&f.createElement("div",null,f.createElement("div",{className:"text-11 font-semibold uppercase tracking-widest text-secondary pb-2"},"Roles"),f.createElement("div",{style:{borderColor:t.color},className:"text-xs text-secondary font-medium pl-1 py-1 pr-2 leading-none rounded-full border inline-flex items-center "+(t.color?"":"dark:border-gray-700")},f.createElement("div",{className:"w-3 h-3 rounded-full mr-1 "+(t.color?"":"dark:bg-gray-700"),style:{backgroundColor:t.color}}),t.name))))},n)):n}const Rl=/^https?:\/\/twitter\.com\/(?:#!\/)?(?:\w+)\/status(?:es)?\/(\d+)/,Al=/^https?:\/\/banned\.video\/watch\?id=((?:\w){24})/,Dl=/^https?:\/\/open\.(?:spotify\.com\/)(?:embed\/)?(track|playlist|album)\/((?:\w){22})/,Tl=/^https?:\/\/gfycat\.com\/(\w+)/,Ll=/^https?:\/\/www\.bitchute\.com\/video\/(\w+)/,Ol=/^https?:\/\/www\.youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/,zl=/^https?:\/\/youtu\.be\/([a-zA-Z0-9_-]+)/,ql=/^https?:\/\/www\.twitch\.tv\/([a-zA-Z0-9_-]+)/,Hl=/^https?:\/\/www\.twitch\.tv\/videos\/(\d+)/,_l=/^https?:\/\/clips\.twitch\.tv\/([a-zA-Z0-9_-]+)/,Bl=e=>Rl.test(e),jl=e=>Al.test(e),Gl=e=>Dl.test(e),Vl=e=>Tl.test(e),Wl=e=>Ll.test(e),Yl=e=>Ol.test(e),Zl=e=>ql.test(e),Kl=e=>Hl.test(e),Ql=e=>_l.test(e),Jl=w("aspect-h-9 aspect-w-16 relative"),Xl=w("w-full h-full");function eo({url:e}){if(Bl(e)){const t=e.match(Rl)[1];return f.createElement(Ne,{tweetId:t,options:{theme:"dark",align:"center",dnt:!0}})}if(jl(e)){const t=e.match(Al)[1];return f.createElement("div",{className:Jl},f.createElement("iframe",{src:`https://api.banned.video/embed/${t}?autoplay=false&amp;muted=false`,frameBorder:"0",allowFullScreen:!0,className:Xl}))}if(Gl(e)){const t=e.match(Dl),n=t[1],a=t[2];return f.createElement("div",{className:Jl},f.createElement("iframe",{src:`https://open.spotify.com/embed/${n}/${a}`,frameBorder:"0",allowTransparency:"true",allow:"encrypted-media",className:Xl}))}if(Vl(e)){const t=e.match(Tl)[1];return f.createElement("div",{className:Jl},f.createElement("iframe",{src:`https://gfycat.com/ifr/${t}`,frameBorder:"0",scrolling:"no",allowFullScreen:!0,className:Xl}))}if(Wl(e)){const t=e.match(Ll)[1];return f.createElement("div",{className:Jl},f.createElement("iframe",{src:`https://www.bitchute.com/embed/${t}/`,frameBorder:"0",allowFullScreen:!0,className:Xl}))}if(Yl(e)||(e=>zl.test(e))(e)){const t=Yl(e)?e.match(Ol)[1]:e.match(zl)[1];return f.createElement(ke,{videoId:t,containerClassName:"relative w-full h-0 aspect-h-9 aspect-w-16 overflow-hidden youtube",opts:{playerVars:{autoplay:1,controls:1}}})}if(Zl(e)){const t=e.match(ql)[1];return f.createElement(Ce,{channel:t,layout:"video",theme:"dark",targetClass:Jl})}if(Kl(e)){const t=e.match(Hl)[1];return f.createElement(Ce,{video:t,layout:"video",theme:"dark",targetClass:Jl})}if(Ql(e)){const t=e.match(_l)[1];return f.createElement("div",{className:Jl},f.createElement("iframe",{src:`https://clips.twitch.tv/embed?clip=${t}&parent=localhost&parent=joincomet.app`,frameBorder:"0",allowFullScreen:!0,scrolling:"no",className:Xl}))}return null}function to({image:e,width:t,height:n,rounded:a=!0}){const[r,s]=g.exports.useState(!1);return f.createElement("div",null,f.createElement("img",{onClick:()=>s(!0),src:e.smallUrl,alt:"",className:(a?"rounded":"")+" cursor-pointer max-w-full",width:t||e.smallWidth,height:n||e.smallHeight}),f.createElement(Qs,{closeOnOverlayClick:!0,close:()=>s(!1),isOpen:r},f.createElement("div",{className:"mx-auto"},f.createElement("div",{className:"text-left"},f.createElement("img",{onClick:e=>e.stopPropagation(),src:e.popupUrl,alt:"",width:e.popupWidth,height:e.popupHeight}),f.createElement("div",{className:"pt-1"},f.createElement("a",{href:e.originalUrl,className:"hover:underline cursor-pointer text-mid font-semibold text-13 focus:outline-none",target:"_blank",rel:"noreferrer noopener",onClick:e=>e.stopPropagation()},"Open original"))))))}function no({metadata:e,dark:t=!1}){var n,a,r;const[s,l]=g.exports.useState(!1),o=(i=e.url)&&(Bl(i)||jl(i)||Gl(i)||Vl(i)||Wl(i)||Yl(i)||Zl(i)||Kl(i)||Ql(i));var i;const c=null==(n=e.themeColor)?void 0:n.replaceAll(" ","").trim().toLowerCase(),m=!c||c.startsWith("rgb(255,255,255")||c.startsWith("rgba(255,255,255")||c.startsWith("#")&&![...c.substring(1)].find((e=>"f"!==e));return f.createElement("div",null,f.createElement("div",{className:`rounded inline-flex transition ${t?"dark:bg-gray-850 "+(m?"dark:border-gray-950":""):"dark:bg-gray-800 "+(m?"dark:border-gray-900":"")} pt-4 border-l-4`,style:m?{}:{borderColor:e.themeColor}},f.createElement("div",{className:"flex-grow rounded-r-md pl-4 pr-4 pb-4 flex flex-col"},f.createElement("div",{className:"max-w-[400px] space-y-3"},e.publisher&&f.createElement("div",{className:"text-xs text-secondary"},e.publisher),f.createElement("div",{className:"leading-none"},f.createElement("a",{href:e.url,rel:"noopener nofollow noreferrer",target:"_blank",className:"text-sm font-semibold text-blue-400 hover:underline"},null!=(a=e.title)?a:"No title")),e.description&&!o&&f.createElement("div",{className:"text-13 text-secondary line-clamp-9",dangerouslySetInnerHTML:{__html:null!=(r=e.description)?r:"No description"}}),(o||e.image&&"summary_large_image"===e.twitterCard)&&f.createElement("div",{className:"pt-1 "+(s?"min-w-[400px]":"")},s?f.createElement(eo,{url:e.url}):f.createElement("div",{className:"max-w-[400px] w-full relative rounded cursor-pointer",onClick:()=>{o&&l(!0)}},o?f.createElement(f.Fragment,null,f.createElement("img",{alt:"Thumbnail",src:e.image.smallUrl,className:"rounded select-none",height:e.image.smallHeight,width:e.image.smallWidth}),f.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},f.createElement("div",{className:"text-tertiary rounded-full bg-black bg-opacity-75 flex space-x-3 p-3"},f.createElement($e,{className:"w-6 h-6 cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition"}),f.createElement(Se,{onClick:t=>{t.stopPropagation(),t.preventDefault(),window.open(e.url,"_blank")},className:"w-6 h-6 cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition"})))):f.createElement(to,{image:e.image}))))),!!e.image&&"summary_large_image"!==e.twitterCard&&!o&&f.createElement("div",{className:"pr-4"},f.createElement(to,{width:80,height:80,image:e.image}))))}var ao=g.exports.memo((function({post:e,isPostPage:n=!1,showServerName:a=!1,className:r="",index:s}){var l,o,i,c,m;const{push:d}=U(),[u]=function(e){const n={...Ln,...e};return t(Qa,n)}(),[{opacity:p},h]=Ue({type:ul,item:e,collect:e=>({opacity:e.isDragging()?.4:1})}),v=Ie().getMonitor().isDragging(),[E,x]=g.exports.useState(!1);g.exports.useEffect((()=>{if(!v){const e=setTimeout((()=>x(!1)),300);return()=>clearTimeout(e)}x(!0)}),[v]);const y=g.exports.useMemo((()=>{var t,n;return e.text||!(e.text||e.linkUrl||e.images&&0!==e.images.length)?"text post":e.linkUrl?e.domain:1===(null==(t=e.images)?void 0:t.length)?"image post":(null==(n=e.images)?void 0:n.length)>1?"image album":void 0}),[e.domain,e.images,e.linkUrl,e.text]),[w,k]=g.exports.useState(0),[C]=Wr(),$=xl();return f.createElement(Gs,{data:{type:ws,post:e}},f.createElement("div",{style:{opacity:p},className:`${r} cursor-pointer relative group hover:shadow dark:bg-gray-800 dark:hover:bg-gray-825 px-2 py-3 md:rounded flex`,onClick:()=>{E||d(e.relativeUrl)}},f.createElement("div",{className:"flex flex-col items-center pr-2"},f.createElement("button",{type:"button",className:"focus:outline-none p-1 rounded-full dark:hover:bg-gray-750 transition cursor-pointer "+(e.voteType===ma.Up?"text-red-400":"text-mid"),onClick:t=>{if(t.stopPropagation(),t.preventDefault(),!C)return void $();let n=e.voteCount;e.voteType===ma.Up?n--:e.voteType===ma.None?n++:e.voteType===ma.Down&&(n+=2),u({variables:{input:{postId:e.id,type:e.voteType===ma.Up?ma.None:ma.Up}},optimisticResponse:{...e,voteType:e.voteType===ma.Up?ma.None:ma.Up,voteCount:n}})}},f.createElement(Pe,{className:"w-5 h-5"})),f.createElement("div",{className:`text-13 leading-none font-semibold ${e.voteType===ma.Up?"text-red-400":""} ${e.voteType===ma.Down?"text-blue-400":""} ${e.voteType===ma.None?"text-tertiary":""}`},e.voteCount<0?0:e.voteCount),e.server.isDownvotesEnabled&&f.createElement("button",{type:"button",className:"focus:outline-none p-1 rounded-full dark:hover:bg-gray-750 transition cursor-pointer "+(e.voteType===ma.Down?"text-blue-400":"text-mid"),onClick:t=>{if(t.stopPropagation(),t.preventDefault(),!C)return void $();let n=e.voteCount;e.voteType===ma.Down?n++:e.voteType===ma.None?n--:e.voteType===ma.Up&&(n-=2),u({variables:{input:{postId:e.id,type:e.voteType===ma.Down?ma.None:ma.Down}},optimisticResponse:{...e,voteType:e.voteType===ma.Down?ma.None:ma.Down,voteCount:n}})}},f.createElement(Q,{className:"w-5 h-5"}))),!n&&f.createElement("div",{className:"w-26 min-w-[6.5rem] h-18 min-h-[4.5rem] rounded dark:bg-gray-750 mr-4 flex items-center justify-center bg-center bg-cover bg-no-repeat",style:e.thumbnailUrl?{backgroundImage:`url(${e.thumbnailUrl})`}:{}},!e.thumbnailUrl&&f.createElement(f.Fragment,null,e.linkUrl?f.createElement(Fe,{className:"w-8 h-8 text-mid"}):f.createElement(Me,{className:"w-8 h-8 text-mid"}))),f.createElement("div",{className:"pr-4 flex-grow flex flex-col"},f.createElement("div",{className:"flex flex-wrap items-center pb-1.5",onClick:e=>{e.stopPropagation(),e.preventDefault()}},f.createElement(b,{to:`/+${e.server.name}`,className:"flex items-center"},f.createElement(as,{server:e.server,size:5,className:"dark:bg-gray-750 rounded-full"}),f.createElement("span",{className:"ml-1.5 text-xs font-medium text-secondary"},e.server.displayName)),f.createElement("span",{className:"text-xs text-tertiary"}," · ",Re(new Date(e.createdAt))," ago by"),f.createElement(Gs,{data:{type:ys,user:e.author}},f.createElement(Ml,{user:e.author,role:null==(l=e.serverUser)?void 0:l.role},f.createElement("div",{className:"ml-1 cursor-pointer text-tertiary text-xs font-medium leading-none",style:{color:null==(i=null==(o=e.serverUser)?void 0:o.role)?void 0:i.color}},null!=(m=null==(c=e.author)?void 0:c.username)?m:"[deleted]"))),f.createElement("div",{className:"text-xs text-mid font-medium"}," · ",f.createElement("span",{className:"text-xs text-mid"},"(",y,")"))),f.createElement("div",{className:"text-secondary font-medium text-base"},e.title),n&&y&&(!!e.text||!!e.linkUrl||!!e.images.length)&&f.createElement("div",{className:"mt-0.5 pb-2"},!!e.text&&f.createElement("div",{dangerouslySetInnerHTML:{__html:e.text},className:"prose prose-sm dark:prose-dark max-w-none pt-0.5"}),!!e.linkUrl&&f.createElement(f.Fragment,null,e.linkMetadata?f.createElement("div",{className:"max-w-screen-sm w-full mt-2"},f.createElement(no,{dark:!0,metadata:e.linkMetadata})):f.createElement("a",{href:e.linkUrl,target:"_blank",rel:"noopener nofollow noreferrer",className:"text-sm text-blue-400 hover:underline cursor-pointer pt-0.5"},e.linkUrl)),!!e.images.length&&f.createElement("div",{className:"mt-2 max-w-[400px]"},f.createElement("div",{className:"flex relative"},f.createElement("div",{className:"w-full h-[300px] relative flex items-center justify-center dark:bg-gray-775"},e.images.map(((e,t)=>f.createElement("div",{key:t,className:"select-none "+(t===w?"block":"hidden")},f.createElement(to,{rounded:!1,image:e.image,key:t}))))),e.images.length>1&&f.createElement(f.Fragment,null,w>0&&f.createElement("div",{onClick:()=>k(w-1),className:"absolute left-3 top-1/2 transform -translate-y-1/2 rounded-full shadow flex items-center justify-center w-10 h-10 dark:bg-white"},f.createElement(Ae,{className:"w-5 h-5 dark:text-black"})),w<e.images.length-1&&f.createElement("div",{onClick:()=>k(w+1),className:"absolute right-3 top-1/2 transform -translate-y-1/2 rounded-full shadow flex items-center justify-center w-10 h-10 dark:bg-white"},f.createElement(N,{className:"w-5 h-5 dark:text-black"})))),!!e.images.find((e=>e.caption||e.linkUrl))&&f.createElement("div",{className:"h-12 dark:bg-gray-750 flex items-center px-5 text-sm select-none"},e.images[w].caption&&f.createElement("div",{className:"text-primary truncate pr-3",title:e.images[w].caption},e.images[w].caption),e.images[w].linkUrl&&f.createElement("a",{href:e.images[w].linkUrl,target:"_blank",rel:"noopener nofollow noreferrer",className:"ml-auto text-blue-400 hover:underline cursor-pointer"},e.images[w].linkUrl)))),f.createElement("div",{className:"flex items-center pt-1.5"},f.createElement("div",{className:"select-none text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 flex items-center cursor-pointer"},f.createElement(G,{className:"w-5 h-5"}),f.createElement("div",{className:"ml-2 text-xs font-medium"},e.commentCount)),f.createElement(Gs,{data:{type:ws,post:e},leftClick:!0},f.createElement("div",{className:"ml-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 flex items-center cursor-pointer"},f.createElement(De,{className:"text-disabled w-4 h-4"})))))))}));function ro({folderId:e,serverId:t,showServerName:n,header:a}){const r=g.exports.useRef(null),[s,l,o,i]=$l({folderId:e,serverId:t}),c=g.exports.useCallback(((e,t)=>{const a=e[t];return a?f.createElement("div",{className:"md:px-4 pb-1.5 px-0"},f.createElement(ao,{post:a,showServerName:n,index:t})):f.createElement("div",{style:{height:"1px"}})}),[n]);return f.createElement(f.Fragment,null,f.createElement(Te,{className:"scrollbar-custom dark:bg-gray-750",components:{Header:a?()=>a:null,Footer:()=>i?f.createElement("div",{className:"flex items-center justify-center h-20"},f.createElement(es,null)):f.createElement(Yr,null)},endReached:()=>{!l&&i&&o()},itemContent:e=>c(s,e),overscan:100,ref:r,style:{overflowX:"hidden"},totalCount:(null==s?void 0:s.length)||0}))}const so=e=>{const t=Kr((e=>e.setHomePage));g.exports.useEffect((()=>t(e)))};function lo({children:e,header:t,rightSidebar:n,leftSidebar:a}){return f.createElement("div",{className:"flex flex-grow"},a,f.createElement("div",{className:"flex flex-col flex-grow"},t,f.createElement("div",{className:"flex flex-col flex-grow",style:{maxHeight:t?"calc(100% - 3rem)":"100%"}},e)),n)}const oo=/(https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*))[\s\n]$/gi,io=/(?:\()https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/()]*)(?:\))[\s\n]$/gi;function co(e,t,n){const a=_e(e,t,n);return new Oe(e,((e,t,n,r)=>{const s=a.handler(e,t,n,r);return s&&s.insertText(t[0].slice(-1),r),s}))}var mo=Le.extend({addProseMirrorPlugins(){const e=[co(oo,this.type,(e=>({href:e[1]}))),co(io,this.type,(e=>({href:e[1]})))],t=ze({rules:e}),n=t.props.handleTextInput;return t.props.handleKeyDown=(e,t)=>{if("Enter"!==t.key)return!1;const{$cursor:a}=e.state.selection;return!!a&&n(e,a.pos,a.pos,"\n")},[t,new qe({key:new He("handlePaste"),props:{handlePaste:()=>!0}})]}});const uo=Be.create({name:"spoiler",inclusive:!1,defaultOptions:{HTMLAttributes:{"data-spoiler":""}},addAttributes:()=>({"data-spoiler":{default:""}}),parseHTML:()=>[{tag:"span[data-spoiler]"}],renderHTML({HTMLAttributes:e}){return["span",je(this.options.HTMLAttributes,e),0]},addCommands:()=>({setSpoiler:e=>({commands:t})=>t.setMark("spoiler",e),toggleSpoiler:e=>({commands:t})=>t.toggleMark("spoiler",e),unsetSpoiler:()=>({commands:e})=>e.unsetMark("spoiler")})});function po({text:e,setText:t}){var n;const a=Ge({extensions:[Ve.configure({heading:{levels:[2,3]}}),mo,We,uo],content:e,editorProps:{attributes:{class:"prose prose-sm dark:prose-dark focus:outline-none max-w-none min-h-[7.5rem] p-4"}}}),r=null!=(n=null==a?void 0:a.getHTML())?n:"";g.exports.useEffect((()=>{t("<p></p>"===r?"":r)}),[a,r,t]);const s=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/i,l=g.exports.useCallback((e=>{var t;const n=null==(t=e.clipboardData)?void 0:t.getData("text/plain");n&&(s.test(n)?null==a||a.commands.insertContent(`<a href="${n}" target="_blank" rel="noopener noreferrer nofollow">${n}</a>`):null==a||a.commands.insertContent(n),null==a||a.commands.focus())}),[a]);return g.exports.useEffect((()=>(document.body.addEventListener("paste",l),()=>{document.body.removeEventListener("paste",l)})),[l]),f.createElement("div",{className:"dark:bg-gray-750 rounded"},f.createElement(bo,{editor:a}),f.createElement(Ye,{editor:a}))}const go=e=>w(`\n  p-1\n  rounded\n  dark:hover:bg-gray-600\n  cursor-pointer\n  ${e?"dark:bg-gray-600 dark:text-gray-300":"text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}\n`);function ho({label:e,icon:t,small:n,onClick:a,active:r}){const s=t;return f.createElement(x,{content:e},f.createElement("div",{className:"h-9 flex items-center",onClick:a},f.createElement("div",{className:go(r)},f.createElement(s,{className:""+(n?"w-4 h-4 mt-0.5":"w-5 h-5")}))))}const vo=w("\n  flex\n  items-center\n  px-2\n  h-full\n  space-x-0.5\n");function fo({children:e}){return f.createElement("div",{className:vo},e)}function bo({editor:e}){return e?f.createElement("div",{className:"min-h-[2.25rem] border-b dark:border-gray-700 flex flex-wrap items-center divide-x dark:divide-gray-700"},f.createElement(fo,null,f.createElement(ho,{label:"Bold (Ctrl+B)",icon:Ze,onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold")}),f.createElement(ho,{label:"Italic (Ctrl+U)",icon:Ke,onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic")}),f.createElement(ho,{label:"Underline (Ctrl+I)",icon:Qe,onClick:()=>e.chain().focus().toggleUnderline().run(),active:e.isActive("underline")}),f.createElement(ho,{label:"Strikethrough",icon:Je,onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike")})),f.createElement(fo,null,f.createElement(ho,{label:"Spoiler",icon:Xe,onClick:()=>e.chain().focus().toggleSpoiler().run(),active:e.isActive("spoiler")}),f.createElement(ho,{label:"Inline Code",icon:D,onClick:()=>e.chain().focus().toggleCode().run(),active:e.isActive("code")})),f.createElement(fo,null,f.createElement(ho,{label:"Link",icon:et,onClick:()=>{const t=window.prompt("URL");e.chain().focus().setLink({href:t}).run()},active:e.isActive("link")}),e.isActive("link")&&f.createElement(ho,{label:"Remove Link",icon:tt,onClick:()=>{e.chain().focus().unsetLink().run()}}),f.createElement(ho,{label:"Divider",icon:nt,onClick:()=>e.chain().focus().setHorizontalRule().run()})),f.createElement(fo,null,f.createElement(ho,{label:"Bulleted List",icon:at,onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList")}),f.createElement(ho,{label:"Numbered List",icon:rt,onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList")})),f.createElement(fo,null,f.createElement(ho,{label:"Large Heading (Ctrl+[)",icon:st,onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2})}),f.createElement(ho,{label:"Small Heading (Ctrl+])",icon:st,small:!0,onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3})})),f.createElement(fo,null,f.createElement(ho,{label:"Block Quote",icon:lt,onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote")}),f.createElement(ho,{label:"Code Block",icon:ot,onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock")})),f.createElement(fo,null,f.createElement(ho,{label:"Emoji",icon:z}))):null}const Eo=w("\n  relative\n  w-full\n  h-12\n  flex\n  items-center\n  pl-5\n  pr-10\n  text-left\n  bg-white\n  dark:bg-gray-800\n  dark:hover:bg-gray-775\n  cursor-pointer\n  focus:outline-none\n  text-sm\n  rounded-none\n  rounded-tl-xl\n"),xo=w("\n  scrollbar-dark\n  absolute\n  w-full\n  py-1\n  mt-1\n  overflow-auto\n  text-sm\n  text-primary\n  bg-white\n  dark:bg-gray-775\n  rounded-md\n  shadow-lg\n  max-h-60\n  focus:outline-none\n  space-y-0.5\n");function yo({servers:e=[],server:t,setServer:n}){return f.createElement("div",{className:"col-span-1 z-10"},f.createElement(K,{value:t,onChange:n},(({open:n})=>f.createElement(f.Fragment,null,f.createElement("div",{className:"relative"},f.createElement(K.Button,{className:Eo},t?f.createElement(f.Fragment,null,f.createElement(as,{server:t,className:"dark:bg-gray-750 rounded-full",size:7}),f.createElement("span",{className:"block truncate pl-2"},t.name)):f.createElement("span",{className:"block truncate text-red-400"},"Select a planet"),f.createElement("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},f.createElement(Q,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"}))),f.createElement(J,{show:n,as:g.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},f.createElement(K.Options,{static:!0,className:xo},e.map((e=>f.createElement(K.Option,{key:e.id,className:({active:e})=>(e=>w(`\n  ${e?"dark:bg-gray-750":""}\n  cursor-pointer\n  select-none\n  relative\n  focus:outline-none\n`))(e),value:e},(({selected:t})=>f.createElement("div",{className:"flex items-center h-10 pl-5 pr-4 "+(t?"dark:bg-gray-750":"")},f.createElement(as,{server:e,size:7,className:"dark:bg-gray-725 rounded-full"}),f.createElement("span",{className:(t?"font-semibold":"font-normal")+" block truncate pl-2"},e.name)))))))))))))}const wo=(e,t)=>{const n=g.exports.useRef(e);g.exports.useEffect((()=>{n.current=e}),null!=t?t:[e]);return g.exports.useCallback(((...e)=>{var t;null==(t=n.current)||t.call(n,...e)}),[])};var No=g.exports.forwardRef((({onChange:e,onInput:t,onBlur:n,onKeyPress:a,onKeyDown:r,onPaste:s,...l},o)=>{const i=wo(e),c=wo(t),m=wo(n),d=wo(a),u=wo(r),p=wo(s);return f.createElement(it,{...l,ref:o,onChange:i,onInput:c,onBlur:m,onKeyPress:d,onKeyDown:u,onPaste:p})}));const ko=w("\n  block\n  text-11\n  pb-1.5\n  font-semibold\n  tracking-widest\n  uppercase\n  text-tertiary\n"),Co=w("\n  text-base\n  text-primary\n  disabled:opacity-50\n  bg-green-600\n  rounded\n  px-5\n  h-9\n  flex\n  items-center\n  disabled:cursor-not-allowed\n  focus:outline-none\n  select-none\n"),$o=w("\n  text-base\n  text-tertiary\n  focus:outline-none\n  px-2\n  h-9\n  flex\n  items-center\n  select-none\n"),So=e=>w(`\n  px-5\n  h-12\n  border-b-2\n  dark:hover:bg-gray-775\n  ${e?"dark:border-gray-100 text-primary dark:bg-gray-775":"border-transparent text-tertiary"}\n  flex\n  items-center\n  justify-center\n  select-none\n  cursor-pointer\n  text-sm\n  last:rounded-tr-xl\n`),Uo=w("\n  px-4\n  h-10\n  placeholder-tertiary\n  dark:bg-gray-750\n  rounded\n  text-sm\n  text-primary\n  w-full\n  focus:outline-none\n"),Io="Text",Po="Link",Fo="Image";function Mo({open:e,setOpen:a,serverId:r}){var s,l,o,i,c,m,d,u,p,h;const[v,b]=g.exports.useState(""),[E,{loading:x}]=function(e){const n={...Ln,...e};return t(Za,n)}(),{t:y}=C(),{push:w}=U(),[N]=Wr(),k=null!=(s=null==N?void 0:N.servers)?s:[],[$,S]=g.exports.useState(r?null==k?void 0:k.find((e=>e.id===r)):null),[I,P]=g.exports.useState(Io),{register:F,handleSubmit:M,reset:R,formState:A,watch:D,setValue:T,trigger:L}=ae({mode:"onChange"}),O=D("linkUrl"),[z,q]=g.exports.useState("");ct((()=>{q(O)}),500,[O]);const H=D("title"),{data:_,loading:B}=function(e){const t={...Ln,...e};return n(Ir,t)}({variables:{linkUrl:z},skip:!z||!mt(z)}),j=null==_?void 0:_.getLinkMeta,[G,V]=g.exports.useState([]);function W(e){return new Promise((function(t,n){let a=new FileReader;a.onload=function(){t(a.result)},a.onerror=function(){n(a)},a.readAsDataURL(e)}))}const[Y,Z]=g.exports.useState(0),K=()=>{a(!1),setTimeout((()=>{Z(0),V([]),P(Io),R()}),300)};return f.createElement(Qs,{isOpen:e,close:K},f.createElement("form",{onSubmit:M((({title:e,linkUrl:t})=>{E({variables:{input:{title:e,text:v&&I===Io?v:null,linkUrl:t&&I===Po?t:null,serverId:$.id,images:G&&G.length>0&&I===Fo?G.map((({file:e,caption:t,linkUrl:n})=>({file:e,caption:t,linkUrl:n}))):null}}}).then((({data:e})=>{const t=null==e?void 0:e.createPost;t&&(a(!1),R(),w(t.relativeUrl))}))})),className:"max-w-screen-md w-full dark:bg-gray-800 text-left rounded-xl"},f.createElement("div",{className:"grid grid-cols-4"},f.createElement(yo,{servers:k,server:$,setServer:S}),f.createElement("div",{className:So(I===Io),onClick:()=>{P(Io),T("linkUrl",""),V([])}},f.createElement(Me,{className:"mr-2 w-5 h-5"}),"Text"),f.createElement("div",{className:So(I===Po),onClick:()=>{P(Po),b(""),V([])}},f.createElement(dt,{className:"mr-2 w-5 h-5"}),"Link"),f.createElement("div",{className:So(I===Fo),onClick:()=>{P(Fo),T("linkUrl",""),L("linkUrl"),b("")}},f.createElement(ut,{className:"mr-2 w-5 h-5"}),"Images")),f.createElement("div",{className:"p-5"},f.createElement("div",{className:"relative"},f.createElement("label",{htmlFor:"title",className:ko},"Title",(null==H?void 0:H.length)>0&&` (${null==H?void 0:H.length}/300)`),f.createElement("input",{maxLength:300,className:Uo,...F("title",{required:!0}),id:"title"})),I===Io&&f.createElement("div",{className:"pt-5"},f.createElement(po,{text:v,setText:b})),I===Po&&f.createElement(f.Fragment,null,f.createElement("div",{className:"pb-5 pt-1.5"},(null==j?void 0:j.title)&&H!==(null==j?void 0:j.title)&&f.createElement("span",{className:"text-xs text-blue-500 hover:underline cursor-pointer line-clamp-1",onClick:()=>{T("title",null==j?void 0:j.title),L("title")}},null==j?void 0:j.title)),f.createElement("label",{htmlFor:"linkUrl",className:"block text-11 pb-1.5 font-semibold tracking-widest uppercase text-tertiary"},"Link URL"),f.createElement("div",{className:"relative h-10"},f.createElement(dt,{className:"top-1/2 left-2.5 transform -translate-y-1/2 absolute w-5 h-5 text-mid"}),f.createElement("input",{maxLength:2e3,className:"px-10 h-10 dark:bg-gray-750 rounded text-sm text-primary w-full focus:outline-none",...F("linkUrl",{validate:e=>!e||mt(e)}),id:"linkUrl"}),B&&f.createElement("div",{className:"top-1/2 right-2.5 transform -translate-y-1/2 absolute"},f.createElement(es,null))),O&&!mt(O)&&f.createElement("div",{className:"text-13 text-red-400 pt-1"},"Must be a valid URL"),z&&mt(z)&&!!j&&f.createElement("div",{className:"mt-5"},f.createElement(no,{dark:!0,metadata:j}))),I===Fo&&f.createElement("div",{className:"mt-5"},G&&G.length>0?f.createElement("div",null,f.createElement("div",{className:"flex"},f.createElement("div",{className:"flex scrollbar-custom items-center space-x-3 overflow-x-auto border dark:border-gray-700 rounded-md h-31 px-3 max-w-full w-full"},G.map(((e,t)=>f.createElement("div",{key:t,onClick:()=>Z(t),className:"cursor-pointer group relative rounded border "+(Y===t?"dark:border-gray-500":"dark:border-transparent")},f.createElement("div",{className:"max-w-25 max-h-25 min-w-[6.25rem] min-h-[6.25rem] transform "+(Y===t?"scale-85":"")},f.createElement("div",{className:"absolute top-1 right-1 rounded-full bg-black p-0.5 hidden group-hover:block z-10",onClick:()=>{Y>=t&&Y>0&&setImmediate((()=>Z(Y-1)));const e=G.slice();e.splice(t,1),V(e)}},f.createElement(ne,{className:"w-4.5 h-4.5 text-white"})),f.createElement("div",{className:"absolute inset-0 bg-black rounded bg-opacity-0 group-hover:bg-opacity-50"}),f.createElement("div",{style:{backgroundImage:`url(${e.data})`},className:"max-w-25 max-h-25 min-w-[6.25rem] min-h-[6.25rem] bg-cover bg-center select-none rounded"}))))),f.createElement("div",{className:"w-25 h-25 rounded relative flex items-center justify-center border dark:border-gray-700 border-dashed cursor-pointer transition dark:hover:bg-gray-775"},f.createElement("input",{type:"file",id:"file",accept:"image/png,image/jpeg,image/webp,image/gif",hidden:!0,multiple:!0,onChange:e=>{const t=e.target.files;if(t&&t.length>0){V([...G,...Array.from(t).map((e=>({file:e,caption:"",linkUrl:""})))]);let e=[];for(let n=0;n<t.length;n++)e.push(W(t[n]));Promise.all(e).then((e=>{V([...G,...e.map(((e,n)=>({file:t[n],caption:"",linkUrl:"",data:e})))])}))}}}),f.createElement("label",{htmlFor:"file",className:"absolute inset-0 block cursor-pointer"}),f.createElement(ue,{className:"w-1/2 h-1/2 text-tertiary"})))),G&&(null==G?void 0:G.length)>0&&f.createElement("div",{className:"mt-5 flex space-x-5"},f.createElement("div",{className:"w-81 h-81 bg-contain bg-center bg-no-repeat dark:bg-gray-775 flex-shrink-0",style:{backgroundImage:`url(${null==(l=G[Y])?void 0:l.data})`}}),f.createElement("div",{className:"space-y-5 max-w-full flex-grow"},f.createElement("div",null,f.createElement("label",{htmlFor:"caption",className:ko},"Caption",(null==(i=null==(o=G[Y])?void 0:o.caption)?void 0:i.length)>0&&` (${null==(m=null==(c=G[Y])?void 0:c.caption)?void 0:m.length}/180)`),f.createElement(No,{id:"caption",className:"px-4 py-2.5 min-h-[2.5rem] dark:bg-gray-750 rounded text-sm text-primary focus:outline-none break-word",html:(null==(d=G[Y])?void 0:d.caption)||"",onChange:e=>{var t,n;if((null==(n=null==(t=G[Y])?void 0:t.caption)?void 0:n.length)>=180)return;const a=G.slice();let r=e.target.value;r.length>180&&(r=r.substring(0,181)),a[Y].caption=r,V(a)}})),f.createElement("div",null,f.createElement("label",{htmlFor:"link",className:ko},"Link"),f.createElement("input",{id:"link",className:Uo,value:(null==(u=G[Y])?void 0:u.linkUrl)||"",onChange:e=>{const t=G.slice();t[Y].linkUrl=e.target.value,V(t)}}),(null==(p=G[Y])?void 0:p.linkUrl)&&!mt(null==(h=G[Y])?void 0:h.linkUrl)&&f.createElement("div",{className:"text-13 text-red-400 pt-1"},"Must be a valid URL"))))):f.createElement("div",{className:"relative"},f.createElement("input",{type:"file",id:"files",accept:"image/png,image/jpeg,image/webp,image/gif",hidden:!0,multiple:!0,onChange:e=>{const t=e.target.files;if(t&&t.length>0){V(Array.from(t).map((e=>({file:e,caption:"",linkUrl:""}))));let e=[];for(let n=0;n<t.length;n++)e.push(W(t[n]));Promise.all(e).then((e=>V(e.map(((e,n)=>({file:t[n],caption:"",linkUrl:"",data:e}))))))}}}),f.createElement("label",{htmlFor:"files",className:"select-none cursor-pointer flex items-center justify-center text-base text-tertiary h-30 border border-dashed dark:border-gray-700 rounded-md transition dark:hover:bg-gray-775"},"Drag 'n' drop some images here, or click to select images"))),f.createElement("div",{className:"flex items-center pt-5"},f.createElement("div",{className:"ml-auto flex items-center space-x-3"},f.createElement("button",{type:"button",className:$o,onClick:()=>K()},y("post.create.cancel")),f.createElement("button",{type:"submit",className:Co,disabled:!A.isValid||!$||x},y("post.create.submit"),x&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"})))))))}function Ro({server:e}){const{t:t}=C(),[n,a]=g.exports.useState(!1),[r]=Wr();return f.createElement(f.Fragment,null,f.createElement(Mo,{open:n,setOpen:a,serverId:null==e?void 0:e.id}),f.createElement("div",{className:"p-4"},f.createElement("div",{onClick:()=>a(!0),className:"dark:bg-gray-700 h-13 flex items-center rounded transition dark:hover:bg-gray-650 cursor-pointer"},f.createElement("div",{className:"px-3 border-r dark:border-gray-650 h-7"},f.createElement(Fl,{user:r,size:7})),f.createElement("div",{className:"text-sm text-secondary px-3"},t("post.createPost")))))}const Ao=()=>"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window,Do=({onClick:e,title:t,body:n,icon:a,timestamp:r})=>{if(!Ao())return;if("granted"!==Notification.permission)return;new Notification(t,{body:n,icon:a,timestamp:r,silent:!0}).onclick=e;const s=new Audio((window.electron?".":"")+"/notification.mp3");s.volume=.5,s.play()},To=w("\n  cursor-pointer\n  hover:underline\n"),Lo="bc1q85hzedw8wr29ylyh329z9e5dhz4yuqnc2830wc",Oo="0x119b5129D730156017a69BD21e2ce774143C845b";function zo(){const e=$()[1];return f.createElement(dl,{right:!0},f.createElement("div",{className:"px-2.5 py-2.5 flex flex-col"},f.createElement("div",{className:"mt-auto"}),f.createElement("div",{className:"dark:border-gray-750 border rounded p-2.5 text-xs text-tertiary leading-5"},f.createElement("div",{className:"space-x-3"},f.createElement(b,{to:"/help/terms",target:"_blank",className:To},"Terms"),f.createElement(b,{to:"/help/privacy",target:"_blank",className:To},"Privacy Policy"),f.createElement(b,{to:"/help/content",target:"_blank",className:To},"Content Policy"),f.createElement("a",{href:"https://github.com/joincomet/comet",target:"_blank",rel:"noopener noreferrer",className:To},"GitHub"),f.createElement("a",{href:"https://discord.gg/NPCMGSm",target:"_blank",rel:"noopener noreferrer",className:To},"Discord")),f.createElement("div",{className:"pt-1.5"},"© ",(new Date).getFullYear()," CometX, LLC")),f.createElement("div",{className:"space-y-0.5 text-xs text-tertiary leading-5 pt-1.5 break-all"},f.createElement("div",null,"Donations appreciated!"),f.createElement(x,{content:"Click to copy"},f.createElement("div",{className:"cursor-pointer",onClick:()=>{e(Lo),S.success("BTC donation address copied!")}},f.createElement("span",{className:"select-none"},"BTC: "),f.createElement("span",{className:"highlightable"},Lo))),f.createElement(x,{content:"Click to copy"},f.createElement("div",{className:"cursor-pointer",onClick:()=>{e(Oo),S.success("ETH/BSC/MATIC donation address copied!")}},f.createElement("span",{className:"select-none"},"ETH/BSC/MATIC: "),f.createElement("span",{className:"highlightable"},Oo))))))}function qo(){C(),Kr((e=>e.showFolders));const[e]=Wr(),t=g.exports.useRef(null);return so(null),g.exports.useEffect((()=>{Ao()&&"default"===Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&Do({title:"Notifications enabled!",icon:"/icons/icon.png"})}))}),[]),f.createElement(f.Fragment,null,f.createElement(pt,null,f.createElement("title",null,"Home – Comet")),f.createElement(lo,{header:f.createElement(kl,{refreshPosts:()=>{t&&t.current&&t.current.refresh()}}),rightSidebar:f.createElement(zo,null)},f.createElement(ro,{showServerName:!0,header:e?f.createElement(Ro,null):null})))}function Ho({className:e}){return f.createElement("svg",{className:e,version:"1.1",viewBox:"0 0 6.3938 6.3938",xmlns:"http://www.w3.org/2000/svg"},f.createElement("defs",null,f.createElement("linearGradient",{id:"linearGradient971",x1:"7.7677",x2:"14.802",y1:"5.3857",y2:"5.3857",gradientTransform:"rotate(32 322.69 255.38)",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#6875f5",offset:"0"}),f.createElement("stop",{stopColor:"#f98080",offset:"1"}))),f.createElement("g",{transform:"translate(-188.06 124.29)"},f.createElement("path",{d:"m192.01-123.61a2.4814 2.526 32 0 0-0.37414 0.0274 1.9313 1.966 32 0 1 0.33022 2.4892 1.9313 1.966 32 0 1-2.3823 0.7953 2.4814 2.526 32 0 0 1.0387 1.3436 2.4814 2.526 32 0 0 3.4427-0.82683 2.4814 2.526 32 0 0-0.76584-3.4572 2.4814 2.526 32 0 0-1.2893-0.37155zm-3.9109 0.15503c-0.20116-0.0233 0.37961 0.32545 2.1063 2.4024 0.31374 0.37744 0.9773 0.0996 1.2604-0.35346 0.28309-0.45304 0.24162-1.1707-0.23513-1.2873l-2.9983-0.73329c-0.0596-0.0146-0.10458-0.0251-0.13332-0.0284z",fill:"url(#linearGradient971)"})))}function _o({className:e}){const[t]=g.exports.useState((new Date).getTime().toString());return f.createElement("svg",{className:e,fill:"currentColor",viewBox:"0 0 30.327 5.0518"},f.createElement("defs",null,f.createElement("linearGradient",{id:t,x1:"7.7677",x2:"14.802",y1:"5.3857",y2:"5.3857",gradientTransform:"translate(1.0113e-4,1.6184e-4)",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#6875f5",offset:"0"}),f.createElement("stop",{stopColor:"#f98080",offset:"1"}))),f.createElement("g",{transform:"translate(-56.423 -63.81)",strokeWidth:".26458"},f.createElement("path",{d:"m61.235 68.093q-0.18344 0.16933-0.50094 0.34572t-0.72672 0.30339q-0.40922 0.11994-0.87489 0.11994-0.5715 0-1.0654-0.17639-0.49389-0.18344-0.86783-0.51506-0.36689-0.33161-0.5715-0.79728-0.20461-0.47272-0.20461-1.0513 0-0.54328 0.21167-1.0019 0.21872-0.45861 0.59972-0.79728t0.87489-0.52211q0.49389-0.1905 1.0442-0.1905 0.45156 0 0.86783 0.127 0.41628 0.11994 0.74083 0.31044 0.33161 0.1905 0.52917 0.39511l-0.47272 0.61383q-0.34572-0.30339-0.76906-0.49389-0.42333-0.19756-0.9525-0.19756-0.35983 0-0.6985 0.11994t-0.61383 0.35278q-0.26811 0.22578-0.43039 0.55033-0.15522 0.32456-0.15522 0.73378 0 0.59267 0.28222 0.99483 0.28222 0.39511 0.74083 0.59972 0.46567 0.19756 0.98778 0.19756 0.381 0 0.68439-0.09878 0.30339-0.10583 0.54328-0.254t0.43039-0.29633z"}),f.createElement("path",{d:"m70.164 63.853 1.9826 2.6317 1.9826-2.6317h0.73378v4.9389h-0.762v-2.0743q0-0.45861 0.01411-0.86783 0.02117-0.40922 0.0635-0.81844l-1.8062 2.3424h-0.46567l-1.8062-2.3354q0.04939 0.40217 0.0635 0.81139t0.01411 0.86783v2.0743h-0.762v-4.9389z"}),f.createElement("path",{d:"m77.106 63.853h3.8241v0.73378h-3.0621v1.3053h2.6741v0.73378h-2.6741v1.4323h3.0621v0.73378h-3.8241z"}),f.createElement("path",{d:"m84.203 68.792v-4.2051h-1.7357v-0.73378h4.2827v0.73378h-1.7851v4.2051z"})),f.createElement("path",{transform:"rotate(32 15.881 -1.0183)",fillRule:"evenodd",d:"m11.03 3.2283a2.4814 2.526 7.3662e-7 0 0-0.30277 0.22149 1.9313 1.966 7.3662e-7 0 1 1.5991 1.936 1.9313 1.966 7.3662e-7 0 1-1.5988 1.9369 2.4814 2.526 7.3662e-7 0 0 1.5929 0.589 2.4814 2.526 7.3662e-7 0 0 2.4814-2.5255 2.4814 2.526 7.3662e-7 0 0-2.4815-2.526 2.4814 2.526 7.3662e-7 0 0-1.2903 0.36814zm-3.2345 2.2039c-0.18296 0.086815 0.49439 0.074836 3.0594 0.9212 0.46608 0.15383 0.88156-0.43345 0.88156-0.96766s-0.41546-1.1208-0.88154-0.96706l-2.9313 0.96698c-0.058262 0.019224-0.10199 0.034146-0.12813 0.046548z",fill:`url(#${t})`}))}function Bo({category:e}){const{t:t}=C(),[n,a]=Kr((e=>[e.exploreCategory,e.setExploreCategory])),r=Ws(e);return f.createElement(hl,{onClick:()=>a(e),active:n===e},f.createElement(r,{className:"w-5 h-5 mr-3"}),t(e?`category.${e}`:"explore.all"))}function jo({sort:e,label:t,icon:n}){const[a,r]=Kr((e=>[e.exploreSort,e.setExploreSort])),s=n;return f.createElement(hl,{onClick:()=>r(e),active:a===e},f.createElement(s,{className:"w-5 h-5 mr-3"}),t)}function Go(){const{t:e}=C(),t=g.exports.useMemo((()=>{let e=Object.keys(la);const t=e.splice(e.indexOf(la.Other),1);return e.push(...t),e}),[]);return f.createElement(dl,null,f.createElement("div",{className:"h-12 border-b dark:border-gray-850 shadow flex items-center px-5 text-base font-medium"},f.createElement(_o,{className:"h-4"})),f.createElement("div",{className:"px-1.5"},f.createElement(fl,null,"Sort"),f.createElement("div",{className:"space-y-0.5"},f.createElement(jo,{label:"Most Popular",sort:"Top",icon:he}),f.createElement(jo,{label:"Recently Created",sort:"New",icon:ve})),f.createElement(fl,null,e("explore.categories")),f.createElement("div",{className:"space-y-0.5"},f.createElement(Bo,{category:"Featured"}),f.createElement(Bo,{category:null}),t.map((e=>f.createElement(Bo,{key:e,category:e}))))))}function Vo({server:e,shadow:t=!1,className:n=""}){var a;const{t:r}=C(),s=Ws(e.category);return Kr((e=>e.exploreCategory)),f.createElement(Gs,{data:{type:Cs,server:e,enableFeatured:!0}},f.createElement(b,{to:`/+${e.name}`,className:`${n} relative relative flex flex-col w-full rounded-lg group dark:bg-gray-800 dark:hover:bg-gray-850 duration-200 transform transition hover:shadow-xl ${t?"shadow-lg":""}`},f.createElement("div",{className:"h-32 rounded-t-lg w-full bg-cover bg-center bg-no-repeat relative bg-gradient-to-br from-red-400 to-indigo-600",style:(null==e?void 0:e.bannerUrl)?{backgroundImage:`url(${null==e?void 0:e.bannerUrl})`}:void 0},f.createElement("div",{className:"absolute left-4 -bottom-3"},f.createElement(as,{size:10,server:e,className:"dark:bg-gray-750 rounded-xl ring-4 dark:ring-gray-800 transition dark:group-hover:ring-gray-850 group-hover:shadow-md"}))),f.createElement("div",{className:"flex flex-col flex-grow px-4 pt-5 pb-4 h-40"},f.createElement("div",{className:"text-lg font-semibold text-secondary"},null==e?void 0:e.displayName),f.createElement("div",{className:"text-13 text-tertiary line-clamp-3 pt-1"},(null==e?void 0:e.description)||"No description"),f.createElement("div",{className:"flex mt-auto text-xs"},f.createElement("div",{className:"inline-flex items-center"},f.createElement(ge,{className:"w-4 h-4 text-tertiary"}),f.createElement("div",{className:"ml-2 text-tertiary"},r("server.memberCount",{count:null!=(a=null==e?void 0:e.userCount)?a:0}))),f.createElement("div",{className:"ml-auto inline-flex items-center"},f.createElement(s,{className:"w-4 h-4 text-tertiary"}),f.createElement("div",{className:"ml-2 text-tertiary"},e.category))))))}function Wo({children:e}){return f.createElement("div",{className:"max-h-full h-full dark:bg-gray-750 px-6 py-4 scrollbar-custom overflow-y-auto"},e)}function Yo(){var e;const[t,n]=Kr((e=>[e.exploreCategory,e.exploreSort])),{data:a}=Ar({variables:{sort:n,category:t&&"Featured"!==t?t:null,featured:"Featured"===t},fetchPolicy:"cache-and-network"}),r=null!=(e=null==a?void 0:a.publicServers)?e:[];return f.createElement(lo,{leftSidebar:f.createElement(Go,null)},f.createElement(pt,null,f.createElement("title",null,"Explore Planets – Comet")),f.createElement(Wo,null,f.createElement("div",{className:"px-8 py-8"},f.createElement("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3 2xl:grid-cols-5"},r.map((e=>f.createElement(Vo,{server:e,key:e.id})))),!r.length&&f.createElement(Yr,null,"Nothing here yet!"))))}function Zo(){return f.createElement(yl,{icon:f.createElement(gt,{className:"h-5 w-5"}),title:"Inbox",showDivider:!0},f.createElement("div",{className:"flex items-center space-x-4"},f.createElement(Ko,{page:"Unread"}),f.createElement(Ko,{page:"All"})))}function Ko({page:e}){const[t,n]=Kr((e=>[e.inboxPage,e.setInboxPage]));return f.createElement(wl,{page:e,currentPage:t,setCurrentPage:n})}function Qo(e){return ht(e).calendar()}function Jo(e){return ht(e).format("h:mm A")}function Xo({reply:e}){const{comment:n}=e,{parentComment:a,post:r}=n,[s]=function(e){const n={...Ln,...e};return t(sr,n)}({optimisticResponse:{markReplyRead:{...e,isRead:!0}}}),[l]=function(e){const n={...Ln,...e};return t(lr,n)}({optimisticResponse:{markReplyUnread:{...e,isRead:!1}}});return f.createElement(b,{to:`${r.relativeUrl}#${n.id}`,className:"block dark:bg-gray-800 dark:hover:bg-gray-825 rounded p-3 cursor-pointer relative"},f.createElement("div",{className:"flex"},f.createElement("div",{className:"text-13 hover:underline font-medium text-tertiary pr-5 leading-5"},r.title),f.createElement("div",{className:"flex items-center ml-auto h-5"},f.createElement("div",{className:"text-mid text-13 font-medium mr-2 leading-5"},r.server.name),f.createElement(as,{server:r.server,size:5,className:"rounded-full"}))),a?f.createElement("div",null,f.createElement(ei,{comment:a}),f.createElement("div",{className:"ml-7 mt-2 border-t dark:border-gray-750"},f.createElement(ei,{comment:n}))):f.createElement(ei,{comment:n}),f.createElement("div",{className:"flex items-center pt-3 border-t dark:border-gray-750 mt-2"},f.createElement("div",{className:"flex items-center highlightable",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.isRead?l({variables:{input:{replyId:e.id}}}):s({variables:{input:{replyId:e.id}}})}},f.createElement(te,{className:"h-5 w-5"}),f.createElement("div",{className:"ml-2 text-xs font-medium"},e.isRead?"Mark Unread":"Mark Read"))))}function ei({comment:e}){var t,n,a,r,s,l,o,i;return f.createElement("div",{className:"flex space-x-3 pt-3"},f.createElement("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()}},f.createElement(Gs,{data:{type:ys,user:e.author}},f.createElement(Ml,{user:e.author,role:null==(t=e.serverUser)?void 0:t.role},f.createElement(Fl,{user:e.author,size:7})))),f.createElement("div",null,f.createElement("div",{className:"flex items-end pb-1.5"},f.createElement("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()}},f.createElement(Gs,{data:{type:ys,user:e.author}},f.createElement(Ml,{user:e.author,role:null==(n=e.serverUser)?void 0:n.role},f.createElement("div",{className:"text-sm font-medium cursor-pointer hover:underline leading-none "+((null==(r=null==(a=e.serverUser)?void 0:a.role)?void 0:r.color)?"":"text-primary"),style:{color:null==(l=null==(s=e.serverUser)?void 0:s.role)?void 0:l.color}},null!=(i=null==(o=e.author)?void 0:o.username)?i:"[deleted]")))),f.createElement("div",{className:"text-11 text-mid font-medium pl-2 leading-none"},Qo(e.createdAt))),f.createElement("div",{className:"prose prose-sm dark:prose-dark",dangerouslySetInnerHTML:{__html:e.text}})))}ht.extend(vt),ht.extend(ft);const ti="px-2 pb-2 text-11 text-tertiary uppercase tracking-widest font-semibold";function ni(){var e;const t=Kr((e=>e.inboxPage));so("inbox");const[n]=Wr(),{data:a}=Tr({skip:!n,fetchPolicy:"cache-and-network"}),r=(null!=(e=null==a?void 0:a.replies)?e:[]).filter((e=>"Unread"!==t||!e.isRead));return f.createElement(lo,{header:f.createElement(Zo,null)},f.createElement(pt,null,f.createElement("title",null,`(${r.length}) Inbox – Comet`)),f.createElement(Wo,null,"Unread"===t&&f.createElement(f.Fragment,null,f.createElement("div",{className:ti},"Unread - ",r.length)),"All"===t&&f.createElement(f.Fragment,null,f.createElement("div",{className:ti},"All - ",r.length)),0===r.length&&f.createElement(Yr,null,"You are all caught up!"),f.createElement("div",{className:"space-y-1.5"},r.map((e=>f.createElement(Xo,{reply:e,key:e.id}))))))}function ai({user:e}){var t;return f.createElement(yl,{icon:f.createElement(bt,{className:"w-5 h-5"}),title:f.createElement(f.Fragment,null,null!=(t=null==e?void 0:e.username)?t:"",f.createElement("div",{className:"w-2.5 h-2.5 ml-3 rounded-full "+((null==e?void 0:e.isOnline)?"bg-green-500":"bg-gray-600")}))})}const ri=["application/vnd.rar","application/x-tar","application/zip","application/x-7z-compressed","application/java-archive","application/x-bzip","application/x-bzip2","application/gzip","application/x-freearc"],si=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/x-abiword","application/rtf","application/vnd.oasis.opendocument.text"],li=["application/xhtml+xml","application/xml","text/xml","application/json","application/ld+json","text/css","application/x-csh","text/html","text/javascript","application/x-httpd-php","application/x-sh","application/vnd.mozilla.xul+xml"],oi=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.spreadsheet"],ii=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.presentation"],ci=e=>g.exports.useMemo((()=>e?e.startsWith("audio")?Et:e.startsWith("image")?xt:e.startsWith("video")?yt:"text/csv"===e?wt:"application/pdf"===e?Nt:si.includes(e)?kt:oi.includes(e)?Ct:ii.includes(e)?$t:ri.includes(e)?St:li.includes(e)?Ut:It:null),[e]);function mi({user:e,channel:t,group:n}){return f.createElement("div",{className:"px-4 py-5.5 flex items-end"},f.createElement("div",null,!!e&&f.createElement(f.Fragment,null,f.createElement(Fl,{user:e,size:20}),f.createElement("div",{className:"text-3xl font-semibold pt-4 text-primary"},e.username),f.createElement("div",{className:"pt-2 text-tertiary select-none text-base"},"This is the beginning of your direct message history with"," ",f.createElement("span",{className:"font-semibold"},"@",e.username))),!!t&&f.createElement(f.Fragment,null,f.createElement("div",{className:"rounded-full flex items-center justify-center w-20 h-20 dark:bg-gray-700"},f.createElement(ts,{className:"w-2/3 h-2/3 text-primary"})),f.createElement("div",{className:"text-3xl font-semibold pt-4 text-primary"},"Welcome to #",t.name,"!"),f.createElement("div",{className:"pt-2 text-tertiary select-none text-base"},"This is the start of the #",t.name," channel.")),!!n&&f.createElement(f.Fragment,null,f.createElement("div",{className:"rounded-full flex items-center justify-center w-20 h-20 dark:bg-gray-700"},f.createElement(ge,{className:"w-2/3 h-2/3 text-primary"})),f.createElement("div",{className:"text-3xl font-semibold pt-4 text-primary"},n.name),f.createElement("div",{className:"pt-2 text-tertiary select-none text-base"},"Welcome to the beginning of the"," ",f.createElement("span",{className:"font-semibold"},n.displayName)," group."))))}var di=g.exports.memo((function({index:e,message:t,prevMessage:n,server:a,channel:r,group:s,user:l}){var o,i,c,m,d,u,p,h,v;const[b]=Wr(),E=t.isEveryoneMentioned||t.mentionedUsers.map((e=>e.id)).includes(null==b?void 0:b.id),x=ci(null==(o=null==t?void 0:t.file)?void 0:o.mime),y=g.exports.useCallback((e=>{var t,n;const a=null==(n=null==(t=e.target)?void 0:t.dataset)?void 0:n.mention;a&&a.substring(2,a.length-1)}),[t]),w=0===e||n&&(!n.text||n.author.id!==t.author.id);return t.type===Vn.Initial?f.createElement(mi,{channel:r,group:s,user:l}):t.type===Vn.Join?f.createElement(Gs,{className:(null==n?void 0:n.text)?"pt-4":"",data:{type:ks,message:t}},f.createElement("div",{className:"flex dark:hover:bg-gray-775 py-1 px-4"},f.createElement("div",{className:"w-10 flex justify-center"},f.createElement(Pt,{className:"w-5 h-5 text-green-500"})),f.createElement("div",{className:"pl-4 text-base text-tertiary flex items-center"},f.createElement(Gs,{className:"inline-block",data:{type:ys,user:t.author}},f.createElement(Ml,{user:t.author,role:null==(i=t.serverUser)?void 0:i.role},f.createElement(Fl,{user:t.author,size:5}))),f.createElement(Gs,{className:"inline-block",data:{type:ys,user:t.author}},f.createElement(Ml,{user:t.author,role:null==(c=t.serverUser)?void 0:c.role},f.createElement("span",{className:"ml-2 text-white cursor-pointer hover:underline"},t.author.username)))," has joined the ",t.serverUser?"planet":"group",f.createElement("span",{className:"pl-2 text-11 whitespace-nowrap text-mid cursor-default leading-5 select-none"},Jo(t.createdAt))))):t.type===Vn.Normal?f.createElement("div",{className:""+(w?"pt-4":"")},f.createElement(Gs,{data:{type:ks,message:t,server:a}},f.createElement("div",{className:"flex py-1 pl-4 pr-18 dark:hover:bg-gray-775 group relative"},E&&f.createElement("div",{className:"bg-gray-500 group-hover:bg-opacity-30 bg-opacity-10 absolute inset-0 pointer-events-none border-l-2 border-gray-500"}),w?f.createElement(Gs,{data:{type:ys,user:t.author}},f.createElement(Ml,{user:t.author,role:null==(m=t.serverUser)?void 0:m.role},f.createElement(Fl,{user:t.author,size:10,className:"dark:bg-gray-700 cursor-pointer"}))):f.createElement("div",{className:"w-10 text-11 whitespace-nowrap text-mid group-hover:opacity-100 opacity-0 cursor-default select-none leading-6.5"},Jo(t.createdAt)),f.createElement("div",{className:"pl-4 w-full"},w&&f.createElement("div",{className:"flex items-end pb-0.5"},f.createElement(Gs,{data:{type:ys,user:t.author,server:a,role:null==(d=t.serverUser)?void 0:d.role}},f.createElement(Ml,{user:t.author,role:null==(u=t.serverUser)?void 0:u.role},f.createElement("div",{className:"text-base font-medium cursor-pointer hover:underline leading-none",style:{color:null==(h=null==(p=t.serverUser)?void 0:p.role)?void 0:h.color}},t.author.username))),f.createElement("div",{className:"text-11 text-mid pl-2 leading-none cursor-default select-none"},Qo(t.createdAt))),!!t.text&&f.createElement("div",{onClick:y,className:"prose prose-sm dark:prose-dark focus:outline-none max-w-none",dangerouslySetInnerHTML:{__html:t.text}}),!!(null==(v=t.linkMetadatas)?void 0:v.length)&&f.createElement("div",{className:"space-y-1 pt-1"},t.linkMetadatas.map(((e,t)=>f.createElement(no,{key:t,metadata:e,linkUrl:e.url})))),t.images.map(((e,t)=>f.createElement("div",{key:t,className:"pt-1"},f.createElement(to,{image:e})))),!!t.file&&f.createElement("div",{className:"pt-1 max-w-screen-sm w-full"},f.createElement("div",{className:"flex border dark:border-gray-850 dark:bg-gray-800 p-3 rounded w-full items-center"},f.createElement(x,{className:"w-8 h-8 dark:text-white"}),f.createElement("div",{className:"pl-3"},f.createElement("a",{href:t.file.url,target:"_blank",rel:"noreferrer noopener",className:"block text-base text-accent hover:underline cursor-pointer truncate"},t.file.filename),f.createElement("div",{className:"text-mid text-xs"},function(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}(t.file.size))),f.createElement("a",{className:"block ml-auto",href:t.file.url,target:"_blank",rel:"noreferrer noopener"},f.createElement(Ft,{className:"h-6 w-6 highlightable"})))))))):null}));const ui=({channelId:e,groupId:t,userId:a})=>{const r={channelId:e,groupId:t,userId:a},{data:s,fetchMore:l,loading:o}=function(e){const t={...Ln,...e};return n(Pr,t)}({variables:{...r,cursor:null},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),i=null==s?void 0:s.messages.hasMore,c=null==s?void 0:s.messages.messages;return[c,o,()=>{c&&i&&0!==c.length&&l({variables:{...r,cursor:c[0].id},updateQuery:(e,{fetchMoreResult:t})=>({messages:{hasMore:t.messages.hasMore,messages:[...t.messages.messages,...e.messages.messages]}})})},i]},pi=e=>w(`\n  ${e?"scale-100":"scale-0"}\n  transform\n  transition\n  bg-gradient-to-br\n  from-red-400\n  to-indigo-600\n  rounded-xl\n  p-3\n  max-w-sm\n  w-full\n  relative\n`);function gi({channel:e,user:t,group:n,setFiles:a}){const[r,s]=(()=>{const[e,t]=g.exports.useState(null),[n,a]=g.exports.useState(!1),r=g.exports.useRef(0),s=g.exports.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]),l=g.exports.useCallback((e=>{e.preventDefault(),e.stopPropagation(),r.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&a(!0)}),[]),o=g.exports.useCallback((e=>{e.preventDefault(),e.stopPropagation(),r.current--,r.current>0||a(!1)}),[]),i=g.exports.useCallback((e=>{e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(r.current=0,t(e.dataTransfer.files),e.dataTransfer.clearData())}),[]);return g.exports.useEffect((()=>(window.addEventListener("dragenter",l),window.addEventListener("dragleave",o),window.addEventListener("dragover",s),window.addEventListener("drop",i),function(){window.removeEventListener("dragenter",l),window.removeEventListener("dragleave",o),window.removeEventListener("dragover",s),window.removeEventListener("drop",i)}))),[e,n]})();g.exports.useEffect((()=>a(r)),[r,a]);const l=g.exports.useMemo((()=>e?`#${e.name}`:t?`@${t.username}`:n?`${n.displayName}`:void 0),[e,t,n]);return f.createElement(f.Fragment,null,f.createElement("div",{className:(o=s,w(`\n  fixed\n  inset-0\n  transition-all\n  bg-black\n  ${o?"visible bg-opacity-75":"invisible bg-opacity-0"}\n  flex\n  items-center\n  justify-center\n`)),style:{zIndex:999999}},f.createElement("div",{className:pi(s)},f.createElement("div",{className:"flex absolute left-1/2 transform top-0 -translate-x-1/2 -translate-y-1/2 transition delay-75 "+(s?"scale-100":"scale-0")},f.createElement("div",{className:"relative transform translate-x-6 translate-y-3 -rotate-12"},f.createElement("div",{className:"absolute left-5 top-9 w-14 h-14 bg-red-400",style:{zIndex:-1}}),f.createElement(Ut,{className:"w-24 h-24"})),f.createElement("div",{className:"relative"},f.createElement("div",{className:"absolute left-5 top-9 w-14 h-14 bg-red-400",style:{zIndex:-1}}),f.createElement(yt,{className:"w-24 h-24 "})),f.createElement("div",{className:"relative transform -translate-x-6 translate-y-3 rotate-12"},f.createElement("div",{className:"absolute left-5 top-8 w-14 h-14 bg-red-400",style:{zIndex:-1}}),f.createElement(xt,{className:"w-24 h-24"}))),f.createElement("div",{className:"rounded-xl border-dashed border-white border-2 px-4 pb-4 pt-16 text-center"},f.createElement("div",{className:"text-xl font-bold text-primary"},"Upload to ",f.createElement("span",{className:"text-white"},l))))));var o}const hi=w("\n  text-sm\n  text-primary\n  h-10\n  px-7\n  hover:underline\n  focus:outline-none\n  select-none\n  disabled:opacity-50\n  disabled:no-underline\n  disabled:cursor-not-allowed\n"),vi=w("\n  text-sm\n  text-primary\n  transition\n  bg-blue-500\n  hover:bg-blue-600\n  flex\n  items-center\n  justify-center\n  rounded\n  px-7\n  h-10\n  focus:outline-none\n  select-none\n  disabled:opacity-50\n  disabled:cursor-not-allowed\n");function fi({createMessage:e,variables:t,file:n,setFileIndex:a,placeholder:r,multiple:s,cancelAll:l}){var o;const[i,c]=g.exports.useState(""),m=(e=>{const[t,n]=g.exports.useState(null);return g.exports.useEffect((()=>{e&&(e.type.startsWith("image")?Vs(e).then((e=>n(e))).catch((()=>n(null))):n(null))}),[e]),t})(n),[d,u]=g.exports.useState(!1),p=g.exports.useCallback((()=>{d||a((e=>e+1))}),[a,d]),h=g.exports.useCallback((()=>{u(!0),e({variables:{input:{text:i||null,file:n,...t}}}).then((()=>{u(!1),p()}))}),[p,i,n,t,e]);g.exports.useEffect((()=>c("")),[n]);const v=g.exports.useCallback((e=>{"Enter"===e.key&&n&&h()}),[h,n]);g.exports.useEffect((()=>(document.body.addEventListener("keydown",v),()=>{document.body.removeEventListener("keydown",v)})),[v]);const b=ci(null==n?void 0:n.type);return f.createElement(Qs,{close:p,isOpen:!!n},f.createElement("div",{className:"text-left relative w-full rounded-xl dark:bg-gray-750 max-w-lg mx-auto"},f.createElement("div",{className:"absolute left-5 -top-20 flex w-46 h-40"},m&&f.createElement("img",{alt:"",src:m,className:"absolute max-w-full max-h-full bottom-0 left-0 rounded shadow-md object-cover"}),!m&&b&&f.createElement(b,{className:"h-full w-full text-white absolute bottom-0 left-0 transform -translate-x-8"})),f.createElement("div",{className:"px-5 pt-24 pb-5"},f.createElement(bl,{className:"truncate text-left text-xl text-primary font-semibold select-none"},null!=(o=null==n?void 0:n.name)?o:""),f.createElement("div",{className:"text-tertiary text-13 pb-5 pt-0.5 select-none"},"Upload to"," ",f.createElement("span",{className:"font-medium text-secondary"},r)),f.createElement("label",{htmlFor:"comment",className:"block uppercase text-xs font-medium text-secondary pb-1.5"},"Add a Comment ",f.createElement("span",{className:"text-tertiary"},"(Optional)")),f.createElement("input",{className:"h-10 rounded-lg dark:bg-gray-700 w-full focus:outline-none px-4 text-secondary text-base",id:"comment",value:i,onChange:e=>{const t=e.target.value;c(t)}})),f.createElement("div",{className:"flex p-4 dark:bg-gray-775 rounded-b-xl"},f.createElement("div",{className:"ml-auto"}),s&&f.createElement("button",{className:hi,onClick:()=>{l()},disabled:d},"Cancel All"),f.createElement("button",{className:hi,onClick:p,disabled:d},"Cancel"),f.createElement("button",{className:vi,disabled:!n||d,onClick:h},"Upload",d&&f.createElement("div",{className:"ml-3"},f.createElement(es,null))))))}const bi=({channel:e,group:n,user:r,users:s})=>{C();const[l]=Wr(),[o,i]=g.exports.useState([]),[c]=function(e){const n={...Ln,...e};return t(Ya,n)}(),m={userId:null==r?void 0:r.id,groupId:null==n?void 0:n.id,channelId:null==e?void 0:e.id};!function(e){const t={...Ln,...e};a(_r,t)}({variables:m,skip:!e&&!n&&!r,onSubscriptionData({subscriptionData:{data:{typingUpdated:{typingUserId:e,isTyping:t}}}}){if(t){const t=o.find((t=>t.id===e));if(t){const e=o.indexOf(t),n=[...o];n[e]={id:t.id,time:(new Date).getTime()},i(n)}else i([...o,{id:e,time:(new Date).getTime()}])}else i(o.filter((({id:t})=>t!==e)))}});const[d,u]=g.exports.useState(0);g.exports.useEffect((()=>{const e=setInterval((()=>{u(d+1)}),1e3);return()=>clearInterval(e)}),[d,u]);return[()=>c({variables:{input:m}}),o.filter((({id:e,time:t})=>(!l||e!==l.id)&&(new Date).getTime()-t<=1500)).map((({id:e})=>{var t;return null==(t=s.find((t=>t.id===e)))?void 0:t.username})).filter((e=>!!e))]},Ei=Mt.create({name:"mention",defaultOptions:{HTMLAttributes:{},suggestion:{char:"@",command:({editor:e,range:t,props:n})=>{e.chain().focus().insertContentAt(t,[{type:"mention",attrs:n},{type:"text",text:" "}]).run()},allow:({editor:e,range:t})=>e.can().insertContentAt(t,{type:"mention"})}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>({id:e.getAttribute("data-mention")}),renderHTML:e=>e.id?{"data-mention":e.id}:{}},name:{default:null,parseHTML:e=>({name:e.getAttribute("data-mention")}),renderHTML:()=>({})}}),parseHTML:()=>[{tag:"span[data-mention]"}],renderHTML({node:e,HTMLAttributes:t}){return["span",je(this.options.HTMLAttributes,t),`${this.options.suggestion.char}${e.attrs.name}`]},renderText({node:e}){return`${this.options.suggestion.char}${e.attrs.name}`},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command((({tr:e,state:t})=>{let n=!1;const{selection:a}=t,{empty:r,anchor:s}=a;return!!r&&(t.doc.nodesBetween(s-1,s,((t,a)=>{if("mention"===t.type.name)return n=!0,e.insertText(this.options.suggestion.char||"",a,a+t.nodeSize),!1})),n)}))}},addProseMirrorPlugins(){return[Rt({editor:this.editor,...this.options.suggestion})]}});class xi extends g.exports.Component{constructor(e){super(e),this.state={selectedIndex:0}}componentDidUpdate(e){e.users.length<this.props.selectedIndex+1&&this.setState({selectedIndex:e.users.length-1})}users(){return this.props.users.filter((e=>("string"==typeof e?e.substring(1):e.username).toLowerCase().startsWith(this.props.query.toLowerCase()))).slice(0,5)}onKeyDown({event:e}){return"ArrowUp"===e.key?(this.upHandler(),!0):"ArrowDown"===e.key?(this.downHandler(),!0):"Enter"===e.key?(e.stopPropagation(),this.enterHandler(),!0):" "===e.key&&(e.stopPropagation(),this.spaceHandler(),!0)}upHandler(){let e=this.state.selectedIndex-1;e<0&&(e=this.users().length-1),this.setState({selectedIndex:e})}downHandler(){let e=this.state.selectedIndex+1;e>=this.users().length&&(e=0),this.setState({selectedIndex:e})}enterHandler(){this.selectItem(this.state.selectedIndex)}spaceHandler(){this.selectItem(this.state.selectedIndex)}selectItem(e){const t=this.users()[e];t&&this.props.command("string"==typeof t?{id:`<${t}>`,name:t.substring(1)}:{id:`<@${t.id}>`,name:t.username})}render(){return f.createElement("div",{className:"relative w-full w-72 rounded-md dark:bg-gray-800 overflow-hidden shadow-lg p-2 border dark:border-gray-850"},this.users().map(((e,t)=>f.createElement("button",{className:"flex items-center rounded w-full text-left text-primary text-base bg-transparent border-none px-2 h-10 focus:outline-none "+(t===this.state.selectedIndex?"dark:bg-gray-775":""),key:"string"==typeof e?e:e.id,onClick:()=>this.selectItem(t),onMouseMove:()=>this.setState({selectedIndex:t})},"string"==typeof e?e:f.createElement(f.Fragment,null,f.createElement(Fl,{user:e,size:6,className:"mr-2"}),e.username)))))}}const yi="_typing__dot_1o677_5";function wi(){return f.createElement("div",{className:"_typing_1o677_1"},f.createElement("div",{className:yi}),f.createElement("div",{className:yi}),f.createElement("div",{className:yi}))}const Ni=(e,t,n)=>new Promise(((a,r)=>{console.log("fetch");const s=new XMLHttpRequest;s.onreadystatechange=()=>{4===s.readyState&&(s.status>=200&&s.status<300?a(JSON.parse(s.responseText)):r(new Error(s.responseText)))},s.open("GET",`${e}${t}${(e=>{const t=[];return Object.keys(e).forEach((n=>{void 0!==e[n]&&t.push(`${n}=${e[n]}`)})),encodeURI(`?${t.join("&")}`)})(n)}`),s.send()}));class ki{constructor(e){this.base=e.base||"https://g.tenor.com/v1",this.token=e.token||"LIVDSRZULELA",this.locale=e.locale||"en_US",this.contentFilter=e.contentFilter||"mild",this.mediaFilter=e.mediaFilter||"minimal",this.defaultResults=e.defaultResults||!1,this.limit=e.limit||12}autocomplete(e){return Ni(this.base,"/autocomplete",{key:this.token,q:e,limit:1,locale:"en_US"})}search(e,t){const n=this.defaultResults&&!e?"/trending":"/search";return Ni(this.base,n,{key:this.token,q:e,limit:this.limit,locale:this.locale,contentfilter:this.contentFilter,media_filter:this.mediaFilter,ar_range:"all",pos:t})}suggestions(e){return Ni(this.base,"/search_suggestions",{key:this.token,q:e,limit:5,locale:this.locale})}}class Ci extends g.exports.Component{constructor(e){super(e),this.handleClick=()=>{const{result:e,onSelect:t}=this.props;t(e)},this.componentIsMounted=!1,this.image=new Image,this.state={loaded:!1}}componentDidMount(){this.componentIsMounted=!0;const{result:e}=this.props;this.image.src=e.media[0].tinygif.url,this.image.onload=()=>{this.componentIsMounted&&this.setState({loaded:!0})}}componentWillUnmount(){this.componentIsMounted=!1}getLabel(){const{result:{itemurl:e}}=this.props;return e.replace("https://tenor.com/view/","").replace(/-gif-\d+$/,"").replace(/-/g," ")}render(){const{loaded:e}=this.state;return f.createElement("button",{"aria-label":this.getLabel(),type:"button",onClick:this.handleClick,className:"react-tenor--result"},e&&f.createElement("span",{style:{backgroundImage:`url(${this.image.src})`}}))}}const $i=({autoComplete:e,search:t})=>{const n=t.toLowerCase().replace(/\s/g,""),a=e.toLowerCase().replace(n,"");return f.createElement("div",{className:"react-tenor--autocomplete"},f.createElement("span",{"aria-hidden":!0},t),a)},Si=()=>f.createElement("svg",{className:"react-tenor--spinner",viewBox:"0 0 1024 1024"},f.createElement("path",{d:"M959.6 452.2c-2.8-17.4-6.2-34.6-10.6-51.6-5.6-21.6-12.8-43-21.6-63.6-17.8-42.4-42.2-82-71.8-117.2-32-37.8-70.6-70.4-113.4-95.4-42.2-24.8-88.2-42.4-136.2-52.2-24.8-5-49.8-8-75.2-8.2-19.8-0.2-39.6 0.6-59.2 2.4-51 5-101.4 19.2-147.8 41-39.8 18.8-76.8 43.2-109.6 72.4s-61.4 63.2-84.4 100.6c-25.4 41.6-44.4 87-54.8 134.6-8.4 38-12.4 77.2-10.4 116.2 1.8 37.8 7.6 75.6 19 111.8 7.2 23 15.8 45.4 26.6 67.2 10.6 21.4 23 42 36.8 61.4 27.6 38.6 61.2 72.8 99.6 101 39.2 29 83.4 51.4 129.8 66.2 48.4 15.4 99.8 22.6 150.6 20.8 49.6-1.6 98.8-11.2 145.2-29 44.6-17.2 86.4-41.8 123-72.6 18.4-15.6 34.8-33.2 50.2-51.8 15.6-18.8 29.6-38.6 41.2-60 10-18.4 18.4-37.6 25.6-57 3.6-9.6 7-19.2 9.8-29.2 3-10.6 5.2-21.6 7.2-32.4 3-17 4.2-34.6 2.6-51.8-1.4 7.6-2.6 15-4.4 22.4-2.2 8.6-5 17-8.2 25.2-6.4 17.4-14.4 34.2-22 51-9.8 21.4-21.2 41.8-33.6 61.6-6.4 10.2-13 20.2-20.2 29.8s-15.4 18.8-23.6 27.8-34.2 34.4-54 48.8c-20.2 14.8-41.6 27.8-64.2 38.6-45.2 22-94.6 35.2-144.6 39.6-51.2 4.4-103.4-0.6-152.6-15.2-46.8-13.8-91.2-36.2-130.2-65.6-37.8-28.6-70.6-63.8-96.4-103.6-27-40.6-45.6-86.4-55.8-134.2-2.6-12.4-4.6-25.2-6-37.8-1.2-10.8-2.2-21.8-2.6-32.8-0.6-22.6 0.8-46 4.2-68.4 7.4-49.2 23.4-96.6 48.2-139.8 22-38.6 50.6-73.4 84.2-102.8 33.6-29.6 72-53.4 113.6-70.2 24-9.8 49.2-17 74.8-21.8 13-2.4 26-4.4 39-5.4 6.4-0.6 12.6-0.6 19-1.2 2.6 0 5.2 0.2 7.8 0.2 43.4-0.8 87 4.8 128.4 17.8 44.6 14 86.6 36.6 123 66 38.2 30.8 70 68.8 94 111.6 20.4 36.4 35 75.6 43.8 116.4 2 9.4 3.6 18.8 5.2 28.2 1.4 8.6 6.2 16.6 13.6 21.4 15.6 10.4 37.4 3.4 45-13.4 2.6-5.8 3.4-12 2.4-17.8z"})),Ui=({autoComplete:e,inputRef:t,search:n,searching:a,onSearchChange:r,onSearchKeyDown:s,placeholder:l})=>f.createElement("div",{className:"react-tenor--search-bar"},f.createElement("input",{ref:t,"aria-label":"Search",className:"react-tenor--search",type:"search",value:n,onChange:r,onKeyDown:s,placeholder:l||"Search Tenor"}),e&&n&&f.createElement($i,{autoComplete:e,search:n}),a&&f.createElement(Si,null)),Ii=({direction:e,onClick:t})=>f.createElement("button",{"aria-label":`Page ${e}`,className:`react-tenor--page-${e}`,type:"button",onClick:t},f.createElement("div",null)),Pi=({results:e,onPageLeft:t,onPageRight:n,onSelect:a})=>f.createElement("div",{className:"react-tenor--results"},e.map((e=>f.createElement(Ci,{key:e.id,result:e,onSelect:a}))),f.createElement(Ii,{direction:"left",onClick:t}),f.createElement(Ii,{direction:"right",onClick:n})),Fi=({autoComplete:e,contentRef:t,inputRef:n,onPageLeft:a,onPageRight:r,onSearchChange:s,onSearchKeyDown:l,onSuggestionClick:o,onSelect:i,results:c,search:m,searching:d,suggestions:u,placeholder:p})=>{let g="react-tenor";return(u.length>0||c.length>0)&&(g=`${g} react-tenor-active`),f.createElement("div",{className:g,ref:t},f.createElement(Ui,{autoComplete:e,inputRef:n,search:m,searching:d,onSearchChange:s,onSearchKeyDown:l,placeholder:p}),c.length>0&&f.createElement(Pi,{results:c,onPageLeft:a,onPageRight:r,onSelect:i}))},Mi={autoComplete:null,autoFocus:!1,page:0,pages:[],search:"",searching:!1,suggestions:[]},Ri={Tab:9,ArrowLeft:37,ArrowRight:39};class Ai extends g.exports.Component{constructor(e){super(e),this.fetchAutoComplete=e=>this.client.autocomplete(e).then((({results:[t]})=>{const{search:n}=this.state;n===e&&this.mountedSetState({autoComplete:t})})),this.fetchSuggestions=e=>this.client.suggestions(e).then((({results:t})=>{const{search:n}=this.state;n===e&&this.mountedSetState({suggestions:t})})),this.handleWindowClick=e=>{const{contentRef:t}=this.props,{search:n}=this.state;if(!n)return;const a=(t||this.contentRef).current;a&&e.target instanceof Element&&a.contains(e.target)||(this.timeout&&clearTimeout(this.timeout),this.setState(Mi))},this.handleWindowKeyDown=e=>{const{contentRef:t}=this.props,n=(t||this.contentRef).current;n&&e.target instanceof Element&&!n.contains(e.target)||-1===[Ri.ArrowLeft,Ri.ArrowRight].indexOf(e.keyCode)||!e.metaKey||(e.preventDefault(),e.keyCode===Ri.ArrowLeft?this.handlePageLeft():this.handlePageRight())},this.handlePageLeft=()=>{this.setState((({page:e})=>({page:0===e?0:e-1})))},this.handlePageRight=()=>{const{defaultResults:e}=this.props,{page:t,pages:n,search:a,searching:r}=this.state;return!e&&!a||r?Promise.resolve():t<n.length-1?(this.setState((({page:e})=>({page:e+1}))),Promise.resolve()):this.client.search(a,n[t].next).then((e=>{e.results&&this.mountedSetState((({page:t,pages:n})=>({page:t+1,pages:n.concat([e]),searching:!1})))})).catch((()=>{this.mountedSetState({searching:!1})}))},this.handleSearchChange=e=>{const{defaultResults:t}=this.props,n=e.target.value;this.timeout&&clearTimeout(this.timeout),n.length?(this.setState({autoComplete:null,search:n,searching:!0}),this.fetchAutoComplete(n),this.fetchSuggestions(n),this.timeout=setTimeout((()=>this.performSearch(n)),250)):t?(this.setState({...Mi,searching:!0}),this.performSearch(n)):this.setState(Mi)},this.handleSearchKeyDown=e=>{const{autoComplete:t,search:n}=this.state;if(e.keyCode!==Ri.Tab||!t||!n)return;const a=t.toLowerCase(),r=n.toLowerCase().replace(/\s/g,"");if(a===r)return;e.preventDefault();const s=`${n}${a.replace(r,"")}`;this.setState({autoComplete:null,search:s,searching:!0}),this.fetchSuggestions(s),this.performSearch(s)},this.handleSuggestionClick=e=>{this.timeout&&clearTimeout(this.timeout),this.setState({search:e,searching:!0}),this.performSearch(e)},this.performSearch=e=>this.componentIsMounted?this.client.search(e).then((e=>{this.mountedSetState({page:0,pages:[e],searching:!1})})).catch((()=>{this.mountedSetState({searching:!1})})):Promise.resolve(),this.mountedSetState=e=>{this.componentIsMounted&&this.setState(e)},this.client=this.makeClient(),this.contentRef=g.exports.createRef(),this.inputRef=g.exports.createRef(),this.timeout=null,this.componentIsMounted=!1,this.state={...Mi,search:e.initialSearch||"",searching:!(!e.initialSearch&&!e.defaultResults)}}componentDidMount(){const{autoFocus:e,initialSearch:t,defaultResults:n}=this.props;this.componentIsMounted=!0,window.addEventListener("keydown",this.handleWindowKeyDown),window.addEventListener("click",this.handleWindowClick),t&&(this.fetchAutoComplete(t),this.fetchSuggestions(t)),(t||n)&&this.performSearch(t||""),e&&this.focus()}componentDidUpdate(e){const{base:t,token:n,locale:a,mediaFilter:r,contentFilter:s,defaultResults:l,limit:o}=this.props;t===e.base&&n===e.token&&a===e.locale&&r===e.mediaFilter&&s===e.contentFilter&&l===e.defaultResults&&o===e.limit||(this.client=this.makeClient())}componentWillUnmount(){window.removeEventListener("click",this.handleWindowClick),window.removeEventListener("keydown",this.handleWindowKeyDown),this.componentIsMounted=!1}makeClient(){const{base:e,token:t,locale:n,mediaFilter:a,contentFilter:r,defaultResults:s,limit:l}=this.props;return new ki({base:e,token:t,locale:n,mediaFilter:a,contentFilter:r,defaultResults:s,limit:l})}focus(){const e=this.inputRef.current;e&&e.focus()}render(){const{contentRef:e,onSelect:t,searchPlaceholder:n}=this.props,{autoComplete:a,page:r,pages:s,search:l,searching:o,suggestions:i}=this.state;return f.createElement(Fi,{autoComplete:a,contentRef:e||this.contentRef,inputRef:this.inputRef,onPageLeft:this.handlePageLeft,onPageRight:this.handlePageRight,onSearchChange:this.handleSearchChange,onSearchKeyDown:this.handleSearchKeyDown,onSuggestionClick:this.handleSuggestionClick,onSelect:t,results:s[r]?s[r].results:[],search:l,searching:o,suggestions:i,placeholder:n})}}function Di({onSelect:e}){return f.createElement("div",{className:"w-full max-w-sm px-4 fixed top-16"},f.createElement(At,{className:"relative"},(({open:t})=>f.createElement(f.Fragment,null,f.createElement(At.Button,{className:`\n                ${t?"":"text-opacity-90"}\n                text-white group bg-orange-700 px-3 py-2 rounded-md inline-flex items-center text-base font-medium hover:text-opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75`},f.createElement("span",null,"Solutions"),f.createElement(Q,{className:"w-5 h-5"})),f.createElement(J,{as:g.exports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1"},f.createElement(At.Panel,{className:"absolute z-10 w-screen max-w-sm px-4 mt-3 transform -translate-x-1/2 left-1/2 sm:px-0 lg:max-w-3xl"},f.createElement("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5"},f.createElement(Ai,{token:{}.TENOR_API_KEY,onSelect:e}))))))))}function Ti({channel:e,server:t,group:n,user:a,users:r}){const{t:s}=C(),[l]=Wr(),o=!!a&&a.relationshipStatus===ra.Blocked,i=!!a&&a.relationshipStatus===ra.Blocking,[c,m,d]=Us({server:t,permissions:[ia.SendMessages,ia.RestrictedChannels,ia.PrivateChannels]}),u=!!e&&c&&(e.type===On.Public||e.type===On.Restricted&&m||e.type===On.Private&&d),p=!!l&&(!!a&&(!!a&&!o&&!i)||!!e&&u||!!n),h=g.exports.useMemo((()=>l?e?u?`Message #${e.name}`:"You do not have permission to send messages in this channel":n?`Message ${n.name}`:a?o?"This user has blocked you":i?"You are blocking this user":`Message @${a.username}`:"":"Must log in to send messages"),[l,e,n,a,u,o,i]),v={autofocus:!0,extensions:[Ve.configure({horizontalRule:!1,bulletList:!1,orderedList:!1,listItem:!1,heading:!1}),mo,Dt.configure({placeholder:`${h}`,showOnlyWhenEditable:!1}),Tt.create({addKeyboardShortcuts:()=>({Enter:({editor:e})=>{let t=e.getHTML();if(!(0===e.state.doc.textContent.length)){const n=/^<p>|<\/p>$/gi,a=/^\s*(?:<br\s*\/?\s*>)+|(?:<br\s*\/?\s*>)+\s*$/gi;t=t.replace(n,""),t=t.replace(a,""),F({variables:{input:{text:t,...M}}}),e.commands.clearContent()}return!0}})}),Ei.configure({suggestion:{allowSpaces:!1,render:()=>{let e,t;return{onStart:n=>{e=new Lt(xi,{props:{...n,users:["@everyone"].concat(r)},editor:n.editor}),t=Ot("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",render(e){const t=document.createElement("div"),n=document.createElement("div");return t.appendChild(n),n.innerHTML="",n.appendChild(e.props.content),{popper:t,onUpdate:function(e,t){e.content!==t.content&&(n.innerHTML="",n.appendChild(t.content))}}}})},onUpdate(n){e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(t){var n;return null==(n=e.ref)?void 0:n.onKeyDown(t)},onExit(){t[0].destroy(),e.destroy()}}}}})],content:"",editorProps:{attributes:{class:"prose prose-sm dark:prose-dark focus:outline-none max-w-none"}},editable:p},[b,E]=g.exports.useState(null),y=function(){const[,e]=g.exports.useState(0);return()=>e((e=>e+1))}();g.exports.useEffect((()=>{b&&b.destroy();const e=new zt(v);return E(e),e.on("transaction",y),()=>{e.destroy()}}),[p,h]);const[w,N]=bi({channel:e,group:n,user:a,users:r}),[k,$]=g.exports.useState(null),[S,U]=g.exports.useState(null),[I,P]=g.exports.useState(0),[F]=_a({update(t,{data:{createMessage:r}}){const s=null==e?void 0:e.id,l=null==n?void 0:n.id,o=null==a?void 0:a.id,i={query:Pr,variables:{userId:o,groupId:l,channelId:s,cursor:null}},c=t.readQuery(i);c&&!c.messages.messages.map((e=>e.id)).includes(r.id)&&t.writeQuery({...i,data:{messages:{...c.messages,messages:[...c.messages.messages,r]}}})}}),M={channelId:null==e?void 0:e.id,groupId:null==n?void 0:n.id,userId:null==a?void 0:a.id},R=xl(),A=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/i,D=g.exports.useCallback((e=>{var t;if(!p)return;const n=e.clipboardData.files;if(e.preventDefault(),n&&n.length>0)$(n);else{const n=null==(t=e.clipboardData)?void 0:t.getData("text/plain");n&&(A.test(n)?null==b||b.commands.insertContent(`<a href="${n}" target="_blank" rel="noopener noreferrer nofollow">${n}</a>`):null==b||b.commands.insertContent(n),null==b||b.commands.focus())}}),[b]);g.exports.useEffect((()=>(document.body.addEventListener("paste",D),()=>{document.body.removeEventListener("paste",D)})),[D]);const[T,L]=g.exports.useState(null),O=g.exports.useCallback((e=>{if(!p)return;const t=(new Date).getTime();T?t-T>500&&(w(),L(t)):L(t),null==b||b.commands.focus()}),[b]);g.exports.useEffect((()=>(document.body.addEventListener("keypress",O),()=>{document.body.removeEventListener("keypress",O)})),[D]),g.exports.useEffect((()=>{k&&(U(k[0]),P(0))}),[k]),g.exports.useEffect((()=>{if(!k)return;let e;return I>=k.length?($(null),U(null),P(0)):(U(null),e=setTimeout((()=>U(k[I])),300)),()=>{e&&clearTimeout(e)}}),[I]);const z=g.exports.useCallback((()=>{$(null),U(null),P(0)}),[$,U,P]);return f.createElement(f.Fragment,null,!!l&&f.createElement(f.Fragment,null,f.createElement(gi,{placeholder:h,setFiles:$}),f.createElement(fi,{createMessage:F,variables:M,file:S,setFileIndex:P,placeholder:h,multiple:k&&k.length>1,cancelAll:z})),f.createElement("div",{className:"px-4 dark:bg-gray-750 relative"},f.createElement("div",{className:"relative"},p&&f.createElement(x,{content:s("message.upload")},f.createElement("div",{className:"block absolute left-4.5 top-1/2 transform -translate-y-1/2"},f.createElement("input",{className:"hidden",id:"file",name:"file",type:"file",onChange:e=>$(e.target.files),multiple:!0}),f.createElement("label",{htmlFor:"file",className:"text-tertiary highlightable"},f.createElement(qt,{className:"w-5 h-5"})))),f.createElement("div",{onClick:()=>{l||R()},className:`${p?"px-14":"px-4 opacity-50"} ${l?"":"cursor-pointer"} min-h-[3rem] max-h-[20rem] overflow-y-auto scrollbar-light dark:bg-gray-700 py-3 w-full  rounded-lg text-base focus:outline-none text-secondary border-none`},!(null==b?void 0:b.isDestroyed)&&f.createElement(Ye,{editor:b})),f.createElement(Di,{onSelect:e=>console.log(e)})),f.createElement("div",{className:"h-6 flex items-center text-secondary text-13 font-medium"},N.length>0&&f.createElement(wi,null),1===N.length&&f.createElement(f.Fragment,null,f.createElement("span",{className:"font-bold text-primary"},N[0])," is typing..."),2===N.length&&f.createElement(f.Fragment,null,f.createElement("span",{className:"font-bold text-primary"},N[0])," and ",f.createElement("span",{className:"font-bold text-primary"},N[1])," are typing..."),3===N.length&&f.createElement(f.Fragment,null,f.createElement("span",{className:"font-bold text-primary"},N[0]),", ",f.createElement("span",{className:"font-bold text-primary"},N[1]),", and ",f.createElement("span",{className:"font-bold text-primary"},N[2])," are typing..."),N.length>3&&f.createElement(f.Fragment,null,"Several people are typing..."))))}function Li({channel:e,server:n,user:a,group:r,users:s}){const l=g.exports.useRef(null),[o,i,c,m]=ui({channelId:null==e?void 0:e.id,userId:null==a?void 0:a.id,group:null==r?void 0:r.id}),[d,u]=g.exports.useState((null==o?void 0:o.length)||0);g.exports.useEffect((()=>{var e;u((null==o?void 0:o.length)||0),null==(e=null==l?void 0:l.current)||e.scrollToIndex(d+1e7)}),[e,a,r,l]);const{atBottom:p,newMessagesNotification:h,setNewMessagesNotification:v}=function(e){const[t]=Wr(),[n,a]=g.exports.useState(!1),r=g.exports.useRef(""),s=g.exports.useRef(!1);return g.exports.useEffect((()=>{var n;if(!(null==e?void 0:e.length))return;const l=e[e.length-1],o=r.current;r.current=l.id||"",l.id!==o&&(s.current||t&&(null==(n=l.author)?void 0:n.id)!==t.id&&a(!0))}),[t,e]),{atBottom:s,newMessagesNotification:n,setNewMessagesNotification:a}}(o),b=function(e){var t;const n=null==(t=null==e?void 0:e[0])?void 0:t.id,a=g.exports.useRef(n),r=g.exports.useRef(n),s=g.exports.useRef(0);return g.exports.useMemo((()=>{if(!e||!e.length)return 0;if(n===r.current)return s.current;a.current||(a.current=n),r.current=n;for(let t=s.current;t<e.length;t+=1)if(e[t].id===a.current)return s.current=t,t;return 0}),[e,null==e?void 0:e.length])}(o),E=function(e){const[t]=Wr(),n=g.exports.useRef(""),a=g.exports.useRef(!1);function r(){var a;if(e&&e.length>0){const r=e[e.length-1];if((null==(a=r.author)?void 0:a.id)===(null==t?void 0:t.id)&&n.current!==r.id)return n.current=r.id,!0}return!1}return g.exports.useEffect((()=>{e&&e.length&&!a.current&&(a.current=!0,r())}),[e,null==e?void 0:e.length]),r}(o),x=g.exports.useCallback(((t,s)=>{const l=s+b-1e7,o=t[l],i=l>0?t[l-1]:null;return o?f.createElement(di,{server:n,channel:e,group:r,user:a,message:o,index:l,prevMessage:i}):f.createElement("div",{style:{height:"1px"}})}),[b,n,e,r,a]),[y]=function(e){const n={...Ln,...e};return t(Pa,n)}(),[w]=function(e){const n={...Ln,...e};return t(qa,n)}(),[N]=tr();return g.exports.useEffect((()=>{(null==o?void 0:o.length)&&(e?y({variables:{input:{channelId:e.id}},optimisticResponse:{readChannel:{...e,isUnread:!1}}}):r?w({variables:{input:{groupId:r.id}},optimisticResponse:{readGroup:{...r,unreadCount:0}}}):a&&N({variables:{input:{userId:a.id}},optimisticResponse:{readDm:{...a,unreadCount:0}}}))}),[null==e?void 0:e.id,null==r?void 0:r.id,null==a?void 0:a.id,null==o?void 0:o.length]),f.createElement(f.Fragment,null,f.createElement("div",{className:"relative flex-1 overflow-x-hidden overflow-y-auto dark:bg-gray-750 w-full h-full"},!!o&&f.createElement(Te,{className:"scrollbar-custom",alignToBottom:!0,atBottomStateChange:e=>{p.current=e,e&&h&&v(!1)},components:{Footer:()=>f.createElement("div",{className:"h-5.5"})},firstItemIndex:1e7-b,followOutput:e=>(E()||!!e)&&"auto",initialTopMostItemIndex:o.length>0?o.length-1:0,itemContent:e=>x(o,e),overscan:0,ref:l,startReached:()=>{!i&&m&&c()},style:{overflowX:"hidden"},totalCount:o.length||0})),!!s&&(!!e||!!a||!!r)&&f.createElement(Ti,{server:n,channel:e,user:a,group:r,users:s}))}function Oi({username:e}){const{data:n}=qr({variables:{username:e},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),[a]=function(e){const n={...Ln,...e};return t(nr,n)}(),r=null==n?void 0:n.user;g.exports.useEffect((()=>{r&&(r.showChat||a({variables:{input:{userId:r.id}}}))}),[r]),so(`dm/@${e}`);const[s]=Wr();return f.createElement(lo,{header:f.createElement(ai,{user:r})},!!r&&f.createElement(Li,{user:r,users:[r,s]}))}const zi=e=>{const{server:t}=Ht(),n=Kr((e=>e.setServerPage));g.exports.useEffect((()=>n(t,e)))};function qi({user:e,role:t,server:n}){return f.createElement(Gs,{data:{type:ys,user:e,server:n,role:t}},f.createElement(Ml,{user:e,role:t,placement:"left"},f.createElement(hl,{small:!0},f.createElement(Fl,{user:e,size:6,showOnline:!0,dotClassName:"w-2 h-2 ring-2 dark:ring-gray-800"}),f.createElement("div",{className:"ml-3 font-medium text-tertiary",style:{color:null==t?void 0:t.color}},e.username))))}function Hi({server:e,serverUsers:t}){const n=g.exports.useMemo((()=>{var n;const a=[];for(const l of(null!=(n=null==e?void 0:e.roles)?n:[]).filter((e=>e.permissions.includes(ia.DisplayRoleSeparately)))){const e=t.filter((e=>e.isOnline&&e.roles.map((e=>e.id)).includes(l.id)&&!a.includes(e)));e.length&&(a.push(`${l.name} — ${e.length}`),a.push(...e))}const r=t.filter((e=>e.user.isOnline));r.length&&(a.push(`Online — ${r.length}`),a.push(...r));const s=t.filter((e=>!e.user.isOnline));return s.length&&(a.push(`Offline — ${s.length}`),a.push(...s)),a}),[t,e]),a=g.exports.useRef(),r=Kr((e=>e.showUsers));return f.createElement(dl,{right:!0,show:r},f.createElement(Te,{className:"scrollbar-dark",ref:a,style:{height:"100%",width:"100%"},data:n,itemContent:(t,n)=>f.createElement("div",{className:"px-1.5 pb-0.5"},"string"==typeof n?f.createElement(fl,null,n):f.createElement("div",{className:""+(n.user.isOnline?"":"opacity-35")},f.createElement(qi,{user:n.user,role:n.role,server:e})))}))}const _i=g.exports.createContext({server:null,loading:!0,users:[]});function Bi({children:e,name:t}){var a;const{data:r,loading:s}=function(e){const t={...Ln,...e};return n(Lr,t)}({variables:{name:t},skip:!t,fetchPolicy:"network-only"}),l=null==r?void 0:r.server,{data:o}=function(e){const t={...Ln,...e};return n(Or,t)}({variables:{serverId:null==l?void 0:l.id},skip:!l,fetchPolicy:"network-only"}),i=null!=(a=null==o?void 0:o.serverUsers)?a:[];return f.createElement(_i.Provider,{value:{server:l,loading:s&&!l,users:i}},e)}const ji=()=>{const{server:e,loading:t,users:n}=g.exports.useContext(_i);return{server:e,loading:t,users:n}};function Gi(){const{server:e,users:t}=ji(),[n]=Wr();return zi(""),f.createElement(lo,{header:f.createElement(kl,{refreshPosts:()=>{}}),rightSidebar:f.createElement(Hi,{server:e,serverUsers:t})},f.createElement(pt,null,f.createElement("title",null,null==e?void 0:e.displayName)),f.createElement(ro,{serverId:null==e?void 0:e.id,header:n?f.createElement(Ro,{server:e}):null}))}function Vi({post:e,users:t=[]}){var n,a,r;const{t:s}=C(),l=Kr((e=>e.showUsers));return f.createElement(dl,{right:!0,show:l},f.createElement("div",{className:"px-1"},(null==e?void 0:e.author)&&f.createElement(f.Fragment,null,f.createElement(fl,null,s("post.creator")),f.createElement(qi,{user:e.author,color:null==(a=null==(n=e.serverUser)?void 0:n.role)?void 0:a.color,role:null==(r=e.serverUser)?void 0:r.role})),t&&t.length>0&&f.createElement(f.Fragment,null,f.createElement(fl,null,s("post.participantCount",{count:t.length})),t.map((e=>{var t,n,a;return f.createElement(qi,{key:e.user.id,user:e.user,color:null==(n=null==(t=e.serverUser)?void 0:t.role)?void 0:n.color,role:null==(a=e.serverUser)?void 0:a.role})})))))}const Wi=e=>{if(!e.childComments||0===e.childComments.length)return 0;let t=0;return e.childComments.forEach((e=>{e.isDeleted||t++,e.childCount=Wi(e),t+=e.childCount})),t},Yi=e=>((e=(e=>{const t=Object.create(null);e.forEach((e=>t[e.id]={...e,childComments:[]}));const n=[];return e.forEach((e=>{e.parentComment?t[e.parentComment.id].childComments.push(t[e.id]):n.push(t[e.id])})),n})(e)).forEach((e=>e.childCount=Wi(e))),e),Zi=w("\n  text-base\n  text-primary\n  disabled:opacity-50\n  dark:disabled:bg-gray-600\n  bg-green-600\n  rounded\n  px-3\n  h-8\n  flex\n  items-center\n  disabled:cursor-not-allowed\n  focus:outline-none\n"),Ki=w("\n  text-base\n  text-tertiary\n  focus:outline-none\n  px-2\n  h-8\n  flex\n  items-center\n");function Qi({postId:e,parentCommentId:n,setOpen:a}){const[r,s]=g.exports.useState(""),[l,{loading:o}]=function(e){const n={...Ln,...e};return t(Fa,n)}({update(t,{data:{createComment:n}}){const a=t.readQuery({query:Sr,variables:{postId:e}});t.writeQuery({query:Sr,variables:{postId:e},data:{comments:[n,...a.comments]}})}}),{t:i}=C();return f.createElement("div",{className:"max-w-screen-md w-full"},f.createElement(po,{text:r,setText:s}),f.createElement("div",{className:"flex justify-end space-x-3 items-center pt-3"},f.createElement("button",{className:Ki,onClick:()=>{a(!1),s("")}},i("comment.create.cancel")),f.createElement("button",{className:Zi,disabled:!r||o,onClick:()=>{l({variables:{input:{postId:e,text:r,parentCommentId:n}}}).then((()=>{a(!1),s("")}))}},i("comment.create.submit"),o&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"}))))}const Ji=w("\n  ml-2\n  text-13\n  text-gray-500\n  hover:text-gray-700\n  dark:hover:text-gray-300\n  font-medium\n  leading-none\n  select-none\n  cursor-pointer\n");function Xi({comment:e,post:n,level:a=0,setParentComment:r}){var s,l,o,i,c,m,d,u;const{t:p}=C(),[h]=Wr(),v=xl(),[b]=function(e){const n={...Ln,...e};return t(Ra,n)}(),[E,x]=g.exports.useState(!1),[y,w]=Kr((e=>[e.replyingCommentId,e.setReplyingCommentId])),N=y===e.id;return e.isDeleted&&!e.childCount?null:f.createElement("div",{className:"relative md:rounded dark:bg-gray-800 "+(0===a?"":"pl-4")},f.createElement("div",{id:e.id}),f.createElement(Gs,{data:{type:Ns,comment:e,post:n}},f.createElement("div",{className:"flex px-3 pt-3"},f.createElement(Gs,{data:{type:ys,user:e.author}},f.createElement(Ml,{user:e.author,role:null==(s=e.serverUser)?void 0:s.role},f.createElement(Fl,{size:7,className:"cursor-pointer transition "+(e.author?"hover:opacity-90":"opacity-40 dark:bg-gray-700"),user:e.author}))),f.createElement("div",{className:"pl-3 pb-3 w-full "+(e.childCount&&!E?"border-b dark:border-gray-750":"")},f.createElement("div",{className:"flex items-end pb-1.5"},f.createElement(Gs,{data:{type:ys,user:e.author}},f.createElement(Ml,{user:e.author,role:null==(l=e.serverUser)?void 0:l.role},f.createElement("div",{className:"text-sm font-medium cursor-pointer hover:underline leading-none "+((null==(i=null==(o=e.serverUser)?void 0:o.role)?void 0:i.color)?"":"text-primary"),style:{color:null==(m=null==(c=e.serverUser)?void 0:c.role)?void 0:m.color}},null!=(u=null==(d=e.author)?void 0:d.username)?u:f.createElement("span",{className:"text-mid"},"[deleted]")))),f.createElement("div",{className:"text-11 text-mid font-medium pl-2 leading-none"},Re(new Date(e.createdAt))," ago")),f.createElement("div",{className:"prose prose-sm dark:prose-dark max-w-none",dangerouslySetInnerHTML:{__html:e.text}}),f.createElement("div",{className:"flex items-center pt-1 -ml-2"},f.createElement("div",{className:"flex items-center"},f.createElement("button",{type:"button",className:"focus:outline-none p-1 rounded-full dark:hover:bg-gray-750 transition cursor-pointer "+(e.voteType===ma.Up?"text-red-400":"text-mid"),onClick:()=>{if(!h)return void v();let t=e.voteCount;e.voteType===ma.Up?t--:e.voteType===ma.None?t++:e.voteType===ma.Down&&(t+=2),b({variables:{input:{commentId:e.id,type:e.voteType===ma.Up?ma.None:ma.Up}},optimisticResponse:{...e,voteType:e.voteType===ma.Up?ma.None:ma.Up,voteCount:t}})}},f.createElement(Pe,{className:"w-5 h-5"})),f.createElement("div",{className:`text-13 leading-none font-semibold ${e.voteType===ma.Up?"text-red-400":""} ${e.voteType===ma.Down?"text-blue-400":""} ${e.voteType===ma.None?"text-tertiary":""}`},e.voteCount),n.server.isDownvotesEnabled&&f.createElement("button",{type:"button",className:"focus:outline-none p-1 rounded-full dark:hover:bg-gray-750 transition cursor-pointer "+(e.voteType===ma.Down?"text-blue-400":"text-mid"),onClick:()=>{if(!h)return void v();let t=e.voteCount;e.voteType===ma.Down?t++:e.voteType===ma.None?t--:e.voteType===ma.Up&&(t-=2),b({variables:{input:{commentId:e.id,type:e.voteType===ma.Down?ma.None:ma.Down}},optimisticResponse:{...e,voteType:e.voteType===ma.Down?ma.None:ma.Down,voteCount:t}})}},f.createElement(Q,{className:"w-5 h-5"}))),!e.isDeleted&&f.createElement("div",{className:Ji,onClick:()=>{w(N?null:e.id)}},p(N?"comment.cancelReply":"comment.reply")),!!e.childCount&&f.createElement("div",{className:Ji,onClick:()=>x(!E)},E?`${p("comment.showReplies")} (${e.childCount})`:p("comment.hideReplies")),f.createElement(Gs,{leftClick:!0,data:{type:Ns,comment:e,post:n}},f.createElement("div",{className:"ml-2 text-disabled flex items-center cursor-pointer"},f.createElement(De,{className:"w-4 h-4"})))),N&&f.createElement("div",{className:"pt-3 max-w-screen-md w-full"},f.createElement(Qi,{postId:n.id,parentCommentId:e.id,setOpen:()=>w(null)}))))),f.createElement("div",{className:"pl-3"},!E&&e.childComments.map((e=>f.createElement(Xi,{key:e.id,comment:e,level:a+1,setParentComment:r,post:n})))))}function ec({postId:e}){const[t,n]=g.exports.useState(!1),[a]=Wr(),{t:r}=C();return f.createElement(f.Fragment,null,t?f.createElement("div",{className:"dark:bg-gray-800 pt-3 pb-3 px-3 rounded flex"},f.createElement("div",{className:"pr-3 mr-3 border-r dark:border-gray-750 inline-block h-7"},f.createElement(Fl,{user:a,size:7})),f.createElement(Qi,{postId:e,setOpen:n})):f.createElement("div",{onClick:()=>n(!0),className:"dark:bg-gray-700 h-13 flex items-center rounded transition dark:hover:bg-gray-650 cursor-pointer"},f.createElement("div",{className:"px-3 border-r dark:border-gray-650 h-7"},f.createElement(Fl,{user:a,size:7})),f.createElement("div",{className:"text-sm text-secondary px-3"},r("post.createComment"))))}function tc({post:e}){const t=Kr((e=>e.canGoBack)),{push:n,goBack:a}=U();return f.createElement("header",{id:"header",className:"h-12 min-h-[3rem] items-center bg-white dark:bg-gray-750 border-b dark:border-gray-800 shadow flex items-center"},f.createElement("div",{className:"flex items-center font-semibold text-base text-primary pl-4"},f.createElement("div",{className:"highlightable mr-3 cursor-pointer",onClick:()=>{t?a():n(`/+${null==e?void 0:e.server.name}`)}},f.createElement(_t,{className:"w-5 h-5"})),f.createElement("span",{className:"line-clamp-1"},null==e?void 0:e.title)),f.createElement("div",{className:"ml-auto pl-6 pr-4"},f.createElement(Nl,null)))}function nc({postId:e}){const[t]=Wr(),{data:a}=function(e){const t={...Ln,...e};return n(Fr,t)}({variables:{id:e},fetchPolicy:"cache-and-network"}),r=null==a?void 0:a.post,{data:s}=function(e){const t={...Ln,...e};return n(Sr,t)}({variables:{postId:e}}),l=g.exports.useMemo((()=>{var e;return Yi(null!=(e=null==s?void 0:s.comments)?e:[])}),[null==s?void 0:s.comments]),o=g.exports.useMemo((()=>((e,t)=>e.filter((e=>{var n;return!!e.author&&e.author.id!==(null==(n=null==t?void 0:t.author)?void 0:n.id)})).map((e=>({user:e.author,serverUser:e.serverUser}))).filter(((e,t,n)=>n.findIndex((t=>t.user.id===e.user.id))===t)))(l,r)),[l]);return f.createElement(lo,{header:r?f.createElement(tc,{post:r}):null,rightSidebar:r?f.createElement(Vi,{post:r,users:o}):null},f.createElement(pt,null,f.createElement("title",null,r?`${r.title} – ${r.server.displayName}`:null)),r?f.createElement("div",{className:"max-h-full h-full scrollbar-custom dark:bg-gray-750 overflow-y-auto"},f.createElement("div",{className:"md:pt-4 md:px-4 px-0 pt-0"},!!r&&f.createElement(ao,{post:r,isPostPage:!0})),!!t&&f.createElement("div",{className:"pt-4 px-4"},f.createElement(ec,{postId:e})),f.createElement("div",{className:"space-y-2 md:px-4 pt-4 px-0 pb-96"},l.map((e=>f.createElement(Xi,{key:e.id,comment:e,post:r}))))):f.createElement(Zr,null))}function ac({name:e,icon:t}){const[n,a]=Kr((e=>[e.postsSort,e.setPostsSort])),{server:r}=Ht(),{pathname:s}=I(),{push:l}=U(),o=n===e&&("/"===s||s===`/${r}`),i=t;return f.createElement(hl,{onClick:()=>{a(e),l(r?`/${r}`:"/")},active:o},f.createElement(i,{className:"w-5 h-5 mr-3 text-tertiary"}),e)}function rc(){const{t:e}=C();return f.createElement("div",{className:"space-y-0.5"},f.createElement(ac,{name:e("post.feed.sort.hot"),icon:fe}),f.createElement(ac,{name:e("post.feed.sort.new"),icon:ve}),f.createElement(ac,{name:e("post.feed.sort.top"),icon:he}))}function sc(){var e,t,n,a;const{t:r}=C(),[s]=Wr(),l=null!=(e=null==s?void 0:s.groups)?e:[],o=null!=(n=null==(t=null==s?void 0:s.relatedUsers)?void 0:t.filter((e=>e.showChat)))?n:[],i=l.concat(o).sort(((e,t)=>(e.lastMessageAt?new Date(e.lastMessageAt).getTime():0)-(t.lastMessageAt?new Date(t.lastMessageAt).getTime():0))),{data:c}=Tr({skip:!s,fetchPolicy:"cache-and-network"}),m=(null!=(a=null==c?void 0:c.replies)?a:[]).filter((e=>!e.isRead)).length,[d,u]=Kr((e=>[e.postsFeed,e.setPostsFeed])),{pathname:p}=I(),{push:g}=U();return f.createElement(f.Fragment,null,f.createElement(dl,null,f.createElement("div",{className:"h-12 border-b dark:border-gray-850 shadow flex items-center px-5 text-base font-medium"},f.createElement(_o,{className:"h-4"})),f.createElement("div",{className:"px-1.5"},!!s&&f.createElement("div",{className:"space-y-0.5 pt-3"},f.createElement(hl,{to:"/inbox"},f.createElement(gt,{className:"mr-3 h-5 w-5"}),r("inbox.title"),!!m&&f.createElement("div",{className:"ml-auto"},f.createElement(rl,{count:m})))),f.createElement(fl,null,"Feed"),f.createElement("div",{className:"space-y-0.5"},!!s&&f.createElement(hl,{active:"Joined"===d&&"/"===p,onClick:()=>{u("Joined"),"/"!==p&&g("/")}},f.createElement(ie,{className:"mr-3 h-5 w-5"}),"Your Feed"),f.createElement(hl,{active:("Featured"===d||!s&&"Joined"===d)&&"/"===p,onClick:()=>{u("Featured"),"/"!==p&&g("/")}},f.createElement(Z,{className:"mr-3 h-5 w-5"}),"Featured"),f.createElement(hl,{active:"All"===d&&"/"===p,onClick:()=>{u("All"),"/"!==p&&g("/")}},f.createElement(Bt,{className:"mr-3 h-5 w-5"}),"Universe")),f.createElement(fl,null,"Posts"),f.createElement(rc,null),!!s&&f.createElement(f.Fragment,null,f.createElement(fl,{plusLabel:"Create DM"},r("dm.title")),f.createElement("div",{className:"space-y-0.5"},!!i&&i.map((e=>{if("Group"===e.__typename)return f.createElement("div",null,"Group");if("User"===e.__typename){const t=e;return f.createElement(lc,{user:t,key:`user-${t.id}`})}})))))))}function lc({user:e}){C();const[t]=rr(),{push:n}=U(),{pathname:a}=I(),[r]=_a(),[{isOver:s,canDrop:l},o]=jt({accept:ul,drop:(t,a)=>{n(`/dm/@${e.username}`),r({variables:{input:{userId:e.id,text:`${location.origin}${t.relativeUrl}`}}})},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})});return f.createElement("div",null,f.createElement(Gs,{data:{type:ys,user:e,isDm:!0}},f.createElement(hl,{ref:o,large:!0,to:`/dm/@${e.username}`,key:`user-${e.id}`},f.createElement(Fl,{size:9,showOnline:!0,user:e,dotClassName:"ring-3 w-2.5 h-2.5 dark:ring-gray-800"}),f.createElement("span",{className:"ml-3"},e.username),f.createElement("div",{className:"ml-auto"}),f.createElement("div",{className:"pr-2"},!!e.unreadCount&&f.createElement(rl,{count:e.unreadCount})),f.createElement(ne,{onClick:r=>{r.stopPropagation(),r.preventDefault(),t({variables:{input:{userId:e.id}}}),a===`/dm/@${e.username}`&&n("/")},className:"group-hover:visible invisible w-5 h-5 cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}))))}function oc({open:e,setOpen:n}){const[a]=Wr(),[r,s]=g.exports.useState(!1),{register:l,handleSubmit:o,watch:i,reset:c,formState:{errors:m}}=ae({mode:"onChange"}),d=i("password"),u=i("currentPassword"),[p,{loading:h}]=function(e){const n={...Ln,...e};return t(wr,n)}(),[v]=function(e){const n={...Ln,...e};return t(Nr,n)}(),b=()=>{n(!1),setTimeout((()=>c()),300)};return f.createElement(f.Fragment,null,f.createElement(Qs,{isOpen:e,close:b},f.createElement("div",{className:"min-w-full h-full min-h-full h-screen dark:bg-gray-800 scrollbar-custom",onClick:e=>e.stopPropagation()},f.createElement("div",{className:"w-full relative flex"},f.createElement("button",{className:"absolute top-3 right-3 focus:outline-none rounded-full transition dark:hover:bg-gray-700 p-2",onClick:b},f.createElement(Gt,{className:"w-6 h-6 text-tertiary"})),f.createElement("div",{className:"w-1/3 min-w-[14rem] dark:bg-gray-800 flex justify-end px-4 py-12"},f.createElement("div",{className:"w-56"},f.createElement(fl,null,"User Settings"),f.createElement(hl,null,"My Account"),f.createElement(hl,{onClick:()=>{localStorage.removeItem("token"),location.reload()}},f.createElement("span",{className:"text-red-500"},"Log Out")))),f.createElement("div",{className:"w-2/3 px-10 py-16 dark:bg-gray-750 min-h-screen"},f.createElement("div",{className:"max-w-screen-sm text-left"},f.createElement("div",{className:"font-semibold text-primary uppercase mb-6"},"My Account"),f.createElement("form",{onSubmit:o((({password:e,currentPassword:t})=>{p({variables:{input:{password:e,currentPassword:t}}}).then((()=>{S.success("Saved changes!"),c()}))})),className:"rounded-lg dark:bg-gray-800 p-4"},f.createElement("div",{className:"flex items-center"},f.createElement("input",{type:"file",accept:"image/png,image/jpeg,image/webp,image/gif",name:"avatarFile",id:"avatarFile",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&v({variables:{input:{avatarFile:t}}})}}),f.createElement("label",{htmlFor:"avatarFile",className:"relative group"},f.createElement(Fl,{user:a,size:20}),f.createElement("div",{className:"absolute rounded-full cursor-pointer inset-0 bg-black opacity-0 group-hover:opacity-100 bg-opacity-50 z-10 transition flex items-center justify-center"},f.createElement(se,{className:"w-1/2 h-1/2"}))),f.createElement("div",{className:"flex items-end ml-6"},f.createElement("div",{className:"font-semibold text-xl text-primary"},a.username))),f.createElement("div",{className:"mt-5 space-y-5"},f.createElement("div",null,f.createElement("label",{htmlFor:"password",className:"label"},"New Password"),f.createElement("input",{className:"textbox",id:"password",...l("password",{minLength:6,required:!0}),type:"password",minLength:6}),m.password&&f.createElement("div",{className:"error"},"Password must be at least 6 characters")),f.createElement("div",null,f.createElement("label",{htmlFor:"currentPassword",className:"label"},"Current Password"),f.createElement("input",{className:"textbox",id:"currentPassword",...l("currentPassword",{required:!0}),type:"password"}))),f.createElement("div",{className:"flex items-center mt-5"},f.createElement("div",{className:"ml-auto"}),f.createElement("button",{type:"submit",disabled:h||!u||!d||(null==d?void 0:d.length)<6,className:"disabled:opacity-50 disabled:cursor-not-allowed rounded px-4 h-9 text-sm text-primary bg-green-600 focus:outline-none flex items-center"},"Save Changes",h&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"})))),f.createElement("div",{className:"mt-10 flex items-center justify-end"},f.createElement("button",{type:"button",onClick:()=>s(!0),className:"delete-button"},"Delete Account")))))),f.createElement(ic,{deleteOpen:r,setDeleteOpen:s})))}function ic({deleteOpen:e,setDeleteOpen:n}){const[a,r]=g.exports.useState(""),[s,{loading:l}]=function(e){const n={...Ln,...e};return t(kr,n)}(),{push:o}=U(),i=F();return f.createElement(Qs,{isOpen:e,close:()=>n(!1)},f.createElement("div",{className:"max-w-md w-full rounded-md dark:bg-gray-800 shadow-lg p-4"},f.createElement("div",{className:"text-red-400 text-2xl font-semibold"},"Delete Account"),f.createElement("div",{className:"text-secondary pb-5 pt-3 text-base"},"You will not be able to recover your account."),f.createElement("div",{className:"text-left"},f.createElement("label",{htmlFor:"confirmPassword",className:"label"},"Password"),f.createElement("input",{id:"confirmPassword",name:"confirmPassword",className:"textbox",value:a,onChange:e=>r(e.target.value),type:"password"})),f.createElement("div",{className:"flex items-center justify-end space-x-4 pt-4"},f.createElement("button",{className:"cancel-button",type:"button",onClick:()=>n(!1)},"Cancel"),f.createElement("button",{className:"delete-button",type:"button",disabled:!a||l,onClick:()=>{s({variables:{input:{password:a}}}).then((()=>{n(!1),o("/"),i.resetStore()}))}},"Delete Account",l&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"})))))}function cc(){const[e]=Wr(),n=[0,14],[a,r]=g.exports.useState(!1),[s,l]=Kr((e=>[e.updateAvailable,e.setUpdateAvailable]));g.exports.useEffect((()=>{window.electron&&window.electron.on("updateAvailable",(()=>{l(!0)}))}),[]);const[o]=function(e){const n={...Ln,...e};return t($r,n)}();g.exports.useEffect((()=>{if(e){const e=setInterval((()=>{o({variables:{input:{onlineStatus:Yn.Online}}})}),15e3);return()=>clearInterval(e)}}),[e]),(()=>{const e=os()})();const[i,c,m,d]=El();return f.createElement(f.Fragment,null,!!e&&f.createElement(oc,{open:a,setOpen:r}),f.createElement("div",{className:"flex items-center shadow-md px-3 bottom-0 h-5.5 bg-gray-700 z-50"},e?f.createElement(f.Fragment,null,f.createElement(Fl,{size:4.5,className:"mr-2",user:e}),f.createElement("div",{className:"text-primary text-13 font-medium cursor-pointer"},e.username),f.createElement("div",{className:"w-2 h-2 rounded-full bg-green-500 ml-2"})):f.createElement("div",{className:"flex items-center text-primary text-13 font-medium"},f.createElement("div",{className:"cursor-pointer hover:underline",onClick:()=>{d(!1),c(!0)}},"Log In"),"  ·  ",f.createElement("div",{className:"cursor-pointer hover:underline",onClick:()=>{d(!0),c(!0)}},"Create account")),f.createElement("div",{className:"ml-auto flex items-center space-x-4 text-primary"},f.createElement(x,{content:""+(window.electron&&s?"Update available":"Up to date!")},f.createElement("div",{className:"flex items-center "+(window.electron&&s?"cursor-pointer":""),onClick:()=>{window.electron&&s&&window.electron.restart()}},f.createElement("div",{className:"text-xs font-medium "+(s&&window.electron?"text-green-500":"text-tertiary")},"Comet v","0.0.85"),window.electron&&s&&f.createElement("div",{className:"pl-2"},f.createElement(Vt,{className:"w-4.5 h-4.5 text-green-500 cursor-pointer"})))),!!e&&f.createElement(f.Fragment,null,f.createElement(x,{content:"Notifications",offset:n},f.createElement(b,{to:"/inbox"},f.createElement(Wt,{className:"w-4.5 h-4.5 cursor-pointer"}))),f.createElement(x,{content:"Settings",offset:n},f.createElement("div",{onClick:()=>r(!0)},f.createElement(Yt,{className:"w-4.5 h-4.5 cursor-pointer"})))))))}const mc=e=>w(`\n  h-1.5\n  w-1.5\n  rounded-full\n  dark:bg-gray-100\n  mr-2\n  ${e?"opacity-100":"opacity-0"}\n`),dc=e=>w(`\n  flex\n  items-center\n  cursor-pointer\n  ${e?"text-primary":"text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}\n`);function uc({open:e,setOpen:n,server:a,channel:r}){var s;const{handleSubmit:l,register:o,setValue:i,watch:c,reset:m}=ae({mode:"onChange"}),d=c("name");g.exports.useEffect((()=>{d&&i("name",d.toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]+/,""))}),[d]);const[u,p]=g.exports.useState(null!=(s=null==r?void 0:r.type)?s:On.Public),{push:h}=U(),[v,{loading:b}]=function(e){const n={...Ln,...e};return t(Sa,n)}({update(e,{data:{createChannel:t}}){e.writeQuery({query:Lr,variables:{name:a.name},data:{server:{...a,channels:[...a.channels,t]}}})}}),[E,{loading:y}]=function(e){const n={...Ln,...e};return t(Ua,n)}(),w=()=>{n(!1)};g.exports.useEffect((()=>{r?(i("name",r.name),i("description",r.description||""),p(r.type)):(m(),p(On.Public))}),[r]);const N=!r&&!!d&&a.channels.map((e=>e.name)).includes(d);return f.createElement(Js,{onSubmit:l((({name:e,description:t})=>{r?E({variables:{input:{description:t,channelId:r.id,type:u}}}).then((()=>{w()})):v({variables:{input:{name:e,description:t,serverId:a.id,type:u}}}).then((({data:{createChannel:e}})=>{w(),h(`/+${a.name}/#${e.name}`),m(),p(On.Public)}))})),open:e,close:w,closeOnOverlayClick:!0,buttons:f.createElement("button",{type:"submit",className:"form-button-submit",disabled:!r&&!d||N||b||y},b||y?f.createElement(es,{className:"w-5 h-5"}):f.createElement(te,{className:"w-5 h-5"}))},f.createElement("div",{className:"p-5 space-y-4 w-full text-left"},f.createElement("div",{className:"flex items-center font-semibold text-primary"},f.createElement(as,{server:a,size:6,className:"rounded-md mr-2"}),f.createElement("div",{className:"truncate"},a.displayName),"  ·  ",r?"Edit":"Create"," Channel",f.createElement(ne,{className:"h-5 w-5 highlightable ml-auto",onClick:()=>w()})),f.createElement("div",null,f.createElement("div",{className:"relative"},f.createElement("input",{...o("name",{required:!0,maxLength:100}),maxLength:100,className:"form-input-icon",spellCheck:!1,autoCapitalize:"none",id:"name",placeholder:"Channel name",disabled:!!r}),f.createElement(ts,{className:"form-input-icon-icon"})),N&&f.createElement("div",{className:"form-error"},"Channel already exists")),f.createElement("textarea",{placeholder:"Description",...o("description"),className:"form-textarea"}),f.createElement("div",{className:"flex items-center space-x-4 text-sm text-tertiary"},f.createElement(x,{content:"Anyone can view and send messages"},f.createElement("div",{onClick:()=>p(On.Public),className:dc(u===On.Public)},f.createElement("div",{className:mc(u===On.Public)}),"Public")),f.createElement(x,{content:"Anyone can view, but only members with permission can send messages"},f.createElement("div",{onClick:()=>p(On.Restricted),className:dc(u===On.Restricted)},f.createElement("div",{className:mc(u===On.Restricted)}),"Restricted")),f.createElement(x,{content:"Only members with permission can view and send messages"},f.createElement("div",{onClick:()=>p(On.Private),className:dc(u===On.Private)},f.createElement("div",{className:mc(u===On.Private)}),"Private")))))}function pc({channel:e,server:t}){const{t:n}=C(),[a]=Us({server:t,permissions:[ia.ManageChannels]}),{hash:r}=I(),s=`/+${null==t?void 0:t.name}/#${e.name}`,l=r.substring(1)===e.name,[o,i]=g.exports.useState(!1),[c,m]=g.exports.useState(!1);return f.createElement(f.Fragment,null,f.createElement(uc,{open:c,setOpen:m,channel:e,server:t}),f.createElement(Gs,{data:{type:Ss,channel:e,server:t,openDelete:()=>i(!0),openEdit:()=>m(!0)}},f.createElement(hl,{to:s,active:l},e.isUnread&&!l&&f.createElement("div",{className:"absolute -left-1.5 top-1/2 transform -translate-y-1/2 rounded-r-full dark:bg-gray-100 h-2 w-1"}),f.createElement(ts,{className:"w-5 h-5 mr-3 text-tertiary"}),f.createElement("span",{className:""+(e.isUnread?"text-primary":"")},e.name),f.createElement("div",{className:"ml-auto"}),!!e.mentionCount&&f.createElement("div",{className:a?"group-hover:hidden block":""},f.createElement(rl,{count:e.mentionCount})),a&&f.createElement(x,{content:n("channel.edit")},f.createElement("div",{className:"group-hover:block hidden",onClick:e=>{e.stopPropagation(),e.preventDefault(),m(!0)}},f.createElement(Yt,{className:"w-4 h-4 text-tertiary"}))))),f.createElement(gc,{open:o,setOpen:i,channel:e,server:t}))}function gc({server:e,channel:n,open:a,setOpen:r}){const[s,{loading:l}]=function(e){const n={...Ln,...e};return t(Ia,n)}(),{push:o}=U(),{pathname:i,hash:c}=I();return f.createElement(Js,{closeOnOverlayClick:!0,small:!0,open:a,close:()=>r(!1),buttons:f.createElement(f.Fragment,null,f.createElement("button",{className:"form-button-cancel",onClick:()=>r(!1),type:"button"},"Cancel"),f.createElement("button",{className:"form-button-delete",disabled:l,onClick:()=>{s({variables:{input:{channelId:n.id}},update(t,{data:{deleteChannel:n}}){t.writeQuery({query:Lr,variables:{name:e.name},data:{server:{...e,channels:e.channels.filter((e=>e.id!==n))}}})}}).then((()=>{r(!1),i===`/+${e.name}/`&&c===`#${n.name}`&&o(`/+${e.name}`)}))},type:"button"},l?f.createElement(es,null):"Delete"))},f.createElement("div",{className:"px-4 pt-4 pb-10"},f.createElement("div",{className:"text-lg font-medium text-secondary"},"Delete ",f.createElement("span",{className:"text-primary"},"#",n.name),"?"),f.createElement("div",{className:"text-tertiary pt-3 text-sm"},"Messages in this channel will be lost.")))}function hc({server:e}){const{t:t}=C(),[n,a]=g.exports.useState(!1),[r]=Us({server:e,permissions:[ia.ManageChannels]});return r?f.createElement(f.Fragment,null,f.createElement(fl,{onClick:()=>a(!0),plusLabel:t("channel.create")},"Channels"),f.createElement(uc,{open:n,setOpen:a,server:e})):f.createElement(fl,null,"Channels")}function vc({open:e,setOpen:n,server:a}){var r;const{t:s}=C(),[l,o]=g.exports.useState(null==(r=a.roles.find((e=>e.isDefault)))?void 0:r.id),i=a.roles.find((e=>e.id===l)),[c,m]=g.exports.useState(i.color),[d,u]=g.exports.useState(i.name),[p,h]=g.exports.useState(i.permissions);g.exports.useEffect((()=>{h(i.permissions),u(i.name),m(i.color)}),[i]);const[v]=function(e){const n={...Ln,...e};return t(cr,n)}({update(e,{data:{deleteRole:t}}){e.writeQuery({query:Lr,variables:{name:a.name},data:{server:{...a,roles:a.roles.filter((e=>e.id!==t))}}})}}),[b,{loading:E}]=function(e){const n={...Ln,...e};return t(ir,n)}(),y=!((e,t)=>{if(e.length!==t.length)return!1;for(const n of e)if(!t.includes(n))return!1;for(const n of t)if(!e.includes(n))return!1;return!0})(p,i.permissions)||d!==i.name||c!==i.color,w=[ia.SendMessages,ia.RestrictedChannels,ia.PrivateChannels,ia.ManageChannels,ia.ManageServer,ia.ManagePosts,ia.ManageComments,ia.DisplayRoleSeparately,ia.Admin],[N,k]=g.exports.useState(!1),[$,S]=g.exports.useState(""),[U,{loading:I}]=function(e){const n={...Ln,...e};return t(or,n)}({update(e,{data:{createRole:t}}){e.writeQuery({query:Lr,variables:{name:a.name},data:{server:{...a,roles:[t,...a.roles]}}})}}),P=()=>{$?U({variables:{input:{serverId:a.id,name:$}}}).then((e=>{S(""),k(!1),o(e.data.createRole.id)})):k(!1)};return f.createElement(Js,{open:e,close:()=>{n(!1)},closeOnOverlayClick:!0,large:!0},f.createElement("div",{className:"flex"},f.createElement("div",{className:"h-[40rem] max-h-screen w-60 dark:bg-gray-750 rounded-l-lg space-y-0.5 overflow-y-auto scrollbar-custom p-1.5"},N?f.createElement("div",{className:"relative py-1 px-1.5"},f.createElement("input",{className:"form-input-password",placeholder:"Name",autoFocus:!0,value:$,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.code&&d&&P()},type:"text",maxLength:100}),I?f.createElement(es,{className:"form-show-password-button"}):f.createElement(te,{onClick:P,className:"form-show-password-button"})):f.createElement(hl,{light:!0,onClick:()=>k(!0)},"Add Role",f.createElement(ue,{className:"w-5 h-5 ml-auto"})),null==a?void 0:a.roles.map((e=>f.createElement(hl,{key:e.id,light:!0,active:l===e.id,onClick:()=>o(e.id)},f.createElement("span",{style:{color:e.color}},e.name),!e.isDefault&&f.createElement(x,{content:"Delete Role"},f.createElement("div",{onClick:()=>{v({variables:{input:{roleId:e.id}}}),l===e.id&&o(a.roles.find((e=>e.isDefault)))},className:"group-hover:visible invisible ml-auto highlightable"},f.createElement(Zt,{className:"w-4 h-4"}))))))),f.createElement("div",{className:"relative py-5 px-7 w-full h-[40rem] overflow-y-auto max-h-screen scrollbar-thin dark:scrollbar-thumb-gray-850 scrollbar-track-transparent scrollbar-thumb-rounded-md rounded-tr-lg"},f.createElement("div",{className:"flex items-center justify-between pb-5"},f.createElement("div",{className:"text-primary text-base font-semibold"},"Edit Role - ",i.name,!!(null==i?void 0:i.isDefault)&&" (Default)")),f.createElement("div",{className:"mb-6"},f.createElement("label",{className:"label"},"Name"),f.createElement("input",{className:"form-input",placeholder:"Name",value:d,onChange:e=>u(e.target.value),id:"name"})),f.createElement("div",{className:"label"},"Color"),f.createElement("div",{className:"grid grid-cols-4 gap-2 mb-10 w-60"},Object.keys(Ul).map((e=>f.createElement("div",{key:e,className:"h-6 rounded relative cursor-pointer",style:{backgroundColor:Ul[e][500]},onClick:()=>{c===Ul[e][500]?m(null):m(Ul[e][500])}},c===Ul[e][500]&&f.createElement("div",{className:"inset-0 absolute flex items-center justify-center"},f.createElement(te,{className:"w-4 h-4 text-white"})))))),f.createElement("div",{className:"label"},"Permissions"),f.createElement("div",{className:"space-y-0.5 divide-y divide-gray-700"},w.map((e=>f.createElement("div",{key:e,className:"flex w-full py-4 text-base cursor-pointer "+(p.includes(ia.Admin)&&e!==ia.Admin?"opacity-50":""),onClick:()=>{p.includes(ia.Admin)&&e!==ia.Admin||(p.includes(e)?h(p.filter((t=>t!==e))):h([...p,e]))}},f.createElement("div",null,f.createElement("div",{className:"font-medium"},s(`permissions.server.${e}.title`)),!!s(`permissions.server.${e}.description`)&&f.createElement("div",{className:"text-13 text-tertiary pt-1"},s(`permissions.server.${e}.description`))),f.createElement("div",{className:"pl-6 ml-auto"},f.createElement(Xs,{disabled:p.includes(ia.Admin)&&e!==ia.Admin,green:!0,checked:p.includes(e),onChange:()=>{p.includes(e)?h(p.filter((t=>t!==e))):h([...p,e])}})))))),f.createElement("div",{className:"h-16"}),f.createElement(me,null,!!y&&f.createElement(de.div,{initial:{y:"500px"},animate:{y:0},exit:{y:"500px"},transition:{ease:[.4,0,.2,1],duration:.15},className:"sticky z-50 flex items-center rounded-lg shadow-lg bottom-0 w-full dark:bg-gray-725 pr-3 pl-6 h-14 transform transition "},f.createElement("div",{className:"text-secondary text-sm"},"Changes not saved"),f.createElement("div",{className:"flex items-center space-x-3 ml-auto"},f.createElement("button",{type:"button",className:"form-button-cancel",onClick:()=>{u(i.name),m(i.color),h(i.permissions)}},"Discard"),f.createElement("button",{type:"button",disabled:!d||!y||E,className:"form-button-submit",onClick:()=>b({variables:{input:{roleId:l,name:d,color:c,permissions:p}}})},"Save",E&&f.createElement(es,{className:"w-5 h-5 text-primary ml-3"}))))))))}function fc(){const{server:e}=ji(),[n]=Wr(),[a,r]=g.exports.useState(!1),[s,l]=g.exports.useState(!1),[o,i]=Us({server:e,permissions:[ia.ManageServer,ia.PrivateChannels]}),[c,{loading:m}]=function(e){const n={...Ln,...e};return t(gr,n)}(),[d,{loading:u}]=vr(),p=Ws(null==e?void 0:e.category);return e?f.createElement(f.Fragment,null,f.createElement(tl,{open:a,setOpen:r,server:e}),f.createElement(vc,{open:s,setOpen:l,server:e,key:e.id}),f.createElement(dl,null,e.bannerUrl?f.createElement("div",{className:"h-20 relative bg-center bg-cover bg-no-repeat "+(e.bannerUrl?"":"bg-gradient-to-br from-red-400 to-indigo-600"),style:e.bannerUrl?{backgroundImage:`url(${e.bannerUrl})`}:{}}):f.createElement("div",{className:"h-12 border-b dark:border-gray-850 shadow flex items-center px-5 text-base font-medium"},f.createElement(_o,{className:"h-4"})),f.createElement("div",{className:"px-1.5 pt-4"},f.createElement("div",{className:"shadow-inner dark:bg-gray-850 p-2.5 space-y-2.5 rounded"},f.createElement("div",{className:"flex items-center"},f.createElement(as,{server:e,size:6,className:"rounded-md mr-2 dark:bg-gray-750"}),f.createElement("div",{className:"font-semibold text-primary pr-2.5 truncate"},e.displayName),!!n&&n.id!==e.owner.id&&f.createElement("button",{className:(h=e.isJoined,v=m||u,w(`\n  ml-auto\n  px-3\n  h-6\n  rounded\n  text-13\n  font-medium\n  focus:outline-none\n  ${h?"border border-gray-700 text-blue-500":"bg-blue-500 text-primary"}\n  ${v?"opacity-50":"opacity-100"}\n`)),type:"button",onClick:()=>{m||u||(e.isJoined?d({variables:{input:{serverId:e.id}}}):c({variables:{input:{serverId:e.id}}}))}},e.isJoined?"Leave":"Join")),f.createElement("div",{className:"text-13 text-secondary pb-1.5"},e.description||"No description"),f.createElement("div",{className:"flex items-center justify-between"},f.createElement("div",{className:"text-xs font-medium flex items-center text-tertiary"},f.createElement(ge,{className:"w-4 h-4 mr-2.5"}),e.userCount," Member",1===e.userCount?"":"s"),f.createElement("div",{className:"text-xs font-medium flex items-center text-tertiary"},f.createElement(p,{className:"w-4 h-4 mr-2.5"}),e.category))),f.createElement(fl,{plusLabel:"Create Post"},"Posts"),f.createElement(rc,null),f.createElement(hc,{server:e}),f.createElement("div",{className:"space-y-0.5"},e.channels.filter((e=>e.type!==On.Private||i)).map((t=>f.createElement(pc,{key:t.id,channel:t,server:e})))),o&&f.createElement(f.Fragment,null,f.createElement(fl,null,"Admin"),f.createElement("div",{className:"space-y-0.5"},f.createElement(hl,{onClick:()=>r(!0)},f.createElement(Yt,{className:"mr-3 w-5 h-5"}),"Edit Planet"),f.createElement(hl,{onClick:()=>l(!0)},f.createElement(Kt,{className:"mr-3 w-5 h-5"}),"Manage Roles")))))):null;var h,v}function bc({channel:e}){var t;return f.createElement(yl,{showDivider:!!(null==e?void 0:e.description),icon:f.createElement(ts,{className:"w-5 h-5"}),title:`${null!=(t=null==e?void 0:e.name)?t:""}`},(null==e?void 0:e.description)&&f.createElement("div",{className:"text-13 text-tertiary font-medium leading-5 truncate"},null==e?void 0:e.description),f.createElement("div",{className:"ml-auto pl-6 flex items-center space-x-5"},f.createElement(Nl,null)))}function Ec({channelName:e}){var t;const{server:n,users:a}=ji(),r=(null!=(t=null==n?void 0:n.channels)?t:[]).find((t=>t.name===e));return zi(`channel/${null==r?void 0:r.id}`),n&&!r?f.createElement(Qt,{to:`/+${n.name}`}):f.createElement(lo,{header:f.createElement(bc,{channel:r}),rightSidebar:f.createElement(Hi,{channel:r,serverUsers:a,server:n})},f.createElement(pt,null,f.createElement("title",null,r&&n?`#${null==r?void 0:r.name} – ${null==n?void 0:n.displayName}`:null)),!!r&&f.createElement(Li,{server:n,channel:r,users:a.map((e=>e.user))}))}const xc=()=>{var e,t,n,r;const[s]=Wr(),{push:l}=U(),{pathname:o,hash:i}=I(),c=P(o,{path:"/:server"}),m=null==(e=null==c?void 0:c.params)?void 0:e.server.substring(1),d=m&&i?i.substring(1):null,u=P(o,{path:"/dm/:username"}),p=null==(n=null==(t=null==u?void 0:u.params)?void 0:t.username)?void 0:n.substring(1),h=P(o,{path:"/group/:groupId"}),v=null==(r=null==h?void 0:h.params)?void 0:r.groupId,[f,b]=g.exports.useState(!0);g.exports.useEffect((()=>{window.electron&&(window.electron.on("windowOpened",(()=>b(!0))),window.electron.on("windowClosed",(()=>b(!1))))}),[]),function(e){const t={...Ln,...e};a(Hr,t)}({skip:!s,onSubscriptionData({client:e,subscriptionData:t}){var n,a,r,o,i,c,u,g;if(t.data){const h=t.data.messageChanged,b=null==h?void 0:h.added,E=null==h?void 0:h.deleted;let x;if(null==h||h.updated,b){x=b;const t=null==(n=x.channel)?void 0:n.id,c=null==(a=x.group)?void 0:a.id,u=x.toUser?null==(r=x.author)?void 0:r.id:void 0,g={query:Pr,variables:{userId:u,groupId:c,channelId:t,cursor:null}},h=e.cache.readQuery(g);h&&!h.messages.messages.map((e=>e.id)).includes(x.id)&&e.cache.writeQuery({...g,data:{messages:{...h.messages,messages:[...h.messages.messages,x]}}});const E=p&&x.toUser&&p===x.toUser.username,y=v&&x.group&&v===x.group.id,w=d&&x.channel&&x.channel.server.name===m&&d===x.channel.name;if(x.toUser&&!E){const t=e.cache.readFragment({fragment:va,id:`User:${x.author.id}`});t&&e.cache.writeFragment({fragment:va,id:`User:${x.author.id}`,data:{...t,unreadCount:t.unreadCount+1}})}else if(x.group&&!y){const t=e.cache.readFragment({fragment:fa,id:`User:${x.group.id}`});t&&e.cache.writeFragment({fragment:fa,id:`Group:${x.group.id}`,data:{...t,unreadCount:t.unreadCount+1}})}else if(x.channel&&!w){const t=e.cache.readFragment({fragment:ua,id:`Channel:${x.channel.id}`});if(t){console.log(t);const n={...t,isUnread:!0};(x.isEveryoneMentioned||s&&x.mentionedUsers.map((e=>e.id)).includes(s.id))&&(n.mentionCount=t.mentionCount+1),e.cache.writeFragment({fragment:ua,id:`Channel:${x.channel.id}`,data:n})}}if(x.author.id!==s.id){if((!window.electron||window.electron&&f)&&(y||E||w))return;if(x.type===Vn.Normal&&x.text&&(x.toUser||x.group||x.isEveryoneMentioned||s&&x.mentionedUsers.map((e=>e.id)).includes(s.id))){let e=`@${x.author.username}`;x.channel&&(e+=` · #${x.channel.name}`),x.group&&(e+=` · #${x.group.displayName}`),Do({title:e,body:yc(x.text),icon:null!=(o=x.author.avatarUrl)?o:(window.electron?".":"")+"/icons/icon.png",timestamp:x.createdAt,onClick:()=>{u?l(`/dm/@${x.author.username}`):c?l(`/group/${c}`):t&&l(`/+${x.server.name}/#${x.channel.name}`),window.electron&&window.electron.show()}})}else x.type===Vn.FriendRequestReceived&&Do({title:`@${x.author.username}`,body:"Sent a friend request",icon:null!=(i=x.author.avatarUrl)?i:(window.electron?".":"")+"/icons/icon.png",timestamp:x.createdAt,onClick:()=>{l("/friends"),window.electron&&window.electron.show()}})}}else if(E){x=E;const t=null==(c=x.channel)?void 0:c.id,n=null==(u=x.group)?void 0:u.id,a=x.toUser?null==(g=x.author)?void 0:g.id:void 0,r={query:Pr,variables:{userId:a,groupId:n,channelId:t,cursor:null}},s=e.cache.readQuery(r);s&&s.messages.messages.map((e=>e.id)).includes(x.id)&&e.cache.writeQuery({...r,data:{messages:{...s.messages,messages:s.messages.messages.filter((e=>e.id!==x.id))}}})}}}})};function yc(e){let t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function wc(){var e,t;xc();const{pathname:n}=I(),a=P(n,{path:"/dm/:username"}),r=null==(t=null==(e=null==a?void 0:a.params)?void 0:e.username)?void 0:t.substring(1);return f.createElement(Jt,null,f.createElement(Xt,{path:"/"},f.createElement(Jt,null,f.createElement(Xt,{path:["/","/inbox","/dm/:username(@[A-Za-z0-9-_]+)","/:server(\\+[A-Za-z0-9_]+)","/:server(\\+[A-Za-z0-9_]+)/post/:postId","/:server(\\+[A-Za-z0-9_]+)/post/:postId/:slug","/explore"],exact:!0},f.createElement("div",{className:"flex-grow"},f.createElement("div",{className:"flex h-full",style:{height:"calc(100% - 1.375rem)"}},f.createElement(sl,{hide:!0}),f.createElement(Xt,{path:"/explore"},f.createElement(Yo,null)),f.createElement(Xt,{path:"/:server(\\+[A-Za-z0-9_]+)"},f.createElement(Nc,null)),f.createElement(Xt,{exact:!0,path:["/","/inbox","/dm/:username(@[A-Za-z0-9-_]+)"]},f.createElement(sc,null),f.createElement(Xt,{path:"/",exact:!0},f.createElement(qo,null)),f.createElement(Xt,{path:"/inbox"},f.createElement(ni,null)),f.createElement(Xt,{path:"/dm/:username(@[A-Za-z0-9-_]+)"},f.createElement(Oi,{username:r})))),f.createElement(cc,null))),f.createElement(Xt,null,f.createElement(Zr,null)))))}function Nc(){const{server:e}=Ht(),t=e.substring(1);return f.createElement(Bi,{name:t},f.createElement(kc,null))}function kc(){var e;const{server:t,loading:n}=ji(),{hash:a,pathname:r}=I(),s=a.substring(1),l=P(r,{path:"/:server/post/:postId"}),o=null==(e=null==l?void 0:l.params)?void 0:e.postId;return t||n?f.createElement(f.Fragment,null,f.createElement(fc,null),f.createElement(Xt,{path:"/:server(\\+[A-Za-z0-9_]+)",exact:!0,render:({location:e})=>e.hash?f.createElement(Ec,{channelName:s}):f.createElement(Gi,null)}),f.createElement(Xt,{path:["/:server(\\+[A-Za-z0-9_]+)/post/:postId","/:server(\\+[A-Za-z0-9_]+)/post/:postId/:slug"]},f.createElement(nc,{postId:o}))):f.createElement(Zr,null)}function Cc(){return en("(min-width: 1024px)"),f.createElement(tn,{position:"bottom-center",toastOptions:{className:"toast",success:{className:"toast",iconTheme:{primary:"#059669"}},error:{className:"toast",iconTheme:{primary:"#EF4444"}}}})}function $c({post:e,show:t}){const n=e?e.title.split(" "):[],a=`${n.slice(0,9).join(" ")}${n.length>=9?"...":""}`;return f.createElement("div",null,f.createElement(me,null,t&&f.createElement(de.div,{initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"bg-blue-500 bg-opacity-75 truncate w-64 rounded-md shadow-lg text-white text-sm font-medium h-10 px-2 flex items-center"},f.createElement("div",{className:"truncate"},a))))}const Sc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0};function Uc(e,t,n,a){e||(e={x:0,y:0});let r=n.x-e.x,s=n.y-e.y,{x:l,y:o}=t||{x:a.x-e.x,y:a.y-e.y};const i=`translate(${l+r}px, ${o+s}px)`;return{transform:i,WebkitTransform:i}}var Ic=g.exports.memo((function(){const[e,t]=g.exports.useState({x:0,y:0}),[n,a]=g.exports.useState({x:0,y:0}),r=e=>t({x:e.clientX,y:e.clientY}),s=e=>t({x:e.clientX,y:e.clientY});g.exports.useEffect((()=>(window.addEventListener("mousedown",r),window.addEventListener("mouseup",s),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",s)})));const{itemType:l,isDragging:o,item:i,initialOffset:c,currentOffset:m}=nn((e=>({item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})));return f.createElement("div",{style:Sc},f.createElement("div",{style:Uc(c,m,e,n)},l===ul&&f.createElement($c,{post:i,show:o})))}));const Pc="_window-button_19ru1_11",Fc="_window-button-icon_19ru1_18";function Mc(){const{close:e,minimize:t,maximize:n,unmaximize:a,isMaximized:r}=window.electron,[s,l]=g.exports.useState(r()),o=()=>l(r());return f.createElement("header",{className:"_titlebar_19ru1_1"},f.createElement(_o,{className:"h-3 text-tertiary"}),f.createElement("div",{className:"_window-controls_19ru1_6"},f.createElement("div",{className:`${Pc} flex`,onClick:()=>{t(),o()}},f.createElement("img",{className:`${Fc} hidden dark:block`,srcSet:"./icons/titlebar/min-w-10.png 1x, ./icons/titlebar/min-w-12.png 1.25x, ./icons/titlebar/min-w-15.png 1.5x, ./icons/titlebar/min-w-15.png 1.75x, ./icons/titlebar/min-w-20.png 2x, ./icons/titlebar/min-w-20.png 2.25x, ./icons/titlebar/min-w-24.png 2.5x, ./icons/titlebar/min-w-30.png 3x, ./icons/titlebar/min-w-30.png 3.5x",draggable:"false"}),f.createElement("img",{className:`${Fc} block dark:hidden`,srcSet:"./icons/titlebar/min-k-10.png 1x, ./icons/titlebar/min-k-12.png 1.25x, ./icons/titlebar/min-k-15.png 1.5x, ./icons/titlebar/min-k-15.png 1.75x, ./icons/titlebar/min-k-20.png 2x, ./icons/titlebar/min-k-20.png 2.25x, ./icons/titlebar/min-k-24.png 2.5x, ./icons/titlebar/min-k-30.png 3x, ./icons/titlebar/min-k-30.png 3.5x",draggable:"false"})),f.createElement("div",{className:`${Pc} ${s?"hidden":"flex"}`,onClick:()=>{n(),o()}},f.createElement("img",{className:`${Fc} hidden dark:block`,srcSet:"./icons/titlebar/max-w-10.png 1x, ./icons/titlebar/max-w-12.png 1.25x, ./icons/titlebar/max-w-15.png 1.5x, ./icons/titlebar/max-w-15.png 1.75x, ./icons/titlebar/max-w-20.png 2x, ./icons/titlebar/max-w-20.png 2.25x, ./icons/titlebar/max-w-24.png 2.5x, ./icons/titlebar/max-w-30.png 3x, ./icons/titlebar/max-w-30.png 3.5x",draggable:"false"}),f.createElement("img",{className:`${Fc} block dark:hidden`,srcSet:"./icons/titlebar/max-k-10.png 1x, ./icons/titlebar/max-k-12.png 1.25x, ./icons/titlebar/max-k-15.png 1.5x, ./icons/titlebar/max-k-15.png 1.75x, ./icons/titlebar/max-k-20.png 2x, ./icons/titlebar/max-k-20.png 2.25x, ./icons/titlebar/max-k-24.png 2.5x, ./icons/titlebar/max-k-30.png 3x, ./icons/titlebar/max-k-30.png 3.5x",draggable:"false"})),f.createElement("div",{className:`${Pc} ${s?"flex":"hidden"}`,onClick:()=>{a(),o()}},f.createElement("img",{className:`${Fc} hidden dark:block`,srcSet:"./icons/titlebar/restore-w-10.png 1x, ./icons/titlebar/restore-w-12.png 1.25x, ./icons/titlebar/restore-w-15.png 1.5x, ./icons/titlebar/restore-w-15.png 1.75x, ./icons/titlebar/restore-w-20.png 2x, ./icons/titlebar/restore-w-20.png 2.25x, ./icons/titlebar/restore-w-24.png 2.5x, ./icons/titlebar/restore-w-30.png 3x, ./icons/titlebar/restore-w-30.png 3.5x",draggable:"false"}),f.createElement("img",{className:`${Fc} block dark:hidden`,srcSet:"./icons/titlebar/restore-k-10.png 1x, ./icons/titlebar/restore-k-12.png 1.25x, ./icons/titlebar/restore-k-15.png 1.5x, ./icons/titlebar/restore-k-15.png 1.75x, ./icons/titlebar/restore-k-20.png 2x, ./icons/titlebar/restore-k-20.png 2.25x, ./icons/titlebar/restore-k-24.png 2.5x, ./icons/titlebar/restore-k-30.png 3x, ./icons/titlebar/restore-k-30.png 3.5x",draggable:"false"})),f.createElement("div",{className:`${Pc} _close-button_19ru1_32 flex`,onClick:()=>{e(),o()}},f.createElement("img",{className:`${Fc} hidden dark:block`,srcSet:"./icons/titlebar/close-w-10.png 1x, ./icons/titlebar/close-w-12.png 1.25x, ./icons/titlebar/close-w-15.png 1.5x, ./icons/titlebar/close-w-15.png 1.75x, ./icons/titlebar/close-w-20.png 2x, ./icons/titlebar/close-w-20.png 2.25x, ./icons/titlebar/close-w-24.png 2.5x, ./icons/titlebar/close-w-30.png 3x, ./icons/titlebar/close-w-30.png 3.5x",draggable:"false"}),f.createElement("img",{className:`${Fc} block dark:hidden`,srcSet:"./icons/titlebar/close-k-10.png 1x, ./icons/titlebar/close-k-12.png 1.25x, ./icons/titlebar/close-k-15.png 1.5x, ./icons/titlebar/close-k-15.png 1.75x, ./icons/titlebar/close-k-20.png 2x, ./icons/titlebar/close-k-20.png 2.25x, ./icons/titlebar/close-k-24.png 2.5x, ./icons/titlebar/close-k-30.png 3x, ./icons/titlebar/close-k-30.png 3.5x",draggable:"false"}))))}const{hasOwnProperty:Rc}=Object.prototype;const Ac=(e,t)=>{let n;try{n=JSON.stringify(e)}catch(a){const e=new rn(`Network request failed. ${t} is not serializable: ${a.message}`);throw e.parseError=a,e}return n};function Dc(e,t,n){e.append(t,n,n.name)}const Tc=(e={})=>{let{uri:t="/graphql",fetch:n,includeExtensions:a,useGETForQueries:r,isExtractableFile:s=cn,formDataAppendFile:l=Dc,...i}=e;mn(n),n||(n=fetch);const c={http:{includeExtensions:a},options:i.fetchOptions,credentials:i.credentials,headers:i.headers};return new o((e=>{let a=sn(e,t);const o=e.getContext(),i={};if(o.clientAwareness){const{name:e,version:t}=o.clientAwareness;e&&(i["apollographql-client-name"]=e),t&&(i["apollographql-client-version"]=t)}const m={...i,...o.headers},u={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:m},{options:g,body:h}=((e,t,...n)=>{let a={...t.options,headers:t.headers,credentials:t.credentials},r=t.http||{};n.forEach((e=>{a={...a,...e.options,headers:{...a.headers,...e.headers}},e.credentials&&(a.credentials=e.credentials),r={...r,...e.http}}));const{operationName:s,extensions:l,variables:o,query:i}=e,c={operationName:s,variables:o};return r.includeExtensions&&(c.extensions=l),r.includeQuery&&(c.query=p(i)),{options:a,body:c}})(e,dn,c,u),{clone:v,files:f}=ln(h,"",s),b=Ac(v,"Payload");let E;if(!g.signal){const{controller:e,signal:t}=(()=>{if("undefined"==typeof AbortController)return{controller:!1,signal:!1};const e=new AbortController;return{controller:e,signal:e.signal}})();E=e,E&&(g.signal=t)}if(r&&!e.query.definitions.some((e=>"OperationDefinition"===e.kind&&"mutation"===e.operation))&&(g.method="GET"),"GET"===g.method){const{newURI:e,parseError:t}=function(e,n){const a=[],r=(e,t)=>{a.push(`${e}=${encodeURIComponent(t)}`)};if("query"in n&&r("query",n.query),n.operationName&&r("operationName",n.operationName),n.variables){let e;try{e=Ac(n.variables,"Variables map")}catch(t){return{parseError:t}}r("variables",e)}if(n.extensions){let e;try{e=Ac(n.extensions,"Extensions map")}catch(t){return{parseError:t}}r("extensions",e)}let s="",l=e;const o=e.indexOf("#");-1!==o&&(s=e.substr(o),l=e.substr(0,o));const i=-1===l.indexOf("?")?"?":"&";return{newURI:l+i+a.join("&")+s}}(a,h);if(t)return on(t);a=e}else if(f.size){delete g.headers["content-type"];const e=new FormData;e.append("operations",b);const t={};let n=0;f.forEach((e=>{t[++n]=e})),e.append("map",JSON.stringify(t)),n=0,f.forEach(((t,a)=>{l(e,++n,a)})),g.body=e}else try{g.body=Ac(h,"Payload")}catch(x){return on(x)}return new d((t=>{var r;return n(a,g).then((t=>(e.setContext({response:t}),t))).then((r=e,e=>e.text().then((t=>{try{return JSON.parse(t)}catch(n){const a=n;throw a.name="ServerParseError",a.response=e,a.statusCode=e.status,a.bodyText=t,a}})).then((t=>(e.status>=300&&an(e,t,`Response not successful: Received status code ${e.status}`),Array.isArray(t)||Rc.call(t,"data")||Rc.call(t,"errors")||an(e,t,`Server response was missing for query '${Array.isArray(r)?r.map((e=>e.operationName)):r.operationName}'.`),t))))).then((e=>(t.next(e),t.complete(),e))).catch((e=>{"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.error(e))})),()=>{E&&E.abort()}}))}))};const Lc="https://api.joincomet.app/graphql",Oc=En((({graphQLErrors:e,networkError:t})=>{e&&e.forEach((e=>{const{message:t,locations:n,path:a}=e;yn(e),console.log(`[GraphQL error]: Message: ${t}, Location: ${n}, Path: ${a}`),"Access denied! You need to be authorized to perform this action!"!==t&&S.error(r.t(t))})),t&&(console.log(`[Network error]: ${t}`),S.error(t.message))})),zc=new class extends o{constructor(e={}){super(Tc(e).request),this.options=e}}({uri:Lc,headers:{token:localStorage.getItem("token")}}),qc=xn(((e,{headers:t})=>{const n=localStorage.getItem("token");return{headers:n?{...t,token:n}:t}})),Hc=new class extends o{constructor(){super(),this.client=i({url:"wss://api.joincomet.app/graphql",lazy:!1,connectionParams:()=>{const e=localStorage.getItem("token");return e?{token:e}:{}},on:{connected:()=>{jr.status="connected"},error:()=>{jr.status="error"},closed:()=>{jr.status="closed"},connecting:()=>{jr.status="connecting"}}})}wsFetcher(e){return c((t=>this.client.subscribe(e,t)))}request(e){const t=m();return new d((n=>u(t(this.wsFetcher({operationName:e.operationName,query:p(e.query),variables:e.variables})),n)))}},_c=(new un).split((({query:e})=>{const t=pn(e);return"OperationDefinition"===t.kind&&("subscription"===t.operation||gn(t))}),Hc,qc.concat(zc));function Bc(e,t){return e||t}const jc=new fn({link:vn([new hn.SentryLink({uri:Lc}),Oc,_c]),cache:new bn({typePolicies:{User:{fields:{servers:{merge:!1},folders:{merge:!1},relatedUsers:{merge:!1}}},Server:{fields:{channels:{merge:!1},folders:{merge:!1},owner:{merge:!0},permissions:{merge:!1},roles:{merge:!1}}},Post:{fields:{author:{merge:Bc},serverUser:{merge:Bc},server:{merge:Bc}}},Comment:{fields:{author:{merge:Bc},serverUser:{merge:Bc}}},Message:{fields:{author:{merge:Bc},serverUser:{merge:Bc},channel:{merge:Bc},group:{merge:Bc},toUser:{merge:Bc}}},Query:{fields:{serverUsers:{merge:!1},user:{merge:!0},server:{merge:!0},folder:{merge:!0},publicServers:{merge:!1}}}}})});const Gc=/^[A-Za-z0-9-_]+$/gi;function Vc(){var e,n,a,r;const[s,l,o,i]=El(),[c,m]=g.exports.useState(!1),{handleSubmit:d,register:u,watch:p,reset:h,getValues:v,formState:{errors:b}}=ae({mode:"onChange",shouldUnregister:!0}),E=p("email"),x=p("username"),y=p("usernameOrEmail"),w=p("password"),N=p("confirmPassword"),[k,{loading:C}]=function(e){const n={...Ln,...e};return t(yr,n)}(),[$,{loading:S}]=function(e){const n={...Ln,...e};return t(Cr,n)}(),U=()=>{h(),l(!1)},I=!(o?x&&x.length>=3&&x.length<=20&&Gc.test(x)&&(!E||E&&wn(E))&&w&&w.length>=6&&N&&N===w:y&&w);return f.createElement(Js,{close:U,open:s,onSubmit:d((({usernameOrEmail:e,email:t,username:n,password:a})=>{if(o)k({variables:{input:{username:n,password:a,email:t||null}}}).then((({data:{createAccount:{accessToken:e,user:t}}})=>{localStorage.setItem("token",e),location.reload()}));else{const t=wn(e)?{email:e}:{username:e};$({variables:{input:{...t,password:a}}}).then((({data:{login:{accessToken:e,user:t}}})=>{localStorage.setItem("token",e),location.reload()}))}})),buttons:f.createElement("button",{type:"submit",className:"form-button-submit",disabled:I},o&&C||!o&&S?f.createElement(es,{className:"w-5 h-5"}):f.createElement(re,{className:"w-5 h-5"}))},f.createElement("div",{className:"rounded-t-lg bg-gradient-to-r from-red-400 to-indigo-600 h-2"}),f.createElement("div",{className:"px-5 pt-2 pb-9 text-left"},f.createElement("div",{className:"pb-4 flex items-center"},f.createElement("div",{onClick:()=>{o&&(i(!1),h())},className:"text-sm cursor-pointer mr-3 py-3 border-b-2 inline-flex items-center justify-center px-3 "+(o?"border-transparent text-secondary":"dark:border-gray-300 text-primary")},"Log In"),f.createElement("div",{onClick:()=>{o||(i(!0),h())},className:"text-sm cursor-pointer py-3 border-b-2 inline-flex items-center justify-center px-3 "+(o?"dark:border-gray-300 text-primary":"border-transparent text-secondary")},"Create Account"),f.createElement("div",{className:"ml-auto"},f.createElement(_o,{className:"h-3.5 text-secondary"})),f.createElement(ne,{className:"ml-5 w-5 h-5 text-tertiary highlightable",onClick:()=>U()})),f.createElement("div",{className:"space-y-4"},o?f.createElement(f.Fragment,null,f.createElement("div",null,f.createElement("div",{className:"relative"},f.createElement("input",{id:"username",...u("username",{required:!0,pattern:Gc,maxLength:20,minLength:3}),className:"form-input-icon",placeholder:"Username",minLength:3,maxLength:20}),f.createElement(we,{className:"form-input-icon-icon"})),"minLength"===(null==(e=b.username)?void 0:e.type)&&f.createElement("div",{className:"form-error"},"Username must be between 3 and 20 characters"),"pattern"===(null==(n=b.username)?void 0:n.type)&&f.createElement("div",{className:"form-error"},"Letters, numbers, dashes, and underscores only")),f.createElement("div",null,f.createElement("div",{className:"relative"},f.createElement("input",{id:"email",...u("email",{validate:{email:e=>!e||wn(e)||"Invalid email"}}),className:"form-input-icon",placeholder:"Email (Optional)",type:"email"}),f.createElement(Nn,{className:"form-input-icon-icon"})),"email"===(null==(a=b.email)?void 0:a.type)&&f.createElement("div",{className:"form-error"},b.email.message))):f.createElement("input",{id:"usernameOrEmail",...u("usernameOrEmail",{shouldUnregister:!0}),className:"form-input",placeholder:"Username or email"}),o?f.createElement(f.Fragment,null,f.createElement("div",null,f.createElement("div",{className:"relative"},f.createElement("input",{id:"password",...u("password",{required:!0,minLength:6}),className:"form-input-password",placeholder:"Password",type:c?"text":"password",minLength:6}),f.createElement(al,{showPassword:c,setShowPassword:m})),"minLength"===(null==(r=b.password)?void 0:r.type)&&f.createElement("div",{className:"form-error"},"Password must be at least 6 characters")),f.createElement("div",null,f.createElement("div",{className:"relative"},f.createElement("input",{id:"confirmPassword",...u("confirmPassword",{required:!0,validate:{matchesPreviousPassword:e=>{const{password:t}=v();return t===e||"Passwords do not match"}}}),className:"form-input-password",placeholder:"Confirm Password",type:c?"text":"password"}),f.createElement(al,{showPassword:c,setShowPassword:m})),!!w&&!!N&&w!==N&&f.createElement("div",{className:"form-error"},"Passwords do not match"))):f.createElement("div",{className:"relative"},f.createElement("input",{id:"password",...u("password",{required:!0}),className:"form-input",placeholder:"Password",type:c?"text":"password"}),f.createElement(al,{showPassword:c,setShowPassword:m})))))}const Wc=w("\n  flex\n  w-full\n  items-center\n  dark:hover:bg-gray-725\n  px-2\n  py-1\n  h-12\n  rounded\n  cursor-pointer\n"),Yc="MutualServers";var Zc=g.exports.memo((function(){var e,t;const[n]=Wr(),[a,r,s,l]=Kr((e=>[e.dialogUserId,e.setDialogUserId,e.userDialogOpen,e.setUserDialogOpen]));C();const[o,i]=g.exports.useState(Yc),{data:c}=qr({variables:{id:a},skip:!a}),m=null==c?void 0:c.user,d=null!=(t=null==(e=null==c?void 0:c.user)?void 0:e.servers)?t:[],u=g.exports.useCallback((()=>{l(!1)}),[l]);return f.createElement(Qs,{closeOnOverlayClick:!0,isOpen:s,close:u},f.createElement("div",{onClick:e=>e.stopPropagation(),className:"rounded-lg max-w-xl w-full dark:bg-gray-850"},f.createElement("div",{className:"flex p-5"},f.createElement(Fl,{user:m,size:20,showOnline:!0,dotClassName:"ring-5 dark:ring-gray-850 w-4 h-4"}),f.createElement("div",{className:"ml-5 flex w-full pt-5"},f.createElement("div",{className:"font-semibold text-lg text-primary leading-none"},null==m?void 0:m.username),(null==m?void 0:m.isOg)&&f.createElement(x,{content:"OG"},f.createElement("div",{className:"cursor-pointer ml-3 h-5 w-5"},f.createElement(Ho,{className:"w-5 h-5"}))),a!==(null==n?void 0:n.id)&&f.createElement(f.Fragment,null,f.createElement("div",{className:"ml-auto"}),f.createElement(Gs,{data:{type:ys,user:m},leftClick:!0},f.createElement("button",{className:"h-8 cursor-pointer highlightable ml-3 focus:outline-none"},f.createElement(De,{className:"w-5 h-5"})))))),n&&(null==m?void 0:m.id)===n.id?f.createElement("div",{className:"h-36 dark:bg-gray-750 rounded-b-lg p-5 flex items-center justify-center"},f.createElement("button",{className:"h-0 w-0 overflow-hidden"}),f.createElement("div",{className:"text-lg font-medium text-tertiary"},"Improved profile coming soon!")):f.createElement(f.Fragment,null,f.createElement("div",{className:"px-5 dark:border-gray-775 border-t h-14 flex items-center space-x-10"},f.createElement("button",{className:(p=o===Yc,w(`\n  h-full\n  cursor-pointer\n  select-none\n  focus:outline-none\n  text-13\n  border-b-4\n  flex\n  items-center\n  box-content\n  ${p?"text-gray-900 dark:text-gray-100 dark:border-white":"text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-transparent"}\n`)),onClick:()=>i(Yc)},f.createElement("div",{className:"transform translate-y-0.5"},"Mutual Planets"))),f.createElement("div",{className:"rounded-b-lg dark:bg-gray-750 p-2 max-h-[15rem] min-h-[15rem] h-full scrollbar-custom"},o===Yc&&(d.length>0?d.map((e=>f.createElement(b,{to:`/+${e.name}`,key:e.id,className:Wc,onClick:()=>u()},f.createElement(as,{server:e,size:10,className:"dark:bg-gray-800 rounded-full"}),f.createElement("div",{className:"pl-2.5 text-base text-secondary font-medium"},e.name)))):f.createElement(Yr,{className:"h-36"},"No mutual planets"))))));var p}));var Kc=kn((function({history:e}){const t="Mac OS"===os();return f.createElement(Cn,{client:jc},f.createElement($n,null,f.createElement(pt,null,f.createElement("meta",{charSet:"UTF-8"}),f.createElement("link",{rel:"icon",type:"image/svg+xml",href:"/logos/logo_icon.svg"}),f.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),f.createElement("title",null,"Comet – All-in-one chat & forums for communities")),f.createElement(Vr,null,f.createElement(Sn,{history:e},f.createElement(js,null,f.createElement(Un,{backend:In,options:{enableTouchEvents:!1,enableMouseEvents:!0}},f.createElement(Cc,null),f.createElement(Ic,null),window.electron&&!t&&f.createElement(Mc,null),f.createElement(Vc,null),f.createElement(Zc,null),f.createElement("div",{style:window.electron?{height:t?"100%":"calc(100% - 1.375rem)"}:{height:"100%"},className:"flex"},f.createElement(wc,null))))))))}));const Qc=Pn();Fn({dsn:"https://1cff6f3dfcb844e8bd098e35a0498e5a@o683674.ingest.sentry.io/5771326",integrations:[new Mn.BrowserTracing({routingInstrumentation:Rn(Qc),traceFetch:!1})],release:"web@0.0.85",tracesSampleRate:1,beforeBreadcrumb:hn.excludeGraphQLFetch}),window.electron&&document.documentElement.classList.add("electron"),An.render(f.createElement(Kc,{history:Qc}),document.getElementById("root"));
