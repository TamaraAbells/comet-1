# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

interface BaseEntity {
  createdAt: DateTime!
  id: ID!
}

type Channel implements BaseEntity {
  createdAt: DateTime!
  description: String
  id: ID!
  isUnread: Boolean!
  mentionCount: Int!
  name: String
  server: Server!
}

type ChannelDeletedResponse {
  channelId: ID!
  serverId: ID!
}

enum ChannelPermission {
  AttachFiles
  EmbedLinks
  ManageChannel
  ManageMessages
  ManagePermissions
  Mention
  SendMessages
  ViewChannel
}

type ChannelResponse {
  channel: Channel!
  serverId: ID!
}

type ChannelUsersResponse {
  role: String!
  users: [User!]!
}

type Comment implements BaseEntity {
  author: User
  createdAt: DateTime!
  editedAt: DateTime
  id: ID!
  isDeleted: Boolean!
  isPinned: Boolean!
  isVoted: Boolean!
  linkMetadatas: [LinkMetadata!]!
  parentComment: Comment
  pinPosition: String
  post: Post!
  text: String!
  voteCount: Int!
}

type CommentDeletedResponse {
  commentId: ID!
  postId: ID!
}

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

type File {
  filename: String!
  mime: String!
  size: Float!
  url: String!
}

type Folder implements BaseEntity {
  avatarUrl: String
  createdAt: DateTime!
  description: String
  followerCount: Int!
  id: ID!
  isCollaborative: Boolean!
  name: String!
  owner: User
  postCount: Int!
  server: Server
  visibility: FolderVisibility!
}

enum FolderVisibility {
  Friends
  Private
  Public
  Unlisted
}

enum FriendStatus {
  Blocked
  Blocking
  FriendRequestIncoming
  FriendRequestOutgoing
  Friends
  None
}

type FriendStatusChangedResponse {
  status: FriendStatus!
  user: User!
}

type GetChannelPermissionsResponse {
  allowedPermissions: [ChannelPermission!]!
  deniedPermissions: [ChannelPermission!]!
}

enum GetCommentsSort {
  New
  Top
}

type GetMessagesResponse {
  hasMore: Boolean!
  messages: [Message!]!
}

type GetPostsResponse {
  hasMore: Boolean!
  posts: [Post!]!
}

enum GetPostsSort {
  Added
  Hot
  New
  Top
}

enum GetPostsTime {
  All
  Day
  Hour
  Month
  Week
  Year
}

enum GetPublicServersSort {
  Featured
  New
  Top
}

type GetUserRelationshipsResponse {
  blockedByUsers: [User!]!
  blockingUsers: [User!]!
  friends: [User!]!
  incomingFriendRequests: [User!]!
  outgoingFriendRequests: [User!]!
}

type Group implements BaseEntity {
  avatarUrl: String
  createdAt: DateTime!
  displayName: String!
  id: ID!
  name: String!
  owner: User!
  unreadCount: Int!
  users: [User!]!
}

union GroupDmUnion = Group | User

type Image {
  originalHeight: Int!
  originalUrl: String!
  originalWidth: Int!
  popupHeight: Int!
  popupUrl: String
  popupWidth: Int!
  smallHeight: Int!
  smallUrl: String
  smallWidth: Int!
}

type LinkMetadata {
  author: String
  date: DateTime
  description: String
  image: String
  logo: String
  publisher: String
  title: String
  twitterCard: String
  url: String
}

type LoginResponse {
  accessToken: String!
  user: User!
}

type Message implements BaseEntity {
  author: User!
  createdAt: DateTime!
  editedAt: DateTime
  file: File
  id: ID!
  image: Image
  isDeleted: Boolean!
  isPinned: Boolean!
  linkMetadatas: [LinkMetadata!]!
  text: String
  type: MessageType!
}

type MessageDeletedResponse {
  channelId: ID
  groupId: ID
  messageId: ID!
  userId: ID
}

type MessageResponse {
  channelId: ID
  groupId: ID
  message: Message!
  serverId: ID
  userId: ID
}

enum MessageType {
  Join
  Normal
}

type Mutation {
  addPostToFolder(folderId: ID!, postId: ID!): Folder!

  """Ban a user from a server (requires ServerPermission.BanUser)"""
  banUserFromServer(serverId: ID!, userId: ID!): Boolean!

  """
  Ban user globally and optionally purge all posts, comments, and messages (requires admin)
  """
  banUserGlobal(purge: Boolean = false, reason: String, userId: ID!): Boolean!
  changeFriendStatus(status: FriendStatus!, userId: ID!): User!

  """Change password"""
  changePassword(
    """Current password for verification"""
    currentPassword: String!

    """New password"""
    password: String!
  ): LoginResponse!
  closeDm(userId: ID!): Boolean!

  """Create an account"""
  createAccount(email: String!, name: String!, password: String!): LoginResponse!
  createChannel(isPrivate: Boolean = false, name: String!, serverId: ID!): Channel!

  """Create a comment on a post"""
  createComment(parentCommentId: ID, postId: ID!, text: String!): Comment!
  createFolder(isCollaborative: Boolean = false, name: String!, serverId: ID, visibility: FolderVisibility = Public): Folder!

  """Create group with users"""
  createGroup(usernames: [String!]!): Group!

  """Create a post in a server (requires ServerPermission.CreatePost)"""
  createPost(images: [Upload!], linkUrl: String, serverId: ID!, text: String, title: String!): Post!

  """Create a server"""
  createServer(avatarFile: Upload, category: ServerCategory, isPublic: Boolean = false, name: String!): Server!
  deleteChannel(channelId: ID!): Boolean!

  """Delete a comment"""
  deleteComment(commentId: ID!): Boolean!
  deleteFolder(folderId: ID!): Boolean!

  """Delete a message"""
  deleteMessage(
    """ID of message to delete"""
    messageId: ID!
  ): Boolean!

  """Delete a post (must be author)"""
  deletePost(postId: ID!): Boolean!

  """Update user properties"""
  editAccount(avatarFile: Upload, email: String, name: String): User!
  editChannel(channelId: ID!, isPrivate: Boolean = false, name: String!): Channel!

  """Update a comment"""
  editComment(commentId: ID!, text: String!): Comment!
  editFolder(avatarFile: Upload!, description: String!, folderId: ID!, isCollaborative: Boolean = false, name: String!, visibility: FolderVisibility = Public): Folder!

  """Rename a group"""
  editGroup(avatarFile: Upload, groupId: ID!, name: String): Group!
  editMessage(messageId: ID!, text: String!): Message!

  """Edit a post (must be author)"""
  editPost(postId: ID!, text: String): Post!
  editServer(avatarFile: Upload, bannerFile: Upload, category: ServerCategory, description: String, isPublic: Boolean, name: String, serverId: ID!): Server!
  followFolder(folderId: ID!): Folder!
  joinServer(inviteId: ID, serverId: ID): Server!

  """Leave a group"""
  leaveGroup(
    """ID of group to leave"""
    groupId: ID!
  ): Boolean!
  leaveServer(
    """ID of server to leave"""
    serverId: ID!
  ): Boolean!

  """Log in with email and password"""
  login(email: String!, password: String!): LoginResponse!

  """Mark all comment replies as read"""
  markAllRepliesRead: [Reply!]!

  """Mark a single comment reply as read"""
  markReplyRead(replyId: ID!): Reply!

  """Pin a post (requires ServerPermission.PinPosts)"""
  pinPost(
    """ID of post to pin"""
    postId: ID!
  ): Post!
  readChannel(channelId: ID!): Channel!
  readDm(userId: ID!): User!
  readGroup(groupId: ID!): Group!
  removePostFromFolder(folderId: ID!, postId: ID!): Folder!
  reorderChannels(beforeChannelId: ID, channelId: ID!): [Channel!]!
  reorderServerFolders(beforeFolderId: ID, folderId: ID!, serverId: ID!): [Folder!]!
  reorderServers(beforeServerId: ID, serverId: ID!): [Server!]!
  reorderUserFolders(beforeFolderId: ID, folderId: ID!): [Folder!]!

  """Create a chat message"""
  sendMessage(channelId: ID, file: Upload, groupId: ID, text: String, userId: ID): Message!
  startTyping(channelId: ID, groupId: ID, userId: ID): Boolean!
  unbanUserFromServer(serverId: ID!, userId: ID!): Boolean!

  """Unban a user globally (requires admin)"""
  unbanUserGlobal(
    """ID of user to unban"""
    userId: ID!
  ): Boolean!
  unfollowFolder(folderId: ID!): Folder!

  """Unpin a post (requires ServerPermission.PinPosts)"""
  unpinPost(
    """ID of post to unpin"""
    postId: ID!
  ): Post!

  """Remove vote from a comment"""
  unvoteComment(
    """ID of comment to remove vote"""
    commentId: ID!
  ): Comment!

  """Remove vote from post"""
  unvotePost(
    """ID of post to remove vote (requires ServerPermission.VotePost)"""
    postId: ID!
  ): Post!

  """Add vote to a comment"""
  voteComment(
    """ID of comment to vote"""
    commentId: ID!
  ): Comment!

  """Add vote to post"""
  votePost(
    """ID of post to vote (requires ServerPermission.VotePost)"""
    postId: ID!
  ): Post!
}

type Post implements BaseEntity {
  addedAt: DateTime
  addedByUser: User
  author: User
  commentCount: Int!
  createdAt: DateTime!
  domain: String
  editedAt: DateTime
  id: ID!
  imageUrls: [String!]!
  isDeleted: Boolean!
  isPinned: Boolean!
  isVoted: Boolean!
  linkMetadata: LinkMetadata
  linkMetadatas: [LinkMetadata!]!
  linkUrl: String
  pinPosition: String
  relativeUrl: String!
  server: Server!
  text: String
  thumbnailUrl: String
  title: String!
  voteCount: Int!
}

type PostAddedToFolderResponse {
  folderId: ID!
  post: Post!
}

type PostCommentResponse {
  comment: Comment!
  postId: ID!
}

type PostCreatedResponse {
  post: Post!
  serverId: ID!
}

type PostDeletedResponse {
  postId: ID!
  serverId: ID!
}

type PostRemovedFromFolderResponse {
  folderId: ID!
  postId: ID!
}

type Query {
  getChannelPermissions(channelId: ID!): GetChannelPermissionsResponse!
  getChannelUsers(channelId: ID!): [ChannelUsersResponse!]!

  """Get comments on a post"""
  getComments(
    """Return all comments for given post ID"""
    postId: ID

    """Sort comments by new or top"""
    sort: GetCommentsSort = Top
  ): [Comment!]!

  """Returns the currently logged in user, or null"""
  getCurrentUser: User
  getFolder(folderId: ID!): Folder!

  """Get list of groups and DMs, sorted by latest activity (updatedAt)"""
  getGroupsAndDms: [GroupDmUnion!]!
  getJoinedServers: [Server!]!

  """
  Get messages in a DM, group, or channel (requires ChannelPermission.ViewChannel or ServerPermission.ViewChannels)
  """
  getMessages(channelId: ID, groupId: ID, initialTime: DateTime, page: Int = 0, pageSize: Int = 100, pinned: Boolean = false, userId: ID): [GetMessagesResponse!]!
  getMutualFriends(userId: ID!): [User!]!
  getMutualServers(userId: ID!): [Server!]!
  getOtherUserFolders(userId: ID!): [Folder!]!

  """Get a specific post (requires ServerPermission.ViewPosts)"""
  getPost(
    """ID of post to retrieve"""
    postId: ID!
  ): Post!

  """
  Get posts (requires ServerPermission.ViewPosts if serverId is provided)
  """
  getPosts(
    """If provided, only posts from given folder ID will be returned"""
    folderId: ID
    page: Int = 0
    pageSize: Int = 20

    """If provided, only posts matching given search term will be returned"""
    search: String

    """If provided, only posts from given server ID will be returned"""
    serverId: ID

    """Sort by new, hot, top, most comments"""
    sort: GetPostsSort = Hot

    """Filter by all, hour, day, week, month, year"""
    time: GetPostsTime = All
  ): [GetPostsResponse!]!
  getPublicServers(category: ServerCategory, sort: GetPublicServersSort = Top): [Server!]!

  """Get all comment replies or only unread comment replies"""
  getReplies: [Reply!]!
  getServerFolders(serverId: ID!): [Folder!]!
  getServerPermissions(serverId: ID!): [ServerPermission!]!

  """Get LinkMetadata for a URL (requires admin)"""
  getUrlEmbed(url: String!): LinkMetadata! @deprecated(reason: "For testing only")
  getUser(userId: ID!): User!
  getUserFolders: [Folder!]!
  getUserRelationships: GetUserRelationshipsResponse!
}

type Reply implements BaseEntity {
  comment: Comment!
  createdAt: DateTime!
  fromUser: User!
  id: ID!
  isRead: Boolean!
  parentComment: Comment
  post: Post!
}

type Server implements BaseEntity {
  avatarUrl: String
  bannerUrl: String
  category: ServerCategory!
  channels: [Channel!]!
  createdAt: DateTime!
  description: String
  id: ID!
  isBanned: Boolean!
  isChatEnabled: Boolean!
  isFeatured: Boolean!
  isPostsEnabled: Boolean!
  isPublic: Boolean!
  name: String!
  userCount: Int!
}

enum ServerCategory {
  Arts
  Business
  Culture
  Discussion
  Entertainment
  Gaming
  Health
  Hobbies
  Lifestyle
  Memes
  Meta
  News
  Other
  Politics
  Programming
  Science
  Sports
  Technology
}

type ServerFolderDeletedResponse {
  folderId: ID!
  serverId: ID!
}

type ServerFolderResponse {
  folder: Folder!
  serverId: ID!
}

enum ServerPermission {
  AddPostToFolder
  Admin
  AttachFiles
  BanUser
  ChangeNickname
  CreateComment
  CreateInvite
  CreatePost
  DisplayRoleSeparately
  EmbedLinks
  KickUser
  ManageChannels
  ManageComments
  ManageFolders
  ManageMessages
  ManageNicknames
  ManagePosts
  ManageRoles
  ManageServer
  Mention
  Mentionable
  SendMessages
  ViewChannels
  ViewComments
  VoteComment
  VotePost
}

type Subscription {
  allRepliesRead: Boolean!
  channelCreated: ChannelResponse!
  channelDeleted: ChannelDeletedResponse!
  channelRead: Channel!
  channelUpdated: Channel!
  channelsReordered: [Channel!]!
  commentCreated: PostCommentResponse!
  commentDeleted: CommentDeletedResponse!
  commentUpdated: Comment!
  dmClosed: ID!
  dmOpened: User!
  dmRead: User!
  folderUpdated: Folder!
  friendStatusChanged: FriendStatusChangedResponse!
  groupRead: Group!
  groupUpdated: Group!

  """
  Published to all users with permission to view message when a message is deleted or removed
  """
  messageDeleted: MessageDeletedResponse!

  """
  Published to all users with permission to view message when a message is sent
  """
  messageSent: MessageResponse!

  """
  Published to all users with permission to view message when a message is updated (edited or embeds fetched)
  """
  messageUpdated: MessageResponse!
  postAddedToFolder: PostAddedToFolderResponse!
  postCreated: PostCreatedResponse!
  postDeleted: PostDeletedResponse!
  postRemovedFromFolder: PostRemovedFromFolderResponse!
  postUpdated: Post!
  replyRead: Reply!
  replyReceived: Reply!
  serverFolderCreated: ServerFolderResponse!
  serverFolderDeleted: ServerFolderDeletedResponse!
  serverFoldersReordered: [Folder!]!
  serverUpdated: Server!
  serversReordered: [Server!]!
  userFolderCreated: Folder!
  userFolderDeleted: ID!
  userFoldersReordered: [Folder!]!
  userJoinedGroup: UserJoinedGroupResponse!
  userJoinedServer: UserJoinedServerResponse!
  userLeftGroup: UserLeftGroupResponse!
  userLeftServer: UserLeftServerResponse!

  """Published to all users looking at messages when a user starts typing"""
  userStartedTyping(channelId: ID, groupId: ID, userId: ID): String!
  userUpdated: User!
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

type User implements BaseEntity {
  avatarUrl: String
  createdAt: DateTime!
  email: String!
  id: ID!
  isAdmin: Boolean!
  isOnline: Boolean!
  isPremium: Boolean!
  lastLoginAt: DateTime
  name: String!
  tag: String!
  unreadCount: Int!
  username: String!
}

type UserJoinedGroupResponse {
  group: Group!
  user: User!
}

type UserJoinedServerResponse {
  serverId: ID!
  user: User!
}

type UserLeftGroupResponse {
  groupId: ID!
  userId: ID!
}

type UserLeftServerResponse {
  serverId: ID!
  userId: ID!
}
